import{d as Kf,b as Zf,o as qf,e as Jf,f as Qf,g as Ra,F as td}from"./vue.esm-bundler-26R2GK8E.js";import{v as ed}from"./v4-CQkTLCs1.js";import{g as Ku}from"./_commonjsHelpers-Cpj98o6Y.js";var mo,H,Zu,Re,ja,qu,ui,ta,li,fi,Kr={},Ju=[],rd=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,xo=Array.isArray;function Ee(e,t){for(var r in t)e[r]=t[r];return e}function Qu(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function ar(e,t,r){var n,o,i,a={};for(i in t)i=="key"?n=t[i]:i=="ref"?o=t[i]:a[i]=t[i];if(arguments.length>2&&(a.children=arguments.length>3?mo.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)a[i]===void 0&&(a[i]=e.defaultProps[i]);return Hn(e,a,n,o,null)}function Hn(e,t,r,n,o){var i={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:o??++Zu,__i:-1,__u:0};return o==null&&H.vnode!=null&&H.vnode(i),i}function ea(){return{current:null}}function sr(e){return e.children}function z(e,t){this.props=e,this.context=t}function ur(e,t){if(t==null)return e.__?ur(e.__,e.__i+1):null;for(var r;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?ur(e):null}function tl(e){var t,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return tl(e)}}function La(e){(!e.__d&&(e.__d=!0)&&Re.push(e)&&!kn.__r++||ja!==H.debounceRendering)&&((ja=H.debounceRendering)||qu)(kn)}function kn(){var e,t,r,n,o,i,a,s;for(Re.sort(ui);e=Re.shift();)e.__d&&(t=Re.length,n=void 0,i=(o=(r=e).__v).__e,a=[],s=[],r.__P&&((n=Ee({},o)).__v=o.__v+1,H.vnode&&H.vnode(n),ra(r.__P,n,o,r.__n,r.__P.namespaceURI,32&o.__u?[i]:null,a,i??ur(o),!!(32&o.__u),s),n.__v=o.__v,n.__.__k[n.__i]=n,nl(a,n,s),n.__e!=i&&tl(n)),Re.length>t&&Re.sort(ui));kn.__r=0}function el(e,t,r,n,o,i,a,s,u,l,d){var f,c,p,v,h,g=n&&n.__k||Ju,y=t.length;for(r.__d=u,nd(r,t,g),u=r.__d,f=0;f<y;f++)(p=r.__k[f])!=null&&(c=p.__i===-1?Kr:g[p.__i]||Kr,p.__i=f,ra(e,p,c,o,i,a,s,u,l,d),v=p.__e,p.ref&&c.ref!=p.ref&&(c.ref&&na(c.ref,null,p),d.push(p.ref,p.__c||v,p)),h==null&&v!=null&&(h=v),65536&p.__u||c.__k===p.__k?u=rl(p,u,e):typeof p.type=="function"&&p.__d!==void 0?u=p.__d:v&&(u=v.nextSibling),p.__d=void 0,p.__u&=-196609);r.__d=u,r.__e=h}function nd(e,t,r){var n,o,i,a,s,u=t.length,l=r.length,d=l,f=0;for(e.__k=[],n=0;n<u;n++)(o=t[n])!=null&&typeof o!="boolean"&&typeof o!="function"?(a=n+f,(o=e.__k[n]=typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?Hn(null,o,null,null,null):xo(o)?Hn(sr,{children:o},null,null,null):o.constructor===void 0&&o.__b>0?Hn(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=e,o.__b=e.__b+1,i=null,(s=o.__i=od(o,r,a,d))!==-1&&(d--,(i=r[s])&&(i.__u|=131072)),i==null||i.__v===null?(s==-1&&f--,typeof o.type!="function"&&(o.__u|=65536)):s!==a&&(s==a-1?f--:s==a+1?f++:(s>a?f--:f++,o.__u|=65536))):o=e.__k[n]=null;if(d)for(n=0;n<l;n++)(i=r[n])!=null&&!(131072&i.__u)&&(i.__e==e.__d&&(e.__d=ur(i)),ol(i,i))}function rl(e,t,r){var n,o;if(typeof e.type=="function"){for(n=e.__k,o=0;n&&o<n.length;o++)n[o]&&(n[o].__=e,t=rl(n[o],t,r));return t}e.__e!=t&&(t&&e.type&&!r.contains(t)&&(t=ur(e)),r.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function Un(e,t){return t=t||[],e==null||typeof e=="boolean"||(xo(e)?e.some(function(r){Un(r,t)}):t.push(e)),t}function od(e,t,r,n){var o=e.key,i=e.type,a=r-1,s=r+1,u=t[r];if(u===null||u&&o==u.key&&i===u.type&&!(131072&u.__u))return r;if(n>(u!=null&&!(131072&u.__u)?1:0))for(;a>=0||s<t.length;){if(a>=0){if((u=t[a])&&!(131072&u.__u)&&o==u.key&&i===u.type)return a;a--}if(s<t.length){if((u=t[s])&&!(131072&u.__u)&&o==u.key&&i===u.type)return s;s++}}return-1}function Ia(e,t,r){t[0]==="-"?e.setProperty(t,r??""):e[t]=r==null?"":typeof r!="number"||rd.test(t)?r:r+"px"}function gn(e,t,r,n,o){var i;t:if(t==="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||Ia(e.style,t,"");if(r)for(t in r)n&&r[t]===n[t]||Ia(e.style,t,r[t])}else if(t[0]==="o"&&t[1]==="n")i=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||t==="onFocusOut"||t==="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=r,r?n?r.u=n.u:(r.u=ta,e.addEventListener(t,i?fi:li,i)):e.removeEventListener(t,i?fi:li,i);else{if(o=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=r??"";break t}catch{}typeof r=="function"||(r==null||r===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&r==1?"":r))}}function Ba(e){return function(t){if(this.l){var r=this.l[t.type+e];if(t.t==null)t.t=ta++;else if(t.t<r.u)return;return r(H.event?H.event(t):t)}}}function ra(e,t,r,n,o,i,a,s,u,l){var d,f,c,p,v,h,g,y,_,A,M,S,O,m,w,P,T=t.type;if(t.constructor!==void 0)return null;128&r.__u&&(u=!!(32&r.__u),i=[s=t.__e=r.__e]),(d=H.__b)&&d(t);t:if(typeof T=="function")try{if(y=t.props,_="prototype"in T&&T.prototype.render,A=(d=T.contextType)&&n[d.__c],M=d?A?A.props.value:d.__:n,r.__c?g=(f=t.__c=r.__c).__=f.__E:(_?t.__c=f=new T(y,M):(t.__c=f=new z(y,M),f.constructor=T,f.render=ad),A&&A.sub(f),f.props=y,f.state||(f.state={}),f.context=M,f.__n=n,c=f.__d=!0,f.__h=[],f._sb=[]),_&&f.__s==null&&(f.__s=f.state),_&&T.getDerivedStateFromProps!=null&&(f.__s==f.state&&(f.__s=Ee({},f.__s)),Ee(f.__s,T.getDerivedStateFromProps(y,f.__s))),p=f.props,v=f.state,f.__v=t,c)_&&T.getDerivedStateFromProps==null&&f.componentWillMount!=null&&f.componentWillMount(),_&&f.componentDidMount!=null&&f.__h.push(f.componentDidMount);else{if(_&&T.getDerivedStateFromProps==null&&y!==p&&f.componentWillReceiveProps!=null&&f.componentWillReceiveProps(y,M),!f.__e&&(f.shouldComponentUpdate!=null&&f.shouldComponentUpdate(y,f.__s,M)===!1||t.__v===r.__v)){for(t.__v!==r.__v&&(f.props=y,f.state=f.__s,f.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.some(function(X){X&&(X.__=t)}),S=0;S<f._sb.length;S++)f.__h.push(f._sb[S]);f._sb=[],f.__h.length&&a.push(f);break t}f.componentWillUpdate!=null&&f.componentWillUpdate(y,f.__s,M),_&&f.componentDidUpdate!=null&&f.__h.push(function(){f.componentDidUpdate(p,v,h)})}if(f.context=M,f.props=y,f.__P=e,f.__e=!1,O=H.__r,m=0,_){for(f.state=f.__s,f.__d=!1,O&&O(t),d=f.render(f.props,f.state,f.context),w=0;w<f._sb.length;w++)f.__h.push(f._sb[w]);f._sb=[]}else do f.__d=!1,O&&O(t),d=f.render(f.props,f.state,f.context),f.state=f.__s;while(f.__d&&++m<25);f.state=f.__s,f.getChildContext!=null&&(n=Ee(Ee({},n),f.getChildContext())),_&&!c&&f.getSnapshotBeforeUpdate!=null&&(h=f.getSnapshotBeforeUpdate(p,v)),el(e,xo(P=d!=null&&d.type===sr&&d.key==null?d.props.children:d)?P:[P],t,r,n,o,i,a,s,u,l),f.base=t.__e,t.__u&=-161,f.__h.length&&a.push(f),g&&(f.__E=f.__=null)}catch(X){if(t.__v=null,u||i!=null){for(t.__u|=u?160:32;s&&s.nodeType===8&&s.nextSibling;)s=s.nextSibling;i[i.indexOf(s)]=null,t.__e=s}else t.__e=r.__e,t.__k=r.__k;H.__e(X,t,r)}else i==null&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):t.__e=id(r.__e,t,r,n,o,i,a,u,l);(d=H.diffed)&&d(t)}function nl(e,t,r){t.__d=void 0;for(var n=0;n<r.length;n++)na(r[n],r[++n],r[++n]);H.__c&&H.__c(t,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(i){i.call(o)})}catch(i){H.__e(i,o.__v)}})}function id(e,t,r,n,o,i,a,s,u){var l,d,f,c,p,v,h,g=r.props,y=t.props,_=t.type;if(_==="svg"?o="http://www.w3.org/2000/svg":_==="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),i!=null){for(l=0;l<i.length;l++)if((p=i[l])&&"setAttribute"in p==!!_&&(_?p.localName===_:p.nodeType===3)){e=p,i[l]=null;break}}if(e==null){if(_===null)return document.createTextNode(y);e=document.createElementNS(o,_,y.is&&y),s&&(H.__m&&H.__m(t,i),s=!1),i=null}if(_===null)g===y||s&&e.data===y||(e.data=y);else{if(i=i&&mo.call(e.childNodes),g=r.props||Kr,!s&&i!=null)for(g={},l=0;l<e.attributes.length;l++)g[(p=e.attributes[l]).name]=p.value;for(l in g)if(p=g[l],l!="children"){if(l=="dangerouslySetInnerHTML")f=p;else if(!(l in y)){if(l=="value"&&"defaultValue"in y||l=="checked"&&"defaultChecked"in y)continue;gn(e,l,null,p,o)}}for(l in y)p=y[l],l=="children"?c=p:l=="dangerouslySetInnerHTML"?d=p:l=="value"?v=p:l=="checked"?h=p:s&&typeof p!="function"||g[l]===p||gn(e,l,p,g[l],o);if(d)s||f&&(d.__html===f.__html||d.__html===e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(f&&(e.innerHTML=""),el(e,xo(c)?c:[c],t,r,n,_==="foreignObject"?"http://www.w3.org/1999/xhtml":o,i,a,i?i[0]:r.__k&&ur(r,0),s,u),i!=null)for(l=i.length;l--;)Qu(i[l]);s||(l="value",_==="progress"&&v==null?e.removeAttribute("value"):v!==void 0&&(v!==e[l]||_==="progress"&&!v||_==="option"&&v!==g[l])&&gn(e,l,v,g[l],o),l="checked",h!==void 0&&h!==e[l]&&gn(e,l,h,g[l],o))}return e}function na(e,t,r){try{if(typeof e=="function"){var n=typeof e.__u=="function";n&&e.__u(),n&&t==null||(e.__u=e(t))}else e.current=t}catch(o){H.__e(o,r)}}function ol(e,t,r){var n,o;if(H.unmount&&H.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||na(n,null,t)),(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(i){H.__e(i,t)}n.base=n.__P=null}if(n=e.__k)for(o=0;o<n.length;o++)n[o]&&ol(n[o],t,r||typeof e.type!="function");r||Qu(e.__e),e.__c=e.__=e.__e=e.__d=void 0}function ad(e,t,r){return this.constructor(e,r)}function sd(e,t,r){var n,o,i,a;H.__&&H.__(e,t),o=(n=typeof r=="function")?null:t.__k,i=[],a=[],ra(t,e=(!n&&r||t).__k=ar(sr,null,[e]),o||Kr,Kr,t.namespaceURI,!n&&r?[r]:o?null:t.firstChild?mo.call(t.childNodes):null,i,!n&&r?r:o?o.__e:t.firstChild,n,a),nl(i,e,a)}mo=Ju.slice,H={__e:function(e,t,r,n){for(var o,i,a;t=t.__;)if((o=t.__c)&&!o.__)try{if((i=o.constructor)&&i.getDerivedStateFromError!=null&&(o.setState(i.getDerivedStateFromError(e)),a=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,n||{}),a=o.__d),a)return o.__E=o}catch(s){e=s}throw e}},Zu=0,z.prototype.setState=function(e,t){var r;r=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Ee({},this.state),typeof e=="function"&&(e=e(Ee({},r),this.props)),e&&Ee(r,e),e!=null&&this.__v&&(t&&this._sb.push(t),La(this))},z.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),La(this))},z.prototype.render=sr,Re=[],qu=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ui=function(e,t){return e.__v.__b-t.__v.__b},kn.__r=0,ta=0,li=Ba(!1),fi=Ba(!0);var ud={},ld="An invariant failed, however the error is obfuscated because this is a production build.",Vn=[];Object.freeze(Vn);var oa={};Object.freeze(oa);function St(){return++D.mobxGuid}function W(e){throw Be(!1,e),"X"}function Be(e,t){if(!e)throw new Error("[mobx] "+(t||ld))}function il(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var _n=function(){};function fd(e){var t=[];return e.forEach(function(r){t.indexOf(r)===-1&&t.push(r)}),t}function ia(e){return e!==null&&typeof e=="object"}function br(e){if(e===null||typeof e!="object")return!1;var t=Object.getPrototypeOf(e);return t===Object.prototype||t===null}function dd(e){if(wr(e)||At(e))return e;if(Array.isArray(e))return new Map(e);if(br(e)){var t=new Map;for(var r in e)t.set(r,e[r]);return t}else return W("Cannot convert to map from '"+e+"'")}function Or(e,t,r){Object.defineProperty(e,t,{enumerable:!1,writable:!0,configurable:!0,value:r})}function cd(e,t,r){Object.defineProperty(e,t,{enumerable:!1,writable:!1,configurable:!0,value:r})}function pd(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return!r||r.configurable!==!1&&r.writable!==!1}function Me(e,t){var r="isMobX"+e;return t.prototype[r]=!0,function(n){return ia(n)&&n[r]===!0}}function wr(e){return e instanceof Map}function un(e){return e instanceof Set}function al(e){var t=new Set;for(var r in e)t.add(r);return Object.getOwnPropertySymbols(e).forEach(function(n){Object.getOwnPropertyDescriptor(e,n).enumerable&&t.add(n)}),Array.from(t)}function be(e){return e&&e.toString?e.toString():new String(e).toString()}function sl(e){return e===null?null:typeof e=="object"?""+e:e}var hd=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,L=Symbol("mobx administration"),Sr=function(){function e(t){t===void 0&&(t="Atom@"+St()),this.name=t,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=Z.NOT_TRACKING}return e.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(t){return t()})},e.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(t){return t()})},e.prototype.reportObserved=function(){return _l(this)},e.prototype.reportChanged=function(){Gt(),$d(this),zt()},e.prototype.toString=function(){return this.name},e}(),aa=Me("Atom",Sr);function sa(e,t,r){t===void 0&&(t=_n),r===void 0&&(r=_n);var n=new Sr(e);return t!==_n&&qd(n,t),r!==_n&&wl(n,r),n}function vd(e,t){return e===t}function yd(e,t){return ha(e,t)}function gd(e,t){return ha(e,t,1)}function _d(e,t){return Object.is(e,t)}var lr={identity:vd,structural:yd,default:_d,shallow:gd};/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var di=function(e,t){return di=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},di(e,t)};function md(e,t){di(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Wn=function(){return Wn=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Wn.apply(this,arguments)};function ne(e){var t=typeof Symbol=="function"&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}function tr(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i}function ua(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(tr(arguments[t]));return e}var Kn=Symbol("mobx did run lazy initializers"),Cr=Symbol("mobx pending decorators"),xd={},Ed={};function bd(e,t){var r=t?xd:Ed;return r[e]||(r[e]={configurable:!0,enumerable:t,get:function(){return Ye(this),this[e]},set:function(n){Ye(this),this[e]=n}})}function Ye(e){var t,r;if(e[Kn]!==!0){var n=e[Cr];if(n){Or(e,Kn,!0);var o=ua(Object.getOwnPropertySymbols(n),Object.keys(n));try{for(var i=ne(o),a=i.next();!a.done;a=i.next()){var s=a.value,u=n[s];u.propertyCreator(e,u.prop,u.descriptor,u.decoratorTarget,u.decoratorArguments)}}catch(l){t={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}}}}function ul(e,t){return function(){var n,o=function(a,s,u,l){if(l===!0)return t(a,s,u,a,n),null;if(!Object.prototype.hasOwnProperty.call(a,Cr)){var d=a[Cr];Or(a,Cr,Wn({},d))}return a[Cr][s]={prop:s,propertyCreator:t,descriptor:u,decoratorTarget:a,decoratorArguments:n},bd(s,e)};return Od(arguments)?(n=Vn,o.apply(null,arguments)):(n=Array.prototype.slice.call(arguments),o)}}function Od(e){return(e.length===2||e.length===3)&&(typeof e[1]=="string"||typeof e[1]=="symbol")||e.length===4&&e[3]===!0}function ln(e,t,r){return pr(e)?e:Array.isArray(e)?b.array(e,{name:r}):br(e)?b.object(e,void 0,{name:r}):wr(e)?b.map(e,{name:r}):un(e)?b.set(e,{name:r}):e}function wd(e,t,r){return e==null||Zt(e)||ue(e)||At(e)||Ct(e)?e:Array.isArray(e)?b.array(e,{name:r,deep:!1}):br(e)?b.object(e,void 0,{name:r,deep:!1}):wr(e)?b.map(e,{name:r,deep:!1}):un(e)?b.set(e,{name:r,deep:!1}):W(!1)}function Eo(e){return e}function Sd(e,t,r){return ha(e,t)?t:e}function bo(e){Be(e);var t=ul(!0,function(n,o,i,a,s){var u=i?i.initializer?i.initializer.call(n):i.value:void 0;pa(n).addObservableProp(o,u,e)}),r=(typeof process<"u",t);return r.enhancer=e,r}var ll={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(ll);function Qe(e){return e==null?ll:typeof e=="string"?{name:e,deep:!0,proxy:!0}:e}var la=bo(ln),Ad=bo(wd),fl=bo(Eo),Md=bo(Sd);function mn(e){return e.defaultDecorator?e.defaultDecorator.enhancer:e.deep===!1?Eo:ln}function Td(e,t,r){if(typeof arguments[1]=="string"||typeof arguments[1]=="symbol")return la.apply(null,arguments);if(pr(e))return e;var n=br(e)?b.object(e,t,r):Array.isArray(e)?b.array(e,t):wr(e)?b.map(e,t):un(e)?b.set(e,t):e;if(n!==e)return n;W(!1)}var $a={box:function(e,t){arguments.length>2&&Tr("box");var r=Qe(t);return new Xe(e,mn(r),r.name,!0,r.equals)},array:function(e,t){arguments.length>2&&Tr("array");var r=Qe(t);return cc(e,mn(r),r.name)},map:function(e,t){arguments.length>2&&Tr("map");var r=Qe(t);return new ca(e,mn(r),r.name)},set:function(e,t){arguments.length>2&&Tr("set");var r=Qe(t);return new Cl(e,mn(r),r.name)},object:function(e,t,r){typeof arguments[1]=="string"&&Tr("object");var n=Qe(r);if(n.proxy===!1)return gi({},e,t,n);var o=Al(n),i=gi({},void 0,void 0,n),a=lc(i);return Ml(a,e,t,o),a},ref:fl,shallow:Ad,deep:la,struct:Md},b=Td;Object.keys($a).forEach(function(e){return b[e]=$a[e]});function Tr(e){W("Expected one or two arguments to observable."+e+". Did you accidentally try to use observable."+e+" as decorator?")}var Zn=ul(!1,function(e,t,r,n,o){var i=r.get,a=r.set,s=o[0]||{};pa(e).addComputedProp(e,t,Wn({get:i,set:a,context:e},s))}),Pd=Zn({equals:lr.structural}),et=function(t,r,n){if(typeof r=="string"||t!==null&&typeof t=="object"&&arguments.length===1)return Zn.apply(null,arguments);var o=typeof r=="object"?r:{};return o.get=t,o.set=typeof r=="function"?r:o.set,o.name=o.name||t.name||"",new dr(o)};et.struct=Pd;var Z;(function(e){e[e.NOT_TRACKING=-1]="NOT_TRACKING",e[e.UP_TO_DATE=0]="UP_TO_DATE",e[e.POSSIBLY_STALE=1]="POSSIBLY_STALE",e[e.STALE=2]="STALE"})(Z||(Z={}));var ie;(function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"})(ie||(ie={}));var qn=function(){function e(t){this.cause=t}return e}();function Rr(e){return e instanceof qn}function ci(e){switch(e.dependenciesState){case Z.UP_TO_DATE:return!1;case Z.NOT_TRACKING:case Z.STALE:return!0;case Z.POSSIBLY_STALE:{for(var t=fa(!0),r=Ar(),n=e.observing,o=n.length,i=0;i<o;i++){var a=n[i];if(cr(a)){if(D.disableErrorBoundaries)a.get();else try{a.get()}catch{return Se(r),Ir(t),!0}if(e.dependenciesState===Z.STALE)return Se(r),Ir(t),!0}}return pl(e),Se(r),Ir(t),!1}}}function fr(e){var t=e.observers.size>0;D.computationDepth>0&&t&&W(!1),!D.allowStateChanges&&(t||D.enforceActions==="strict")&&W(!1)}function dl(e,t,r){var n=fa(!0);pl(e),e.newObserving=new Array(e.observing.length+100),e.unboundDepsCount=0,e.runId=++D.runId;var o=D.trackingDerivation;D.trackingDerivation=e;var i;if(D.disableErrorBoundaries===!0)i=t.call(r);else try{i=t.call(r)}catch(a){i=new qn(a)}return D.trackingDerivation=o,Dd(e),Ir(n),i}function Dd(e){for(var t=e.observing,r=e.observing=e.newObserving,n=Z.UP_TO_DATE,o=0,i=e.unboundDepsCount,a=0;a<i;a++){var s=r[a];s.diffValue===0&&(s.diffValue=1,o!==a&&(r[o]=s),o++),s.dependenciesState>n&&(n=s.dependenciesState)}for(r.length=o,e.newObserving=null,i=t.length;i--;){var s=t[i];s.diffValue===0&&yl(s,e),s.diffValue=0}for(;o--;){var s=r[o];s.diffValue===1&&(s.diffValue=0,Bd(s,e))}n!==Z.UP_TO_DATE&&(e.dependenciesState=n,e.onBecomeStale())}function pi(e){var t=e.observing;e.observing=[];for(var r=t.length;r--;)yl(t[r],e);e.dependenciesState=Z.NOT_TRACKING}function cl(e){var t=Ar();try{return e()}finally{Se(t)}}function Ar(){var e=D.trackingDerivation;return D.trackingDerivation=null,e}function Se(e){D.trackingDerivation=e}function fa(e){var t=D.allowStateReads;return D.allowStateReads=e,t}function Ir(e){D.allowStateReads=e}function pl(e){if(e.dependenciesState!==Z.UP_TO_DATE){e.dependenciesState=Z.UP_TO_DATE;for(var t=e.observing,r=t.length;r--;)t[r].lowestObserverState=Z.UP_TO_DATE}}var Jn=0,Nd=1,Xa=Object.getOwnPropertyDescriptor(function(){},"name");Xa&&Xa.configurable;function $e(e,t,r){var n=function(){return hl(e,t,r||this,arguments)};return n.isMobxAction=!0,n}function hl(e,t,r,n){var o=Cd();try{return t.apply(r,n)}catch(i){throw o.error=i,i}finally{Rd(o)}}function Cd(e,t,r){var n=wt(),o=0,i=Ar();Gt();var a=Oo(!0),s=fa(!0),u={prevDerivation:i,prevAllowStateChanges:a,prevAllowStateReads:s,notifySpy:n,startTime:o,actionId:Nd++,parentActionId:Jn};return Jn=u.actionId,u}function Rd(e){Jn!==e.actionId&&W("invalid action stack. did you forget to finish an action?"),Jn=e.parentActionId,e.error!==void 0&&(D.suppressReactionErrors=!0),wo(e.prevAllowStateChanges),Ir(e.prevAllowStateReads),zt(),Se(e.prevDerivation),e.notifySpy,D.suppressReactionErrors=!1}function Oo(e){var t=D.allowStateChanges;return D.allowStateChanges=e,t}function wo(e){D.allowStateChanges=e}var Xe=function(e){md(t,e);function t(r,n,o,i,a){o===void 0&&(o="ObservableValue@"+St()),i===void 0&&(i=!0),a===void 0&&(a=lr.default);var s=e.call(this,o)||this;return s.enhancer=n,s.name=o,s.equals=a,s.hasUnreportedChange=!1,s.value=n(r,void 0,o),i&&wt(),s}return t.prototype.dehanceValue=function(r){return this.dehancer!==void 0?this.dehancer(r):r},t.prototype.set=function(r){var n=this.value;if(r=this.prepareNewValue(r),r!==D.UNCHANGED){var o=wt();this.setNewValue(r)}},t.prototype.prepareNewValue=function(r){if(fr(this),ae(this)){var n=se(this,{object:this,type:"update",newValue:r});if(!n)return D.UNCHANGED;r=n.newValue}return r=this.enhancer(r,this.value,this.name),this.equals(this.value,r)?D.UNCHANGED:r},t.prototype.setNewValue=function(r){var n=this.value;this.value=r,this.reportChanged(),kt(this)&&Ut(this,{type:"update",object:this,newValue:r,oldValue:n})},t.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},t.prototype.intercept=function(r){return fn(this,r)},t.prototype.observe=function(r,n){return n&&r({object:this,type:"update",newValue:this.value,oldValue:void 0}),dn(this,r)},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+"["+this.value+"]"},t.prototype.valueOf=function(){return sl(this.get())},t.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},t}(Sr),jd=Me("ObservableValue",Xe),dr=function(){function e(t){this.dependenciesState=Z.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=Z.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+St(),this.value=new qn(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=ie.NONE,Be(t.get,"missing option for computed: get"),this.derivation=t.get,this.name=t.name||"ComputedValue@"+St(),t.set&&(this.setter=$e(this.name+"-setter",t.set)),this.equals=t.equals||(t.compareStructural||t.struct?lr.structural:lr.default),this.scope=t.context,this.requiresReaction=!!t.requiresReaction,this.keepAlive=!!t.keepAlive}return e.prototype.onBecomeStale=function(){Hd(this)},e.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(t){return t()})},e.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(t){return t()})},e.prototype.get=function(){this.isComputing&&W("Cycle detected in computation "+this.name+": "+this.derivation),D.inBatch===0&&this.observers.size===0&&!this.keepAlive?ci(this)&&(this.warnAboutUntrackedRead(),Gt(),this.value=this.computeValue(!1),zt()):(_l(this),ci(this)&&this.trackAndCompute()&&Xd(this));var t=this.value;if(Rr(t))throw t.cause;return t},e.prototype.peek=function(){var t=this.computeValue(!1);if(Rr(t))throw t.cause;return t},e.prototype.set=function(t){if(this.setter){Be(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,t)}finally{this.isRunningSetter=!1}}else Be(!1,!1)},e.prototype.trackAndCompute=function(){var t=this.value,r=this.dependenciesState===Z.NOT_TRACKING,n=this.computeValue(!0),o=r||Rr(t)||Rr(n)||!this.equals(t,n);return o&&(this.value=n),o},e.prototype.computeValue=function(t){this.isComputing=!0,D.computationDepth++;var r;if(t)r=dl(this,this.derivation,this.scope);else if(D.disableErrorBoundaries===!0)r=this.derivation.call(this.scope);else try{r=this.derivation.call(this.scope)}catch(n){r=new qn(n)}return D.computationDepth--,this.isComputing=!1,r},e.prototype.suspend=function(){this.keepAlive||(pi(this),this.value=void 0)},e.prototype.observe=function(t,r){var n=this,o=!0,i=void 0;return Wd(function(){var a=n.get();if(!o||r){var s=Ar();t({type:"update",object:n,newValue:a,oldValue:i}),Se(s)}o=!1,i=a})},e.prototype.warnAboutUntrackedRead=function(){},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},e.prototype.valueOf=function(){return sl(this.get())},e.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},e}(),cr=Me("ComputedValue",dr),Yn=function(){function e(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1}return e}(),Ld={};function hi(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:Ld}var Fn=!0,vl=!1,D=function(){var e=hi();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(Fn=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==new Yn().version&&(Fn=!1),Fn?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new Yn):(setTimeout(function(){vl||W("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new Yn)}();function Id(){(D.pendingReactions.length||D.inBatch||D.isRunningReactions)&&W("isolateGlobalState should be called before MobX is running any reactions"),vl=!0,Fn&&(--hi().__mobxInstanceCount===0&&(hi().__mobxGlobals=void 0),D=new Yn)}function vi(){return D}function Bd(e,t){e.observers.add(t),e.lowestObserverState>t.dependenciesState&&(e.lowestObserverState=t.dependenciesState)}function yl(e,t){e.observers.delete(t),e.observers.size===0&&gl(e)}function gl(e){e.isPendingUnobservation===!1&&(e.isPendingUnobservation=!0,D.pendingUnobservations.push(e))}function Gt(){D.inBatch++}function zt(){if(--D.inBatch===0){El();for(var e=D.pendingUnobservations,t=0;t<e.length;t++){var r=e[t];r.isPendingUnobservation=!1,r.observers.size===0&&(r.isBeingObserved&&(r.isBeingObserved=!1,r.onBecomeUnobserved()),r instanceof dr&&r.suspend())}D.pendingUnobservations=[]}}function _l(e){var t=D.trackingDerivation;return t!==null?(t.runId!==e.lastAccessedBy&&(e.lastAccessedBy=t.runId,t.newObserving[t.unboundDepsCount++]=e,e.isBeingObserved||(e.isBeingObserved=!0,e.onBecomeObserved())),!0):(e.observers.size===0&&D.inBatch>0&&gl(e),!1)}function $d(e){e.lowestObserverState!==Z.STALE&&(e.lowestObserverState=Z.STALE,e.observers.forEach(function(t){t.dependenciesState===Z.UP_TO_DATE&&(t.isTracing!==ie.NONE&&ml(t,e),t.onBecomeStale()),t.dependenciesState=Z.STALE}))}function Xd(e){e.lowestObserverState!==Z.STALE&&(e.lowestObserverState=Z.STALE,e.observers.forEach(function(t){t.dependenciesState===Z.POSSIBLY_STALE?t.dependenciesState=Z.STALE:t.dependenciesState===Z.UP_TO_DATE&&(e.lowestObserverState=Z.UP_TO_DATE)}))}function Hd(e){e.lowestObserverState===Z.UP_TO_DATE&&(e.lowestObserverState=Z.POSSIBLY_STALE,e.observers.forEach(function(t){t.dependenciesState===Z.UP_TO_DATE&&(t.dependenciesState=Z.POSSIBLY_STALE,t.isTracing!==ie.NONE&&ml(t,e),t.onBecomeStale())}))}function ml(e,t){if(console.log("[mobx.trace] '"+e.name+"' is invalidated due to a change in: '"+t.name+"'"),e.isTracing===ie.BREAK){var r=[];xl(Qd(e),r,1),new Function(`debugger;
/*
Tracing '`+e.name+`'

You are entering this break point because derivation '`+e.name+"' is being traced and '"+t.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(e instanceof dr?e.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+r.join(`
`)+`
*/
    `)()}}function xl(e,t,r){if(t.length>=1e3){t.push("(and many more)");return}t.push(""+new Array(r).join("	")+e.name),e.dependencies&&e.dependencies.forEach(function(n){return xl(n,t,r+1)})}var Zr=function(){function e(t,r,n,o){t===void 0&&(t="Reaction@"+St()),o===void 0&&(o=!1),this.name=t,this.onInvalidate=r,this.errorHandler=n,this.requiresObservable=o,this.observing=[],this.newObserving=[],this.dependenciesState=Z.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+St(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=ie.NONE}return e.prototype.onBecomeStale=function(){this.schedule()},e.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,D.pendingReactions.push(this),El())},e.prototype.isScheduled=function(){return this._isScheduled},e.prototype.runReaction=function(){if(!this.isDisposed){if(Gt(),this._isScheduled=!1,ci(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&wt()}catch(t){this.reportExceptionInDerivation(t)}}zt()}},e.prototype.track=function(t){if(!this.isDisposed){Gt(),this._isRunning=!0;var r=dl(this,t,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&pi(this),Rr(r)&&this.reportExceptionInDerivation(r.cause),zt()}},e.prototype.reportExceptionInDerivation=function(t){var r=this;if(this.errorHandler){this.errorHandler(t,this);return}if(D.disableErrorBoundaries)throw t;var n="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";D.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)"):console.error(n,t),D.globalReactionErrorHandlers.forEach(function(o){return o(t,r)})},e.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(Gt(),pi(this),zt()))},e.prototype.getDisposer=function(){var t=this.dispose.bind(this);return t[L]=this,t},e.prototype.toString=function(){return"Reaction["+this.name+"]"},e.prototype.trace=function(t){t===void 0&&(t=!1),ac(this,t)},e}(),Ha=100,yi=function(e){return e()};function El(){D.inBatch>0||D.isRunningReactions||yi(Yd)}function Yd(){D.isRunningReactions=!0;for(var e=D.pendingReactions,t=0;e.length>0;){++t===Ha&&(console.error("Reaction doesn't converge to a stable state after "+Ha+" iterations."+(" Probably there is a cycle in the reactive function: "+e[0])),e.splice(0));for(var r=e.splice(0),n=0,o=r.length;n<o;n++)r[n].runReaction()}D.isRunningReactions=!1}var Qn=Me("Reaction",Zr);function Fd(e){var t=yi;yi=function(r){return e(function(){return t(r)})}}function wt(){return!1}function Gd(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}function zd(){W(!1)}function Ya(e){return function(t,r,n){if(n){if(n.value)return{value:$e(e,n.value),enumerable:!1,configurable:!0,writable:!0};var o=n.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return $e(e,o.call(this))}}}return kd(e).apply(this,arguments)}}function kd(e){return function(t,r,n){Object.defineProperty(t,r,{configurable:!0,enumerable:!1,get:function(){},set:function(o){Or(this,r,x(e,o))}})}}function Ud(e,t,r,n){return n===!0?(Go(e,t,r.value),null):r?{configurable:!0,enumerable:!1,get:function(){return Go(this,t,r.value||r.initializer.call(this)),this[t]},set:zd}:{enumerable:!1,configurable:!0,set:function(o){Go(this,t,o)},get:function(){}}}var x=function(t,r,n,o){if(arguments.length===1&&typeof t=="function")return $e(t.name||"<unnamed action>",t);if(arguments.length===2&&typeof r=="function")return $e(t,r);if(arguments.length===1&&typeof t=="string")return Ya(t);if(o===!0)Or(t,r,$e(t.name||r,n.value,this));else return Ya(r).apply(null,arguments)};x.bound=Ud;function Vd(e,t){var r=typeof e=="string"?e:e.name||"<unnamed action>",n=typeof e=="function"?e:t;return hl(r,n,this,void 0)}function Go(e,t,r){Or(e,t,$e(t,r.bind(e)))}function Wd(e,t){t===void 0&&(t=oa);var r=t&&t.name||e.name||"Autorun@"+St(),n=!t.scheduler&&!t.delay,o;if(n)o=new Zr(r,function(){this.track(s)},t.onError,t.requiresObservable);else{var i=bl(t),a=!1;o=new Zr(r,function(){a||(a=!0,i(function(){a=!1,o.isDisposed||o.track(s)}))},t.onError,t.requiresObservable)}function s(){e(o)}return o.schedule(),o.getDisposer()}var Kd=function(e){return e()};function bl(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:Kd}function Ol(e,t,r){r===void 0&&(r=oa);var n=r.name||"Reaction@"+St(),o=x(n,r.onError?Zd(r.onError,t):t),i=!r.scheduler&&!r.delay,a=bl(r),s=!0,u=!1,l,d=r.compareStructural?lr.structural:r.equals||lr.default,f=new Zr(n,function(){s||i?c():u||(u=!0,a(c))},r.onError,r.requiresObservable);function c(){if(u=!1,!f.isDisposed){var p=!1;f.track(function(){var v=e(f);p=s||!d(l,v),l=v}),s&&r.fireImmediately&&o(l,f),!s&&p===!0&&o(l,f),s&&(s=!1)}}return f.schedule(),f.getDisposer()}function Zd(e,t){return function(){try{return t.apply(this,arguments)}catch(r){e.call(this,r)}}}function qd(e,t,r){return Sl("onBecomeObserved",e,t)}function wl(e,t,r){return Sl("onBecomeUnobserved",e,t)}function Sl(e,t,r,n){var o=Ae(t),i=r,a=e+"Listeners";o[a]?o[a].add(i):o[a]=new Set([i]);var s=o[e];return typeof s!="function"?W(!1):function(){var u=o[a];u&&(u.delete(i),u.size===0&&delete o[a])}}function Jd(e){var t=e.enforceActions,r=e.computedRequiresReaction,n=e.computedConfigurable,o=e.disableErrorBoundaries,i=e.reactionScheduler,a=e.reactionRequiresObservable,s=e.observableRequiresReaction;if(e.isolateGlobalState===!0&&Id(),t!==void 0){var u=void 0;switch(t){case!0:case"observed":u=!0;break;case!1:case"never":u=!1;break;case"strict":case"always":u="strict";break;default:W("Invalid value for 'enforceActions': '"+t+"', expected 'never', 'always' or 'observed'")}D.enforceActions=u,D.allowStateChanges=!(u===!0||u==="strict")}r!==void 0&&(D.computedRequiresReaction=!!r),a!==void 0&&(D.reactionRequiresObservable=!!a),s!==void 0&&(D.observableRequiresReaction=!!s,D.allowStateReads=!D.observableRequiresReaction),n!==void 0&&(D.computedConfigurable=!!n),o!==void 0&&(o===!0&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors when `disableErrorBoundaries` is enabled."),D.disableErrorBoundaries=!!o),i&&Fd(i)}function gi(e,t,r,n){n=Qe(n);var o=Al(n);return Ye(e),pa(e,n.name,o.enhancer),t&&Ml(e,t,r,o),e}function Al(e){return e.defaultDecorator||(e.deep===!1?fl:la)}function Ml(e,t,r,n){var o,i,a,s;Gt();try{var a=hd(t);try{for(var u=ne(a),l=u.next();!l.done;l=u.next()){var s=l.value,d=Object.getOwnPropertyDescriptor(t,s),f=r&&s in r?r[s]:d.get?Zn:n,c=f(e,s,d,!0);c&&Object.defineProperty(e,s,c)}}catch(v){o={error:v}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}}finally{zt()}}function Qd(e,t){return Tl(Ae(e,t))}function Tl(e){var t={name:e.name};return e.observing&&e.observing.length>0&&(t.dependencies=fd(e.observing).map(Tl)),t}function Pl(e,t){if(e==null)return!1;if(t!==void 0){if(Zt(e)===!1||!e[L].values.has(t))return!1;var r=Ae(e,t);return cr(r)}return cr(e)}function tc(e){return arguments.length>1?W(!1):Pl(e)}function Fa(e,t){return typeof t!="string"?W(!1):Pl(e,t)}function ec(e,t){return e==null?!1:Zt(e)||!!e[L]||aa(e)||Qn(e)||cr(e)}function pr(e){return arguments.length!==1&&W(!1),ec(e)}function hr(e){return Zt(e)?e[L].getKeys():At(e)||Ct(e)?Array.from(e.keys()):ue(e)?e.map(function(t,r){return r}):W(!1)}function rc(e){return Zt(e)?hr(e).map(function(t){return e[t]}):At(e)?hr(e).map(function(t){return e.get(t)}):Ct(e)?Array.from(e.values()):ue(e)?e.slice():W(!1)}function nc(e){return Zt(e)?hr(e).map(function(t){return[t,e[t]]}):At(e)?hr(e).map(function(t){return[t,e.get(t)]}):Ct(e)?Array.from(e.entries()):ue(e)?e.map(function(t,r){return[r,t]}):W(!1)}function da(e,t,r){if(arguments.length===2&&!Ct(e)){Gt();var n=t;try{for(var o in n)da(e,o,n[o])}finally{zt()}return}if(Zt(e)){var i=e[L],a=i.values.get(t);a?i.write(t,r):i.addObservableProp(t,r,i.defaultEnhancer)}else if(At(e))e.set(t,r);else if(Ct(e))e.add(t);else if(ue(e))typeof t!="number"&&(t=parseInt(t,10)),Be(t>=0,"Not a valid index: '"+t+"'"),Gt(),t>=e.length&&(e.length=t+1),e[t]=r,zt();else return W(!1)}function Dl(e,t,r,n){return oc(e,t,r)}function oc(e,t,r){return So(e).observe(t,r)}var ic={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function Ve(e,t,r,n){return n.detectCycles&&e.set(t,r),r}function ge(e,t,r){if(!t.recurseEverything&&!pr(e)||typeof e!="object")return e;if(e===null)return null;if(e instanceof Date)return e;if(jd(e))return ge(e.get(),t,r);pr(e)&&hr(e);var n=t.detectCycles===!0;if(n&&e!==null&&r.has(e))return r.get(e);if(ue(e)||Array.isArray(e)){var o=Ve(r,e,[],t),i=e.map(function(p){return ge(p,t,r)});o.length=i.length;for(var a=0,s=i.length;a<s;a++)o[a]=i[a];return o}if(Ct(e)||Object.getPrototypeOf(e)===Set.prototype)if(t.exportMapsAsObjects===!1){var u=Ve(r,e,new Set,t);return e.forEach(function(p){u.add(ge(p,t,r))}),u}else{var l=Ve(r,e,[],t);return e.forEach(function(p){l.push(ge(p,t,r))}),l}if(At(e)||Object.getPrototypeOf(e)===Map.prototype)if(t.exportMapsAsObjects===!1){var d=Ve(r,e,new Map,t);return e.forEach(function(p,v){d.set(v,ge(p,t,r))}),d}else{var f=Ve(r,e,{},t);return e.forEach(function(p,v){f[v]=ge(p,t,r)}),f}var c=Ve(r,e,{},t);return al(e).forEach(function(p){c[p]=ge(e[p],t,r)}),c}function te(e,t){typeof t=="boolean"&&(t={detectCycles:t}),t||(t=ic),t.detectCycles=t.detectCycles===void 0?t.recurseEverything===!0:t.detectCycles===!0;var r;return t.detectCycles&&(r=new Map),ge(e,t,r)}function ac(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=!1;typeof e[e.length-1]=="boolean"&&(r=e.pop());var n=sc(e);if(!n)return W(!1);n.isTracing===ie.NONE&&console.log("[mobx.trace] '"+n.name+"' tracing enabled"),n.isTracing=r?ie.BREAK:ie.LOG}function sc(e){switch(e.length){case 0:return D.trackingDerivation;case 1:return Ae(e[0]);case 2:return Ae(e[0],e[1])}}function Ht(e,t){t===void 0&&(t=void 0),Gt();try{return e.apply(t)}finally{zt()}}function xn(e){return e[L]}function En(e){return typeof e=="string"||typeof e=="number"||typeof e=="symbol"}var uc={has:function(e,t){if(t===L||t==="constructor"||t===Kn)return!0;var r=xn(e);return En(t)?r.has(t):t in e},get:function(e,t){if(t===L||t==="constructor"||t===Kn)return e[t];var r=xn(e),n=r.values.get(t);if(n instanceof Sr){var o=n.get();return o===void 0&&r.has(t),o}return En(t)&&r.has(t),e[t]},set:function(e,t,r){return En(t)?(da(e,t,r),!0):!1},deleteProperty:function(e,t){if(!En(t))return!1;var r=xn(e);return r.remove(t),!0},ownKeys:function(e){var t=xn(e);return t.keysAtom.reportObserved(),Reflect.ownKeys(e)},preventExtensions:function(e){return W("Dynamic observable objects cannot be frozen"),!1}};function lc(e){var t=new Proxy(e,uc);return e[L].proxy=t,t}function ae(e){return e.interceptors!==void 0&&e.interceptors.length>0}function fn(e,t){var r=e.interceptors||(e.interceptors=[]);return r.push(t),il(function(){var n=r.indexOf(t);n!==-1&&r.splice(n,1)})}function se(e,t){var r=Ar();try{for(var n=ua(e.interceptors||[]),o=0,i=n.length;o<i&&(t=n[o](t),Be(!t||t.type,"Intercept handlers should return nothing or a change object"),!!t);o++);return t}finally{Se(r)}}function kt(e){return e.changeListeners!==void 0&&e.changeListeners.length>0}function dn(e,t){var r=e.changeListeners||(e.changeListeners=[]);return r.push(t),il(function(){var n=r.indexOf(t);n!==-1&&r.splice(n,1)})}function Ut(e,t){var r=Ar(),n=e.changeListeners;if(n){n=n.slice();for(var o=0,i=n.length;o<i;o++)n[o](t);Se(r)}}var fc=1e4,dc={get:function(e,t){return t===L?e[L]:t==="length"?e[L].getArrayLength():typeof t=="number"?de.get.call(e,t):typeof t=="string"&&!isNaN(t)?de.get.call(e,parseInt(t)):de.hasOwnProperty(t)?de[t]:e[t]},set:function(e,t,r){return t==="length"&&e[L].setArrayLength(r),typeof t=="number"&&de.set.call(e,t,r),typeof t=="symbol"||isNaN(t)?e[t]=r:de.set.call(e,parseInt(t),r),!0},preventExtensions:function(e){return W("Observable arrays cannot be frozen"),!1}};function cc(e,t,r,n){r===void 0&&(r="ObservableArray@"+St()),n===void 0&&(n=!1);var o=new Nl(r,t,n);cd(o.values,L,o);var i=new Proxy(o.values,dc);if(o.proxy=i,e&&e.length){var a=Oo(!0);o.spliceWithArray(0,0,e),wo(a)}return i}var Nl=function(){function e(t,r,n){this.owned=n,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new Sr(t||"ObservableArray@"+St()),this.enhancer=function(o,i){return r(o,i,t+"[..]")}}return e.prototype.dehanceValue=function(t){return this.dehancer!==void 0?this.dehancer(t):t},e.prototype.dehanceValues=function(t){return this.dehancer!==void 0&&t.length>0?t.map(this.dehancer):t},e.prototype.intercept=function(t){return fn(this,t)},e.prototype.observe=function(t,r){return r===void 0&&(r=!1),r&&t({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),dn(this,t)},e.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},e.prototype.setArrayLength=function(t){if(typeof t!="number"||t<0)throw new Error("[mobx.array] Out of range: "+t);var r=this.values.length;if(t!==r)if(t>r){for(var n=new Array(t-r),o=0;o<t-r;o++)n[o]=void 0;this.spliceWithArray(r,0,n)}else this.spliceWithArray(t,r-t)},e.prototype.updateArrayLength=function(t,r){if(t!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=r},e.prototype.spliceWithArray=function(t,r,n){var o=this;fr(this.atom);var i=this.values.length;if(t===void 0?t=0:t>i?t=i:t<0&&(t=Math.max(0,i+t)),arguments.length===1?r=i-t:r==null?r=0:r=Math.max(0,Math.min(r,i-t)),n===void 0&&(n=Vn),ae(this)){var a=se(this,{object:this.proxy,type:"splice",index:t,removedCount:r,added:n});if(!a)return Vn;r=a.removedCount,n=a.added}n=n.length===0?n:n.map(function(u){return o.enhancer(u,void 0)});var s=this.spliceItemsIntoValues(t,r,n);return(r!==0||n.length!==0)&&this.notifyArraySplice(t,n,s),this.dehanceValues(s)},e.prototype.spliceItemsIntoValues=function(t,r,n){var o;if(n.length<fc)return(o=this.values).splice.apply(o,ua([t,r],n));var i=this.values.slice(t,t+r);return this.values=this.values.slice(0,t).concat(n,this.values.slice(t+r)),i},e.prototype.notifyArrayChildUpdate=function(t,r,n){var o=!this.owned&&wt(),i=kt(this),a=i||o?{object:this.proxy,type:"update",index:t,newValue:r,oldValue:n}:null;this.atom.reportChanged(),i&&Ut(this,a)},e.prototype.notifyArraySplice=function(t,r,n){var o=!this.owned&&wt(),i=kt(this),a=i||o?{object:this.proxy,type:"splice",index:t,removed:n,added:r,removedCount:n.length,addedCount:r.length}:null;this.atom.reportChanged(),i&&Ut(this,a)},e}(),de={intercept:function(e){return this[L].intercept(e)},observe:function(e,t){t===void 0&&(t=!1);var r=this[L];return r.observe(e,t)},clear:function(){return this.splice(0)},replace:function(e){var t=this[L];return t.spliceWithArray(0,t.values.length,e)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=this[L];switch(arguments.length){case 0:return[];case 1:return o.spliceWithArray(e);case 2:return o.spliceWithArray(e,t)}return o.spliceWithArray(e,t,r)},spliceWithArray:function(e,t,r){var n=this[L];return n.spliceWithArray(e,t,r)},push:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this[L];return r.spliceWithArray(r.values.length,0,e),r.values.length},pop:function(){return this.splice(Math.max(this[L].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this[L];return r.spliceWithArray(0,0,e),r.values.length},reverse:function(){var e=this.slice();return e.reverse.apply(e,arguments)},sort:function(e){var t=this.slice();return t.sort.apply(t,arguments)},remove:function(e){var t=this[L],r=t.dehanceValues(t.values).indexOf(e);return r>-1?(this.splice(r,1),!0):!1},get:function(e){var t=this[L];if(t){if(e<t.values.length)return t.atom.reportObserved(),t.dehanceValue(t.values[e]);console.warn("[mobx.array] Attempt to read an array index ("+e+") that is out of bounds ("+t.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},set:function(e,t){var r=this[L],n=r.values;if(e<n.length){fr(r.atom);var o=n[e];if(ae(r)){var i=se(r,{type:"update",object:r.proxy,index:e,newValue:t});if(!i)return;t=i.newValue}t=r.enhancer(t,o);var a=t!==o;a&&(n[e]=t,r.notifyArrayChildUpdate(e,t,o))}else if(e===n.length)r.spliceWithArray(e,0,[t]);else throw new Error("[mobx.array] Index out of bounds, "+e+" is larger than "+n.length)}};["concat","flat","includes","indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach(function(e){typeof Array.prototype[e]=="function"&&(de[e]=function(){var t=this[L];t.atom.reportObserved();var r=t.dehanceValues(t.values);return r[e].apply(r,arguments)})});["every","filter","find","findIndex","flatMap","forEach","map","some"].forEach(function(e){typeof Array.prototype[e]=="function"&&(de[e]=function(t,r){var n=this,o=this[L];o.atom.reportObserved();var i=o.dehanceValues(o.values);return i[e](function(a,s){return t.call(r,a,s,n)},r)})});["reduce","reduceRight"].forEach(function(e){de[e]=function(){var t=this,r=this[L];r.atom.reportObserved();var n=arguments[0];return arguments[0]=function(o,i,a){return i=r.dehanceValue(i),n(o,i,a,t)},r.values[e].apply(r.values,arguments)}});var pc=Me("ObservableArrayAdministration",Nl);function ue(e){return ia(e)&&pc(e[L])}var Ga,hc={},ca=function(){function e(t,r,n){if(r===void 0&&(r=ln),n===void 0&&(n="ObservableMap@"+St()),this.enhancer=r,this.name=n,this[Ga]=hc,this._keysAtom=sa(this.name+".keys()"),this[Symbol.toStringTag]="Map",typeof Map!="function")throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(t)}return e.prototype._has=function(t){return this._data.has(t)},e.prototype.has=function(t){var r=this;if(!D.trackingDerivation)return this._has(t);var n=this._hasMap.get(t);if(!n){var o=n=new Xe(this._has(t),Eo,this.name+"."+be(t)+"?",!1);this._hasMap.set(t,o),wl(o,function(){return r._hasMap.delete(t)})}return n.get()},e.prototype.set=function(t,r){var n=this._has(t);if(ae(this)){var o=se(this,{type:n?"update":"add",object:this,newValue:r,name:t});if(!o)return this;r=o.newValue}return n?this._updateValue(t,r):this._addValue(t,r),this},e.prototype.delete=function(t){var r=this;if(fr(this._keysAtom),ae(this)){var n=se(this,{type:"delete",object:this,name:t});if(!n)return!1}if(this._has(t)){var o=wt(),i=kt(this),n=i||o?{type:"delete",object:this,oldValue:this._data.get(t).value,name:t}:null;return Ht(function(){r._keysAtom.reportChanged(),r._updateHasMapEntry(t,!1);var s=r._data.get(t);s.setNewValue(void 0),r._data.delete(t)}),i&&Ut(this,n),!0}return!1},e.prototype._updateHasMapEntry=function(t,r){var n=this._hasMap.get(t);n&&n.setNewValue(r)},e.prototype._updateValue=function(t,r){var n=this._data.get(t);if(r=n.prepareNewValue(r),r!==D.UNCHANGED){var o=wt(),i=kt(this),a=i||o?{type:"update",object:this,oldValue:n.value,name:t,newValue:r}:null;n.setNewValue(r),i&&Ut(this,a)}},e.prototype._addValue=function(t,r){var n=this;fr(this._keysAtom),Ht(function(){var s=new Xe(r,n.enhancer,n.name+"."+be(t),!1);n._data.set(t,s),r=s.value,n._updateHasMapEntry(t,!0),n._keysAtom.reportChanged()});var o=wt(),i=kt(this),a=i||o?{type:"add",object:this,name:t,newValue:r}:null;i&&Ut(this,a)},e.prototype.get=function(t){return this.has(t)?this.dehanceValue(this._data.get(t).get()):this.dehanceValue(void 0)},e.prototype.dehanceValue=function(t){return this.dehancer!==void 0?this.dehancer(t):t},e.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},e.prototype.values=function(){var t=this,r=this.keys();return to({next:function(){var n=r.next(),o=n.done,i=n.value;return{done:o,value:o?void 0:t.get(i)}}})},e.prototype.entries=function(){var t=this,r=this.keys();return to({next:function(){var n=r.next(),o=n.done,i=n.value;return{done:o,value:o?void 0:[i,t.get(i)]}}})},e.prototype[Ga=L,Symbol.iterator]=function(){return this.entries()},e.prototype.forEach=function(t,r){var n,o;try{for(var i=ne(this),a=i.next();!a.done;a=i.next()){var s=tr(a.value,2),u=s[0],l=s[1];t.call(r,l,u,this)}}catch(d){n={error:d}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}},e.prototype.merge=function(t){var r=this;return At(t)&&(t=t.toJS()),Ht(function(){var n=Oo(!0);try{br(t)?al(t).forEach(function(o){return r.set(o,t[o])}):Array.isArray(t)?t.forEach(function(o){var i=tr(o,2),a=i[0],s=i[1];return r.set(a,s)}):wr(t)?(t.constructor!==Map&&W("Cannot initialize from classes that inherit from Map: "+t.constructor.name),t.forEach(function(o,i){return r.set(i,o)})):t!=null&&W("Cannot initialize map from "+t)}finally{wo(n)}}),this},e.prototype.clear=function(){var t=this;Ht(function(){cl(function(){var r,n;try{for(var o=ne(t.keys()),i=o.next();!i.done;i=o.next()){var a=i.value;t.delete(a)}}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}})})},e.prototype.replace=function(t){var r=this;return Ht(function(){var n,o,i,a,s=dd(t),u=new Map,l=!1;try{for(var d=ne(r._data.keys()),f=d.next();!f.done;f=d.next()){var c=f.value;if(!s.has(c)){var p=r.delete(c);if(p)l=!0;else{var v=r._data.get(c);u.set(c,v)}}}}catch(w){n={error:w}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}try{for(var h=ne(s.entries()),g=h.next();!g.done;g=h.next()){var y=tr(g.value,2),c=y[0],v=y[1],_=r._data.has(c);if(r.set(c,v),r._data.has(c)){var A=r._data.get(c);u.set(c,A),_||(l=!0)}}}catch(w){i={error:w}}finally{try{g&&!g.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}if(!l)if(r._data.size!==u.size)r._keysAtom.reportChanged();else for(var M=r._data.keys(),S=u.keys(),O=M.next(),m=S.next();!O.done;){if(O.value!==m.value){r._keysAtom.reportChanged();break}O=M.next(),m=S.next()}r._data=u}),this},Object.defineProperty(e.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),e.prototype.toPOJO=function(){var t,r,n={};try{for(var o=ne(this),i=o.next();!i.done;i=o.next()){var a=tr(i.value,2),s=a[0],u=a[1];n[typeof s=="symbol"?s:be(s)]=u}}catch(l){t={error:l}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return n},e.prototype.toJS=function(){return new Map(this)},e.prototype.toJSON=function(){return this.toPOJO()},e.prototype.toString=function(){var t=this;return this.name+"[{ "+Array.from(this.keys()).map(function(r){return be(r)+": "+(""+t.get(r))}).join(", ")+" }]"},e.prototype.observe=function(t,r){return dn(this,t)},e.prototype.intercept=function(t){return fn(this,t)},e}(),At=Me("ObservableMap",ca),za,vc={},Cl=function(){function e(t,r,n){if(r===void 0&&(r=ln),n===void 0&&(n="ObservableSet@"+St()),this.name=n,this[za]=vc,this._data=new Set,this._atom=sa(this.name),this[Symbol.toStringTag]="Set",typeof Set!="function")throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(o,i){return r(o,i,n)},t&&this.replace(t)}return e.prototype.dehanceValue=function(t){return this.dehancer!==void 0?this.dehancer(t):t},e.prototype.clear=function(){var t=this;Ht(function(){cl(function(){var r,n;try{for(var o=ne(t._data.values()),i=o.next();!i.done;i=o.next()){var a=i.value;t.delete(a)}}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}})})},e.prototype.forEach=function(t,r){var n,o;try{for(var i=ne(this),a=i.next();!a.done;a=i.next()){var s=a.value;t.call(r,s,s,this)}}catch(u){n={error:u}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}},Object.defineProperty(e.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),e.prototype.add=function(t){var r=this;if(fr(this._atom),ae(this)){var n=se(this,{type:"add",object:this,newValue:t});if(!n)return this}if(!this.has(t)){Ht(function(){r._data.add(r.enhancer(t,void 0)),r._atom.reportChanged()});var o=wt(),i=kt(this),n=i||o?{type:"add",object:this,newValue:t}:null;i&&Ut(this,n)}return this},e.prototype.delete=function(t){var r=this;if(ae(this)){var n=se(this,{type:"delete",object:this,oldValue:t});if(!n)return!1}if(this.has(t)){var o=wt(),i=kt(this),n=i||o?{type:"delete",object:this,oldValue:t}:null;return Ht(function(){r._atom.reportChanged(),r._data.delete(t)}),i&&Ut(this,n),!0}return!1},e.prototype.has=function(t){return this._atom.reportObserved(),this._data.has(this.dehanceValue(t))},e.prototype.entries=function(){var t=0,r=Array.from(this.keys()),n=Array.from(this.values());return to({next:function(){var o=t;return t+=1,o<n.length?{value:[r[o],n[o]],done:!1}:{done:!0}}})},e.prototype.keys=function(){return this.values()},e.prototype.values=function(){this._atom.reportObserved();var t=this,r=0,n=Array.from(this._data.values());return to({next:function(){return r<n.length?{value:t.dehanceValue(n[r++]),done:!1}:{done:!0}}})},e.prototype.replace=function(t){var r=this;return Ct(t)&&(t=t.toJS()),Ht(function(){var n=Oo(!0);try{Array.isArray(t)?(r.clear(),t.forEach(function(o){return r.add(o)})):un(t)?(r.clear(),t.forEach(function(o){return r.add(o)})):t!=null&&W("Cannot initialize set from "+t)}finally{wo(n)}}),this},e.prototype.observe=function(t,r){return dn(this,t)},e.prototype.intercept=function(t){return fn(this,t)},e.prototype.toJS=function(){return new Set(this)},e.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},e.prototype[za=L,Symbol.iterator]=function(){return this.values()},e}(),Ct=Me("ObservableSet",Cl),Rl=function(){function e(t,r,n,o){r===void 0&&(r=new Map),this.target=t,this.values=r,this.name=n,this.defaultEnhancer=o,this.keysAtom=new Sr(n+".keys")}return e.prototype.read=function(t){return this.values.get(t).get()},e.prototype.write=function(t,r){var n=this.target,o=this.values.get(t);if(o instanceof dr){o.set(r);return}if(ae(this)){var i=se(this,{type:"update",object:this.proxy||n,name:t,newValue:r});if(!i)return;r=i.newValue}if(r=o.prepareNewValue(r),r!==D.UNCHANGED){var a=kt(this),s=wt(),i=a||s?{type:"update",object:this.proxy||n,oldValue:o.value,name:t,newValue:r}:null;o.setNewValue(r),a&&Ut(this,i)}},e.prototype.has=function(t){var r=this.pendingKeys||(this.pendingKeys=new Map),n=r.get(t);if(n)return n.get();var o=!!this.values.get(t);return n=new Xe(o,Eo,this.name+"."+be(t)+"?",!1),r.set(t,n),n.get()},e.prototype.addObservableProp=function(t,r,n){n===void 0&&(n=this.defaultEnhancer);var o=this.target;if(ae(this)){var i=se(this,{object:this.proxy||o,name:t,type:"add",newValue:r});if(!i)return;r=i.newValue}var a=new Xe(r,n,this.name+"."+be(t),!1);this.values.set(t,a),r=a.value,Object.defineProperty(o,t,yc(t)),this.notifyPropertyAddition(t,r)},e.prototype.addComputedProp=function(t,r,n){var o=this.target;n.name=n.name||this.name+"."+be(r),this.values.set(r,new dr(n)),(t===o||pd(t,r))&&Object.defineProperty(t,r,gc(r))},e.prototype.remove=function(t){if(this.values.has(t)){var r=this.target;if(ae(this)){var n=se(this,{object:this.proxy||r,name:t,type:"remove"});if(!n)return}try{Gt();var o=kt(this),i=wt(),a=this.values.get(t),s=a&&a.get();if(a&&a.set(void 0),this.keysAtom.reportChanged(),this.values.delete(t),this.pendingKeys){var u=this.pendingKeys.get(t);u&&u.set(!1)}delete this.target[t];var n=o||i?{type:"remove",object:this.proxy||r,oldValue:s,name:t}:null;o&&Ut(this,n)}finally{zt()}}},e.prototype.illegalAccess=function(t,r){console.warn("Property '"+r+"' of '"+t+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},e.prototype.observe=function(t,r){return dn(this,t)},e.prototype.intercept=function(t){return fn(this,t)},e.prototype.notifyPropertyAddition=function(t,r){var n=kt(this),o=wt(),i=n||o?{type:"add",object:this.proxy||this.target,name:t,newValue:r}:null;if(n&&Ut(this,i),this.pendingKeys){var a=this.pendingKeys.get(t);a&&a.set(!0)}this.keysAtom.reportChanged()},e.prototype.getKeys=function(){var t,r;this.keysAtom.reportObserved();var n=[];try{for(var o=ne(this.values),i=o.next();!i.done;i=o.next()){var a=tr(i.value,2),s=a[0],u=a[1];u instanceof Xe&&n.push(s)}}catch(l){t={error:l}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return n},e}();function pa(e,t,r){if(t===void 0&&(t=""),r===void 0&&(r=ln),Object.prototype.hasOwnProperty.call(e,L))return e[L];br(e)||(t=(e.constructor.name||"ObservableObject")+"@"+St()),t||(t="ObservableObject@"+St());var n=new Rl(e,new Map,be(t),r);return Or(e,L,n),n}var ka=Object.create(null),Ua=Object.create(null);function yc(e){return ka[e]||(ka[e]={configurable:!0,enumerable:!0,get:function(){return this[L].read(e)},set:function(t){this[L].write(e,t)}})}function Va(e){var t=e[L];return t||(Ye(e),e[L])}function gc(e){return Ua[e]||(Ua[e]={configurable:D.computedConfigurable,enumerable:!1,get:function(){return Va(this).read(e)},set:function(t){Va(this).write(e,t)}})}var _c=Me("ObservableObjectAdministration",Rl);function Zt(e){return ia(e)?(Ye(e),_c(e[L])):!1}function Ae(e,t){if(typeof e=="object"&&e!==null){if(ue(e))return t!==void 0&&W(!1),e[L].atom;if(Ct(e))return e[L];if(At(e)){var r=e;if(t===void 0)return r._keysAtom;var n=r._data.get(t)||r._hasMap.get(t);return n||W(!1),n}if(Ye(e),t&&!e[L]&&e[t],Zt(e)){if(!t)return W(!1);var n=e[L].values.get(t);return n||W(!1),n}if(aa(e)||cr(e)||Qn(e))return e}else if(typeof e=="function"&&Qn(e[L]))return e[L];return W(!1)}function So(e,t){if(e||W("Expecting some object"),t!==void 0)return So(Ae(e,t));if(aa(e)||cr(e)||Qn(e)||At(e)||Ct(e))return e;if(Ye(e),e[L])return e[L];W(!1)}function mc(e,t){var r;return t!==void 0?r=Ae(e,t):Zt(e)||At(e)||Ct(e)?r=So(e):r=Ae(e),r.name}var Wa=Object.prototype.toString;function ha(e,t,r){return r===void 0&&(r=-1),_i(e,t,r)}function _i(e,t,r,n,o){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var i=typeof e;if(i!=="function"&&i!=="object"&&typeof t!="object")return!1;var a=Wa.call(e);if(a!==Wa.call(t))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":r>=0&&r++;break}e=Ka(e),t=Ka(t);var s=a==="[object Array]";if(!s){if(typeof e!="object"||typeof t!="object")return!1;var u=e.constructor,l=t.constructor;if(u!==l&&!(typeof u=="function"&&u instanceof u&&typeof l=="function"&&l instanceof l)&&"constructor"in e&&"constructor"in t)return!1}if(r===0)return!1;r<0&&(r=-1),n=n||[],o=o||[];for(var d=n.length;d--;)if(n[d]===e)return o[d]===t;if(n.push(e),o.push(t),s){if(d=e.length,d!==t.length)return!1;for(;d--;)if(!_i(e[d],t[d],r-1,n,o))return!1}else{var f=Object.keys(e),c=void 0;if(d=f.length,Object.keys(t).length!==d)return!1;for(;d--;)if(c=f[d],!(xc(t,c)&&_i(e[c],t[c],r-1,n,o)))return!1}return n.pop(),o.pop(),!0}function Ka(e){return ue(e)?e.slice():wr(e)||At(e)||un(e)||Ct(e)?Array.from(e.entries()):e}function xc(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function to(e){return e[Symbol.iterator]=Ec,e}function Ec(){return this}if(typeof Proxy>"u"||typeof Symbol>"u")throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");(function(){function e(){}if(e.name!=="testCodeMinification"&&!1)var t})();typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:Gd,extras:{getDebugName:mc},$mobx:L});function bc(e){return!(e.prototype&&e.prototype.render)&&!z.isPrototypeOf(e)}function jl(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.prefix,n=r===void 0?"":r,o=t.suffix,i=o===void 0?"":o,a=e.displayName||e.name||e.constructor&&e.constructor.name||"<component>";return n+a+i}var Za=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ll=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Il=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Bl=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},$l=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e},qa=console;function Oc(e){var t=vi().allowStateChanges;return vi().allowStateChanges=e,t}function wc(e){vi().allowStateChanges=e}function Sc(e,t,r,n,o){var i=Oc(e),a=void 0;try{a=t(r,n,o)}finally{wc(i)}return a}function Ja(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=e[t],o=Xl[t],i=n?r===!0?function(){o.apply(this,arguments),n.apply(this,arguments)}:function(){n.apply(this,arguments),o.apply(this,arguments)}:o;e[t]=i}function Qa(e,t){if(e==null||t==null||(typeof e>"u"?"undefined":Za(e))!=="object"||(typeof t>"u"?"undefined":Za(t))!=="object")return e!==t;var r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(var n=void 0,o=r.length-1;n=r[o];o--)if(t[n]!==e[n])return!0;return!1}var Xl={componentWillMount:function(){var t=this,r=jl(this),n=!1,o=!1;function i(f){var c=this[f],p=sa("reactive "+f);Object.defineProperty(this,f,{configurable:!0,enumerable:!0,get:function(){return p.reportObserved(),c},set:function(h){!o&&Qa(c,h)?(c=h,n=!0,p.reportChanged(),n=!1):c=h}})}i.call(this,"props"),i.call(this,"state");var a=this.render.bind(this),s=null,u=!1,l=function(){return s=new Zr(r+".render()",function(){if(!u&&(u=!0,typeof t.componentWillReact=="function"&&t.componentWillReact(),t.__$mobxIsUnmounted!==!0)){var c=!0;try{o=!0,n||z.prototype.forceUpdate.call(t),c=!1}finally{o=!1,c&&s.dispose()}}}),s.reactComponent=t,d.$mobx=s,t.render=d,d(t.props,t.state,t.context)},d=function(c,p,v){u=!1;var h=void 0,g=void 0;if(s.track(function(){try{g=Sc(!1,a,c,p,v)}catch(y){h=y}}),h)throw h;return g};this.render=l},componentWillUnmount:function(){this.render.$mobx&&this.render.$mobx.dispose(),this.__$mobxIsUnmounted=!0},componentDidMount:function(){},componentDidUpdate:function(){},shouldComponentUpdate:function(t,r){return this.state!==r?!0:Qa(this.props,t)}};function va(e){if(arguments.length>1&&qa.warn('Mobx observer: Using observer to inject stores is not supported. Use `@connect(["store1", "store2"]) ComponentClass instead or preferably, use `@inject("store1", "store2") @observer ComponentClass` or `inject("store1", "store2")(observer(componentClass))``'),e.isMobxInjector===!0&&qa.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),bc(e)){var t,r;return va((r=t=function(o){Bl(i,o);function i(){return Ll(this,i),$l(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return Il(i,[{key:"render",value:function(){return e.call(this,this.props,this.context)}}]),i}(z),t.displayName=jl(e),r))}if(!e)throw new Error("Please pass a valid component to 'observer'");var n=e.prototype||e;return Ac(n),e.isMobXReactObserver=!0,e}function Ac(e){Ja(e,"componentWillMount",!0),Ja(e,"componentDidMount"),e.shouldComponentUpdate||(e.shouldComponentUpdate=Xl.shouldComponentUpdate)}var Mc=va(function(e){var t=e.children;return t[0]()});Mc.displayName="Observer";var Tc=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pc(e,t){return t={exports:{}},e(t,t.exports),t.exports}Pc(function(e,t){(function(r,n){e.exports=n()})(Tc,function(){var r={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o=Object.defineProperty,i=Object.getOwnPropertyNames,a=Object.getOwnPropertySymbols,s=Object.getOwnPropertyDescriptor,u=Object.getPrototypeOf,l=u&&u(Object);return function d(f,c,p){if(typeof c!="string"){if(l){var v=u(c);v&&v!==l&&d(f,v,p)}var h=i(c);a&&(h=h.concat(a(c)));for(var g=0;g<h.length;++g){var y=h[g];if(!r[y]&&!n[y]&&(!p||!p[y])){var _=s(c,y);try{o(f,y,_)}catch{}}}return f}return f}})});var ts={children:!0,key:!0,ref:!0},es=console;(function(e){Bl(t,e);function t(){return Ll(this,t),$l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Il(t,[{key:"render",value:function(n){var o=n.children;return o.length>1?ar("div",null," ",o," "):o[0]}},{key:"getChildContext",value:function(){var n={},o=this.context.mobxStores;if(o)for(var i in o)n[i]=o[i];for(var a in this.props)!ts[a]&&a!=="suppressChangedStoreWarning"&&(n[a]=this.props[a]);return{mobxStores:n}}},{key:"componentWillReceiveProps",value:function(n){if(Object.keys(n).length!==Object.keys(this.props).length&&es.warn("MobX Provider: The set of provided stores has changed. Please avoid changing stores as the change might not propagate to all children"),!n.suppressChangedStoreWarning)for(var o in n)!ts[o]&&this.props[o]!==n[o]&&es.warn("MobX Provider: Provided store '"+o+"' has changed. Please avoid replacing stores as the change might not propagate to all children")}}]),t})(z);if(!z)throw new Error("mobx-preact requires Preact to be available");var ee,zo,rs,Hl=[],pt=H,ns=pt.__b,os=pt.__r,is=pt.diffed,as=pt.__c,ss=pt.unmount,us=pt.__;function Dc(){for(var e;e=Hl.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Gn),e.__H.__h.forEach(mi),e.__H.__h=[]}catch(t){e.__H.__h=[],pt.__e(t,e.__v)}}pt.__b=function(e){ee=null,ns&&ns(e)},pt.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),us&&us(e,t)},pt.__r=function(e){os&&os(e);var t=(ee=e.__c).__H;t&&(zo===ee?(t.__h=[],ee.__h=[],t.__.forEach(function(r){r.__N&&(r.__=r.__N),r.i=r.__N=void 0})):(t.__h.forEach(Gn),t.__h.forEach(mi),t.__h=[])),zo=ee},pt.diffed=function(e){is&&is(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Hl.push(t)!==1&&rs===pt.requestAnimationFrame||((rs=pt.requestAnimationFrame)||Nc)(Dc)),t.__H.__.forEach(function(r){r.i&&(r.__H=r.i),r.i=void 0})),zo=ee=null},pt.__c=function(e,t){t.some(function(r){try{r.__h.forEach(Gn),r.__h=r.__h.filter(function(n){return!n.__||mi(n)})}catch(n){t.some(function(o){o.__h&&(o.__h=[])}),t=[],pt.__e(n,r.__v)}}),as&&as(e,t)},pt.unmount=function(e){ss&&ss(e);var t,r=e.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{Gn(n)}catch(o){t=o}}),r.__H=void 0,t&&pt.__e(t,r.__v))};var ls=typeof requestAnimationFrame=="function";function Nc(e){var t,r=function(){clearTimeout(n),ls&&cancelAnimationFrame(t),setTimeout(e)},n=setTimeout(r,100);ls&&(t=requestAnimationFrame(r))}function Gn(e){var t=ee,r=e.__c;typeof r=="function"&&(e.__c=void 0,r()),ee=t}function mi(e){var t=ee;e.__c=e.__(),ee=t}function fs(e,t){for(var r in e)if(r!=="__source"&&!(r in t))return!0;for(var n in t)if(n!=="__source"&&e[n]!==t[n])return!0;return!1}function ds(e,t){this.props=e,this.context=t}(ds.prototype=new z).isPureReactComponent=!0,ds.prototype.shouldComponentUpdate=function(e,t){return fs(this.props,e)||fs(this.state,t)};var cs=H.__b;H.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),cs&&cs(e)};var Cc=H.__e;H.__e=function(e,t,r,n){if(e.then){for(var o,i=t;i=i.__;)if((o=i.__c)&&o.__c)return t.__e==null&&(t.__e=r.__e,t.__k=r.__k),o.__c(e,t)}Cc(e,t,r,n)};var ps=H.unmount;function Yl(e,t,r){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(n){typeof n.__c=="function"&&n.__c()}),e.__c.__H=null),(e=function(n,o){for(var i in o)n[i]=o[i];return n}({},e)).__c!=null&&(e.__c.__P===r&&(e.__c.__P=t),e.__c=null),e.__k=e.__k&&e.__k.map(function(n){return Yl(n,t,r)})),e}function Fl(e,t,r){return e&&r&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(n){return Fl(n,t,r)}),e.__c&&e.__c.__P===t&&(e.__e&&r.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=r)),e}function ko(){this.__u=0,this.t=null,this.__b=null}function Gl(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function bn(){this.u=null,this.o=null}H.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),ps&&ps(e)},(ko.prototype=new z).__c=function(e,t){var r=t.__c,n=this;n.t==null&&(n.t=[]),n.t.push(r);var o=Gl(n.__v),i=!1,a=function(){i||(i=!0,r.__R=null,o?o(s):s())};r.__R=a;var s=function(){if(!--n.__u){if(n.state.__a){var u=n.state.__a;n.__v.__k[0]=Fl(u,u.__c.__P,u.__c.__O)}var l;for(n.setState({__a:n.__b=null});l=n.t.pop();)l.forceUpdate()}};n.__u++||32&t.__u||n.setState({__a:n.__b=n.__v.__k[0]}),e.then(a,a)},ko.prototype.componentWillUnmount=function(){this.t=[]},ko.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var r=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=Yl(this.__b,r,n.__O=n.__P)}this.__b=null}var o=t.__a&&ar(sr,null,e.fallback);return o&&(o.__u&=-33),[ar(sr,null,t.__a?null:e.children),o]};var hs=function(e,t,r){if(++r[1]===r[0]&&e.o.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.o.size))for(r=e.u;r;){for(;r.length>3;)r.pop()();if(r[1]<r[0])break;e.u=r=r[2]}};(bn.prototype=new z).__a=function(e){var t=this,r=Gl(t.__v),n=t.o.get(e);return n[0]++,function(o){var i=function(){t.props.revealOrder?(n.push(o),hs(t,e,n)):o()};r?r(i):i()}},bn.prototype.render=function(e){this.u=null,this.o=new Map;var t=Un(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var r=t.length;r--;)this.o.set(t[r],this.u=[1,0,this.u]);return e.children},bn.prototype.componentDidUpdate=bn.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(t,r){hs(e,r,t)})};var Rc=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,jc=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Lc=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Ic=/[A-Z0-9]/g,Bc=typeof document<"u",$c=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};function Xc(e,t,r){return t.__k==null&&(t.textContent=""),sd(e,t),typeof r=="function"&&r(),e?e.__c:null}z.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(z.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var vs=H.event;function Hc(){}function Yc(){return this.cancelBubble}function Fc(){return this.defaultPrevented}H.event=function(e){return vs&&(e=vs(e)),e.persist=Hc,e.isPropagationStopped=Yc,e.isDefaultPrevented=Fc,e.nativeEvent=e};var Gc={enumerable:!1,configurable:!0,get:function(){return this.class}},ys=H.vnode;H.vnode=function(e){typeof e.type=="string"&&function(t){var r=t.props,n=t.type,o={},i=n.indexOf("-")===-1;for(var a in r){var s=r[a];if(!(a==="value"&&"defaultValue"in r&&s==null||Bc&&a==="children"&&n==="noscript"||a==="class"||a==="className")){var u=a.toLowerCase();a==="defaultValue"&&"value"in r&&r.value==null?a="value":a==="download"&&s===!0?s="":u==="translate"&&s==="no"?s=!1:u[0]==="o"&&u[1]==="n"?u==="ondoubleclick"?a="ondblclick":u!=="onchange"||n!=="input"&&n!=="textarea"||$c(r.type)?u==="onfocus"?a="onfocusin":u==="onblur"?a="onfocusout":Lc.test(a)&&(a=u):u=a="oninput":i&&jc.test(a)?a=a.replace(Ic,"-$&").toLowerCase():s===null&&(s=void 0),u==="oninput"&&o[a=u]&&(a="oninputCapture"),o[a]=s}}n=="select"&&o.multiple&&Array.isArray(o.value)&&(o.value=Un(r.children).forEach(function(l){l.props.selected=o.value.indexOf(l.props.value)!=-1})),n=="select"&&o.defaultValue!=null&&(o.value=Un(r.children).forEach(function(l){l.props.selected=o.multiple?o.defaultValue.indexOf(l.props.value)!=-1:o.defaultValue==l.props.value})),r.class&&!r.className?(o.class=r.class,Object.defineProperty(o,"className",Gc)):(r.className&&!r.class||r.class&&r.className)&&(o.class=o.className=r.className),t.props=o}(e),e.$$typeof=Rc,ys&&ys(e)};var gs=H.__r;H.__r=function(e){gs&&gs(e),e.__c};var _s=H.diffed;H.diffed=function(e){_s&&_s(e);var t=e.props,r=e.__e;r!=null&&e.type==="textarea"&&"value"in t&&t.value!==r.value&&(r.value=t.value==null?"":t.value)};var zc=0;function E(e,t,r,n,o,i){t||(t={});var a,s,u=t;"ref"in t&&(a=t.ref,delete t.ref);var l={type:e,props:u,key:r,ref:a,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--zc,__i:-1,__u:0,__source:o,__self:i};if(typeof e=="function"&&(a=e.defaultProps))for(s in a)u[s]===void 0&&(u[s]=a[s]);return H.vnode&&H.vnode(l),l}var zl=typeof global=="object"&&global&&global.Object===Object&&global,kc=typeof self=="object"&&self&&self.Object===Object&&self,qt=zl||kc||Function("return this")(),Rt=qt.Symbol,kl=Object.prototype,Uc=kl.hasOwnProperty,Vc=kl.toString,Pr=Rt?Rt.toStringTag:void 0;function Wc(e){var t=Uc.call(e,Pr),r=e[Pr];try{e[Pr]=void 0;var n=!0}catch{}var o=Vc.call(e);return n&&(t?e[Pr]=r:delete e[Pr]),o}var Kc=Object.prototype,Zc=Kc.toString;function qc(e){return Zc.call(e)}var Jc="[object Null]",Qc="[object Undefined]",ms=Rt?Rt.toStringTag:void 0;function Te(e){return e==null?e===void 0?Qc:Jc:ms&&ms in Object(e)?Wc(e):qc(e)}function Kt(e){return e!=null&&typeof e=="object"}var tp="[object Symbol]";function Ao(e){return typeof e=="symbol"||Kt(e)&&Te(e)==tp}function ya(e,t){for(var r=-1,n=e==null?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}var ct=Array.isArray,ep=1/0,xs=Rt?Rt.prototype:void 0,Es=xs?xs.toString:void 0;function Ul(e){if(typeof e=="string")return e;if(ct(e))return ya(e,Ul)+"";if(Ao(e))return Es?Es.call(e):"";var t=e+"";return t=="0"&&1/e==-ep?"-0":t}var rp=/\s/;function np(e){for(var t=e.length;t--&&rp.test(e.charAt(t)););return t}var op=/^\s+/;function ip(e){return e&&e.slice(0,np(e)+1).replace(op,"")}function bt(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var bs=NaN,ap=/^[-+]0x[0-9a-f]+$/i,sp=/^0b[01]+$/i,up=/^0o[0-7]+$/i,lp=parseInt;function xi(e){if(typeof e=="number")return e;if(Ao(e))return bs;if(bt(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=bt(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=ip(e);var r=sp.test(e);return r||up.test(e)?lp(e.slice(2),r?2:8):ap.test(e)?bs:+e}var Os=1/0,fp=17976931348623157e292;function dp(e){if(!e)return e===0?e:0;if(e=xi(e),e===Os||e===-Os){var t=e<0?-1:1;return t*fp}return e===e?e:0}function cp(e){var t=dp(e),r=t%1;return t===t?r?t-r:t:0}function Mo(e){return e}var pp="[object AsyncFunction]",hp="[object Function]",vp="[object GeneratorFunction]",yp="[object Proxy]";function ga(e){if(!bt(e))return!1;var t=Te(e);return t==hp||t==vp||t==pp||t==yp}var Uo=qt["__core-js_shared__"],ws=function(){var e=/[^.]+$/.exec(Uo&&Uo.keys&&Uo.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function gp(e){return!!ws&&ws in e}var _p=Function.prototype,mp=_p.toString;function ke(e){if(e!=null){try{return mp.call(e)}catch{}try{return e+""}catch{}}return""}var xp=/[\\^$.*+?()[\]{}|]/g,Ep=/^\[object .+?Constructor\]$/,bp=Function.prototype,Op=Object.prototype,wp=bp.toString,Sp=Op.hasOwnProperty,Ap=RegExp("^"+wp.call(Sp).replace(xp,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Mp(e){if(!bt(e)||gp(e))return!1;var t=ga(e)?Ap:Ep;return t.test(ke(e))}function Tp(e,t){return e==null?void 0:e[t]}function Ue(e,t){var r=Tp(e,t);return Mp(r)?r:void 0}var Ei=Ue(qt,"WeakMap"),Ss=Object.create,Pp=function(){function e(){}return function(t){if(!bt(t))return{};if(Ss)return Ss(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function Dp(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function Vo(){}function Vl(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var Np=800,Cp=16,Rp=Date.now;function jp(e){var t=0,r=0;return function(){var n=Rp(),o=Cp-(n-r);if(r=n,o>0){if(++t>=Np)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function Lp(e){return function(){return e}}var eo=function(){try{var e=Ue(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Ip=eo?function(e,t){return eo(e,"toString",{configurable:!0,enumerable:!1,value:Lp(t),writable:!0})}:Mo,Wl=jp(Ip);function Kl(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}function Zl(e,t,r,n){for(var o=e.length,i=r+-1;++i<o;)if(t(e[i],i,e))return i;return-1}function Bp(e){return e!==e}function $p(e,t,r){for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}function Xp(e,t,r){return t===t?$p(e,t,r):Zl(e,Bp,r)}var Hp=9007199254740991,Yp=/^(?:0|[1-9]\d*)$/;function To(e,t){var r=typeof e;return t=t??Hp,!!t&&(r=="number"||r!="symbol"&&Yp.test(e))&&e>-1&&e%1==0&&e<t}function Po(e,t,r){t=="__proto__"&&eo?eo(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function cn(e,t){return e===t||e!==e&&t!==t}var Fp=Object.prototype,Gp=Fp.hasOwnProperty;function Do(e,t,r){var n=e[t];(!(Gp.call(e,t)&&cn(n,r))||r===void 0&&!(t in e))&&Po(e,t,r)}function Mr(e,t,r,n){var o=!r;r||(r={});for(var i=-1,a=t.length;++i<a;){var s=t[i],u=void 0;u===void 0&&(u=e[s]),o?Po(r,s,u):Do(r,s,u)}return r}var As=Math.max;function ql(e,t,r){return t=As(t===void 0?e.length-1:t,0),function(){for(var n=arguments,o=-1,i=As(n.length-t,0),a=Array(i);++o<i;)a[o]=n[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=n[o];return s[t]=r(a),Dp(e,this,s)}}function zp(e,t){return Wl(ql(e,t,Mo),e+"")}var kp=9007199254740991;function _a(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=kp}function pe(e){return e!=null&&_a(e.length)&&!ga(e)}function Up(e,t,r){if(!bt(r))return!1;var n=typeof t;return(n=="number"?pe(r)&&To(t,r.length):n=="string"&&t in r)?cn(r[t],e):!1}function Jl(e){return zp(function(t,r){var n=-1,o=r.length,i=o>1?r[o-1]:void 0,a=o>2?r[2]:void 0;for(i=e.length>3&&typeof i=="function"?(o--,i):void 0,a&&Up(r[0],r[1],a)&&(i=o<3?void 0:i,o=1),t=Object(t);++n<o;){var s=r[n];s&&e(t,s,n,i)}return t})}var Vp=Object.prototype;function pn(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Vp;return e===r}function Wp(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var Kp="[object Arguments]";function Ms(e){return Kt(e)&&Te(e)==Kp}var Ql=Object.prototype,Zp=Ql.hasOwnProperty,qp=Ql.propertyIsEnumerable,vr=Ms(function(){return arguments}())?Ms:function(e){return Kt(e)&&Zp.call(e,"callee")&&!qp.call(e,"callee")};function Jp(){return!1}var tf=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ts=tf&&typeof module=="object"&&module&&!module.nodeType&&module,Qp=Ts&&Ts.exports===tf,Ps=Qp?qt.Buffer:void 0,th=Ps?Ps.isBuffer:void 0,yr=th||Jp,eh="[object Arguments]",rh="[object Array]",nh="[object Boolean]",oh="[object Date]",ih="[object Error]",ah="[object Function]",sh="[object Map]",uh="[object Number]",lh="[object Object]",fh="[object RegExp]",dh="[object Set]",ch="[object String]",ph="[object WeakMap]",hh="[object ArrayBuffer]",vh="[object DataView]",yh="[object Float32Array]",gh="[object Float64Array]",_h="[object Int8Array]",mh="[object Int16Array]",xh="[object Int32Array]",Eh="[object Uint8Array]",bh="[object Uint8ClampedArray]",Oh="[object Uint16Array]",wh="[object Uint32Array]",it={};it[yh]=it[gh]=it[_h]=it[mh]=it[xh]=it[Eh]=it[bh]=it[Oh]=it[wh]=!0;it[eh]=it[rh]=it[hh]=it[nh]=it[vh]=it[oh]=it[ih]=it[ah]=it[sh]=it[uh]=it[lh]=it[fh]=it[dh]=it[ch]=it[ph]=!1;function Sh(e){return Kt(e)&&_a(e.length)&&!!it[Te(e)]}function ma(e){return function(t){return e(t)}}var ef=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Br=ef&&typeof module=="object"&&module&&!module.nodeType&&module,Ah=Br&&Br.exports===ef,Wo=Ah&&zl.process,gr=function(){try{var e=Br&&Br.require&&Br.require("util").types;return e||Wo&&Wo.binding&&Wo.binding("util")}catch{}}(),Ds=gr&&gr.isTypedArray,No=Ds?ma(Ds):Sh,Mh=Object.prototype,Th=Mh.hasOwnProperty;function rf(e,t){var r=ct(e),n=!r&&vr(e),o=!r&&!n&&yr(e),i=!r&&!n&&!o&&No(e),a=r||n||o||i,s=a?Wp(e.length,String):[],u=s.length;for(var l in e)(t||Th.call(e,l))&&!(a&&(l=="length"||o&&(l=="offset"||l=="parent")||i&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||To(l,u)))&&s.push(l);return s}function nf(e,t){return function(r){return e(t(r))}}var Ph=nf(Object.keys,Object),Dh=Object.prototype,Nh=Dh.hasOwnProperty;function of(e){if(!pn(e))return Ph(e);var t=[];for(var r in Object(e))Nh.call(e,r)&&r!="constructor"&&t.push(r);return t}function Pe(e){return pe(e)?rf(e):of(e)}var Ch=Object.prototype,Rh=Ch.hasOwnProperty,tt=Jl(function(e,t){if(pn(t)||pe(t)){Mr(t,Pe(t),e);return}for(var r in t)Rh.call(t,r)&&Do(e,r,t[r])});function jh(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var Lh=Object.prototype,Ih=Lh.hasOwnProperty;function Bh(e){if(!bt(e))return jh(e);var t=pn(e),r=[];for(var n in e)n=="constructor"&&(t||!Ih.call(e,n))||r.push(n);return r}function hn(e){return pe(e)?rf(e,!0):Bh(e)}var $h=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Xh=/^\w*$/;function xa(e,t){if(ct(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||Ao(e)?!0:Xh.test(e)||!$h.test(e)||t!=null&&e in Object(t)}var qr=Ue(Object,"create");function Hh(){this.__data__=qr?qr(null):{},this.size=0}function Yh(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Fh="__lodash_hash_undefined__",Gh=Object.prototype,zh=Gh.hasOwnProperty;function kh(e){var t=this.__data__;if(qr){var r=t[e];return r===Fh?void 0:r}return zh.call(t,e)?t[e]:void 0}var Uh=Object.prototype,Vh=Uh.hasOwnProperty;function Wh(e){var t=this.__data__;return qr?t[e]!==void 0:Vh.call(t,e)}var Kh="__lodash_hash_undefined__";function Zh(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=qr&&t===void 0?Kh:t,this}function Fe(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Fe.prototype.clear=Hh;Fe.prototype.delete=Yh;Fe.prototype.get=kh;Fe.prototype.has=Wh;Fe.prototype.set=Zh;function qh(){this.__data__=[],this.size=0}function Co(e,t){for(var r=e.length;r--;)if(cn(e[r][0],t))return r;return-1}var Jh=Array.prototype,Qh=Jh.splice;function tv(e){var t=this.__data__,r=Co(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Qh.call(t,r,1),--this.size,!0}function ev(e){var t=this.__data__,r=Co(t,e);return r<0?void 0:t[r][1]}function rv(e){return Co(this.__data__,e)>-1}function nv(e,t){var r=this.__data__,n=Co(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function he(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}he.prototype.clear=qh;he.prototype.delete=tv;he.prototype.get=ev;he.prototype.has=rv;he.prototype.set=nv;var Jr=Ue(qt,"Map");function ov(){this.size=0,this.__data__={hash:new Fe,map:new(Jr||he),string:new Fe}}function iv(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Ro(e,t){var r=e.__data__;return iv(t)?r[typeof t=="string"?"string":"hash"]:r.map}function av(e){var t=Ro(this,e).delete(e);return this.size-=t?1:0,t}function sv(e){return Ro(this,e).get(e)}function uv(e){return Ro(this,e).has(e)}function lv(e,t){var r=Ro(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function ve(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ve.prototype.clear=ov;ve.prototype.delete=av;ve.prototype.get=sv;ve.prototype.has=uv;ve.prototype.set=lv;var fv="Expected a function";function Ea(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(fv);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(Ea.Cache||ve),r}Ea.Cache=ve;var dv=500;function cv(e){var t=Ea(e,function(n){return r.size===dv&&r.clear(),n}),r=t.cache;return t}var pv=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,hv=/\\(\\)?/g,vv=cv(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(pv,function(r,n,o,i){t.push(o?i.replace(hv,"$1"):n||r)}),t});function yv(e){return e==null?"":Ul(e)}function jo(e,t){return ct(e)?e:xa(e,t)?[e]:vv(yv(e))}var gv=1/0;function vn(e){if(typeof e=="string"||Ao(e))return e;var t=e+"";return t=="0"&&1/e==-gv?"-0":t}function ba(e,t){t=jo(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[vn(t[r++])];return r&&r==n?e:void 0}function Oa(e,t,r){var n=e==null?void 0:ba(e,t);return n===void 0?r:n}function wa(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}var Ns=Rt?Rt.isConcatSpreadable:void 0;function _v(e){return ct(e)||vr(e)||!!(Ns&&e&&e[Ns])}function mv(e,t,r,n,o){var i=-1,a=e.length;for(r||(r=_v),o||(o=[]);++i<a;){var s=e[i];r(s)?wa(o,s):o[o.length]=s}return o}function xv(e){var t=e==null?0:e.length;return t?mv(e):[]}function Ev(e){return Wl(ql(e,void 0,xv),e+"")}var Sa=nf(Object.getPrototypeOf,Object),bv="[object Object]",Ov=Function.prototype,wv=Object.prototype,af=Ov.toString,Sv=wv.hasOwnProperty,Av=af.call(Object);function Mv(e){if(!Kt(e)||Te(e)!=bv)return!1;var t=Sa(e);if(t===null)return!0;var r=Sv.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&af.call(r)==Av}function Tv(e,t,r,n){var o=-1,i=e==null?0:e.length;for(n&&i&&(r=e[++o]);++o<i;)r=t(r,e[o],o,e);return r}function Pv(){this.__data__=new he,this.size=0}function Dv(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function Nv(e){return this.__data__.get(e)}function Cv(e){return this.__data__.has(e)}var Rv=200;function jv(e,t){var r=this.__data__;if(r instanceof he){var n=r.__data__;if(!Jr||n.length<Rv-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new ve(n)}return r.set(e,t),this.size=r.size,this}function Vt(e){var t=this.__data__=new he(e);this.size=t.size}Vt.prototype.clear=Pv;Vt.prototype.delete=Dv;Vt.prototype.get=Nv;Vt.prototype.has=Cv;Vt.prototype.set=jv;function Lv(e,t){return e&&Mr(t,Pe(t),e)}function Iv(e,t){return e&&Mr(t,hn(t),e)}var sf=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Cs=sf&&typeof module=="object"&&module&&!module.nodeType&&module,Bv=Cs&&Cs.exports===sf,Rs=Bv?qt.Buffer:void 0,js=Rs?Rs.allocUnsafe:void 0;function uf(e,t){if(t)return e.slice();var r=e.length,n=js?js(r):new e.constructor(r);return e.copy(n),n}function $v(e,t){for(var r=-1,n=e==null?0:e.length,o=0,i=[];++r<n;){var a=e[r];t(a,r,e)&&(i[o++]=a)}return i}function lf(){return[]}var Xv=Object.prototype,Hv=Xv.propertyIsEnumerable,Ls=Object.getOwnPropertySymbols,Aa=Ls?function(e){return e==null?[]:(e=Object(e),$v(Ls(e),function(t){return Hv.call(e,t)}))}:lf;function Yv(e,t){return Mr(e,Aa(e),t)}var Fv=Object.getOwnPropertySymbols,ff=Fv?function(e){for(var t=[];e;)wa(t,Aa(e)),e=Sa(e);return t}:lf;function Gv(e,t){return Mr(e,ff(e),t)}function df(e,t,r){var n=t(e);return ct(e)?n:wa(n,r(e))}function bi(e){return df(e,Pe,Aa)}function zv(e){return df(e,hn,ff)}var Oi=Ue(qt,"DataView"),wi=Ue(qt,"Promise"),Si=Ue(qt,"Set"),Is="[object Map]",kv="[object Object]",Bs="[object Promise]",$s="[object Set]",Xs="[object WeakMap]",Hs="[object DataView]",Uv=ke(Oi),Vv=ke(Jr),Wv=ke(wi),Kv=ke(Si),Zv=ke(Ei),Tt=Te;(Oi&&Tt(new Oi(new ArrayBuffer(1)))!=Hs||Jr&&Tt(new Jr)!=Is||wi&&Tt(wi.resolve())!=Bs||Si&&Tt(new Si)!=$s||Ei&&Tt(new Ei)!=Xs)&&(Tt=function(e){var t=Te(e),r=t==kv?e.constructor:void 0,n=r?ke(r):"";if(n)switch(n){case Uv:return Hs;case Vv:return Is;case Wv:return Bs;case Kv:return $s;case Zv:return Xs}return t});var qv=Object.prototype,Jv=qv.hasOwnProperty;function Qv(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&Jv.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var ro=qt.Uint8Array;function Ma(e){var t=new e.constructor(e.byteLength);return new ro(t).set(new ro(e)),t}function ty(e,t){var r=t?Ma(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var ey=/\w*$/;function ry(e){var t=new e.constructor(e.source,ey.exec(e));return t.lastIndex=e.lastIndex,t}var Ys=Rt?Rt.prototype:void 0,Fs=Ys?Ys.valueOf:void 0;function ny(e){return Fs?Object(Fs.call(e)):{}}function cf(e,t){var r=t?Ma(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var oy="[object Boolean]",iy="[object Date]",ay="[object Map]",sy="[object Number]",uy="[object RegExp]",ly="[object Set]",fy="[object String]",dy="[object Symbol]",cy="[object ArrayBuffer]",py="[object DataView]",hy="[object Float32Array]",vy="[object Float64Array]",yy="[object Int8Array]",gy="[object Int16Array]",_y="[object Int32Array]",my="[object Uint8Array]",xy="[object Uint8ClampedArray]",Ey="[object Uint16Array]",by="[object Uint32Array]";function Oy(e,t,r){var n=e.constructor;switch(t){case cy:return Ma(e);case oy:case iy:return new n(+e);case py:return ty(e,r);case hy:case vy:case yy:case gy:case _y:case my:case xy:case Ey:case by:return cf(e,r);case ay:return new n;case sy:case fy:return new n(e);case uy:return ry(e);case ly:return new n;case dy:return ny(e)}}function pf(e){return typeof e.constructor=="function"&&!pn(e)?Pp(Sa(e)):{}}var wy="[object Map]";function Sy(e){return Kt(e)&&Tt(e)==wy}var Gs=gr&&gr.isMap,Ay=Gs?ma(Gs):Sy,My="[object Set]";function Ty(e){return Kt(e)&&Tt(e)==My}var zs=gr&&gr.isSet,Py=zs?ma(zs):Ty,Dy=1,Ny=2,Cy=4,hf="[object Arguments]",Ry="[object Array]",jy="[object Boolean]",Ly="[object Date]",Iy="[object Error]",vf="[object Function]",By="[object GeneratorFunction]",$y="[object Map]",Xy="[object Number]",yf="[object Object]",Hy="[object RegExp]",Yy="[object Set]",Fy="[object String]",Gy="[object Symbol]",zy="[object WeakMap]",ky="[object ArrayBuffer]",Uy="[object DataView]",Vy="[object Float32Array]",Wy="[object Float64Array]",Ky="[object Int8Array]",Zy="[object Int16Array]",qy="[object Int32Array]",Jy="[object Uint8Array]",Qy="[object Uint8ClampedArray]",tg="[object Uint16Array]",eg="[object Uint32Array]",nt={};nt[hf]=nt[Ry]=nt[ky]=nt[Uy]=nt[jy]=nt[Ly]=nt[Vy]=nt[Wy]=nt[Ky]=nt[Zy]=nt[qy]=nt[$y]=nt[Xy]=nt[yf]=nt[Hy]=nt[Yy]=nt[Fy]=nt[Gy]=nt[Jy]=nt[Qy]=nt[tg]=nt[eg]=!0;nt[Iy]=nt[vf]=nt[zy]=!1;function zn(e,t,r,n,o,i){var a,s=t&Dy,u=t&Ny,l=t&Cy;if(a!==void 0)return a;if(!bt(e))return e;var d=ct(e);if(d){if(a=Qv(e),!s)return Vl(e,a)}else{var f=Tt(e),c=f==vf||f==By;if(yr(e))return uf(e,s);if(f==yf||f==hf||c&&!o){if(a=u||c?{}:pf(e),!s)return u?Gv(e,Iv(a,e)):Yv(e,Lv(a,e))}else{if(!nt[f])return o?e:{};a=Oy(e,f,s)}}i||(i=new Vt);var p=i.get(e);if(p)return p;i.set(e,a),Py(e)?e.forEach(function(g){a.add(zn(g,t,r,g,e,i))}):Ay(e)&&e.forEach(function(g,y){a.set(y,zn(g,t,r,y,e,i))});var v=l?u?zv:bi:u?hn:Pe,h=d?void 0:v(e);return Kl(h||e,function(g,y){h&&(y=g,g=e[y]),Do(a,y,zn(g,t,r,y,e,i))}),a}var rg=1,ng=4;function $(e){return zn(e,rg|ng)}var og="__lodash_hash_undefined__";function ig(e){return this.__data__.set(e,og),this}function ag(e){return this.__data__.has(e)}function no(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new ve;++t<r;)this.add(e[t])}no.prototype.add=no.prototype.push=ig;no.prototype.has=ag;function sg(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function ug(e,t){return e.has(t)}var lg=1,fg=2;function gf(e,t,r,n,o,i){var a=r&lg,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var l=i.get(e),d=i.get(t);if(l&&d)return l==t&&d==e;var f=-1,c=!0,p=r&fg?new no:void 0;for(i.set(e,t),i.set(t,e);++f<s;){var v=e[f],h=t[f];if(n)var g=a?n(h,v,f,t,e,i):n(v,h,f,e,t,i);if(g!==void 0){if(g)continue;c=!1;break}if(p){if(!sg(t,function(y,_){if(!ug(p,_)&&(v===y||o(v,y,r,n,i)))return p.push(_)})){c=!1;break}}else if(!(v===h||o(v,h,r,n,i))){c=!1;break}}return i.delete(e),i.delete(t),c}function _f(e){var t=-1,r=Array(e.size);return e.forEach(function(n,o){r[++t]=[o,n]}),r}function dg(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var cg=1,pg=2,hg="[object Boolean]",vg="[object Date]",yg="[object Error]",gg="[object Map]",_g="[object Number]",mg="[object RegExp]",xg="[object Set]",Eg="[object String]",bg="[object Symbol]",Og="[object ArrayBuffer]",wg="[object DataView]",ks=Rt?Rt.prototype:void 0,Ko=ks?ks.valueOf:void 0;function Sg(e,t,r,n,o,i,a){switch(r){case wg:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Og:return!(e.byteLength!=t.byteLength||!i(new ro(e),new ro(t)));case hg:case vg:case _g:return cn(+e,+t);case yg:return e.name==t.name&&e.message==t.message;case mg:case Eg:return e==t+"";case gg:var s=_f;case xg:var u=n&cg;if(s||(s=dg),e.size!=t.size&&!u)return!1;var l=a.get(e);if(l)return l==t;n|=pg,a.set(e,t);var d=gf(s(e),s(t),n,o,i,a);return a.delete(e),d;case bg:if(Ko)return Ko.call(e)==Ko.call(t)}return!1}var Ag=1,Mg=Object.prototype,Tg=Mg.hasOwnProperty;function Pg(e,t,r,n,o,i){var a=r&Ag,s=bi(e),u=s.length,l=bi(t),d=l.length;if(u!=d&&!a)return!1;for(var f=u;f--;){var c=s[f];if(!(a?c in t:Tg.call(t,c)))return!1}var p=i.get(e),v=i.get(t);if(p&&v)return p==t&&v==e;var h=!0;i.set(e,t),i.set(t,e);for(var g=a;++f<u;){c=s[f];var y=e[c],_=t[c];if(n)var A=a?n(_,y,c,t,e,i):n(y,_,c,e,t,i);if(!(A===void 0?y===_||o(y,_,r,n,i):A)){h=!1;break}g||(g=c=="constructor")}if(h&&!g){var M=e.constructor,S=t.constructor;M!=S&&"constructor"in e&&"constructor"in t&&!(typeof M=="function"&&M instanceof M&&typeof S=="function"&&S instanceof S)&&(h=!1)}return i.delete(e),i.delete(t),h}var Dg=1,Us="[object Arguments]",Vs="[object Array]",On="[object Object]",Ng=Object.prototype,Ws=Ng.hasOwnProperty;function Cg(e,t,r,n,o,i){var a=ct(e),s=ct(t),u=a?Vs:Tt(e),l=s?Vs:Tt(t);u=u==Us?On:u,l=l==Us?On:l;var d=u==On,f=l==On,c=u==l;if(c&&yr(e)){if(!yr(t))return!1;a=!0,d=!1}if(c&&!d)return i||(i=new Vt),a||No(e)?gf(e,t,r,n,o,i):Sg(e,t,u,r,n,o,i);if(!(r&Dg)){var p=d&&Ws.call(e,"__wrapped__"),v=f&&Ws.call(t,"__wrapped__");if(p||v){var h=p?e.value():e,g=v?t.value():t;return i||(i=new Vt),o(h,g,r,n,i)}}return c?(i||(i=new Vt),Pg(e,t,r,n,o,i)):!1}function Lo(e,t,r,n,o){return e===t?!0:e==null||t==null||!Kt(e)&&!Kt(t)?e!==e&&t!==t:Cg(e,t,r,n,Lo,o)}var Rg=1,jg=2;function Lg(e,t,r,n){var o=r.length,i=o;if(e==null)return!i;for(e=Object(e);o--;){var a=r[o];if(a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++o<i;){a=r[o];var s=a[0],u=e[s],l=a[1];if(a[2]){if(u===void 0&&!(s in e))return!1}else{var d=new Vt,f;if(!(f===void 0?Lo(l,u,Rg|jg,n,d):f))return!1}}return!0}function mf(e){return e===e&&!bt(e)}function Ig(e){for(var t=Pe(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,mf(o)]}return t}function xf(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}function Bg(e){var t=Ig(e);return t.length==1&&t[0][2]?xf(t[0][0],t[0][1]):function(r){return r===e||Lg(r,e,t)}}function $g(e,t){return e!=null&&t in Object(e)}function Ef(e,t,r){t=jo(t,e);for(var n=-1,o=t.length,i=!1;++n<o;){var a=vn(t[n]);if(!(i=e!=null&&r(e,a)))break;e=e[a]}return i||++n!=o?i:(o=e==null?0:e.length,!!o&&_a(o)&&To(a,o)&&(ct(e)||vr(e)))}function bf(e,t){return e!=null&&Ef(e,t,$g)}var Xg=1,Hg=2;function Yg(e,t){return xa(e)&&mf(t)?xf(vn(e),t):function(r){var n=Oa(r,e);return n===void 0&&n===t?bf(r,e):Lo(t,n,Xg|Hg)}}function Fg(e){return function(t){return t==null?void 0:t[e]}}function Gg(e){return function(t){return ba(t,e)}}function zg(e){return xa(e)?Fg(vn(e)):Gg(e)}function yn(e){return typeof e=="function"?e:e==null?Mo:typeof e=="object"?ct(e)?Yg(e[0],e[1]):Bg(e):zg(e)}function kg(e){return function(t,r,n){for(var o=-1,i=Object(t),a=n(t),s=a.length;s--;){var u=a[++o];if(r(i[u],u,i)===!1)break}return t}}var Of=kg();function wf(e,t){return e&&Of(e,t,Pe)}function Ug(e,t){return function(r,n){if(r==null)return r;if(!pe(r))return e(r,n);for(var o=r.length,i=-1,a=Object(r);++i<o&&n(a[i],i,a)!==!1;);return r}}var Ta=Ug(wf),Zo=function(){return qt.Date.now()},Vg="Expected a function",Wg=Math.max,Kg=Math.min;function Sf(e,t,r){var n,o,i,a,s,u,l=0,d=!1,f=!1,c=!0;if(typeof e!="function")throw new TypeError(Vg);t=xi(t)||0,bt(r)&&(d=!!r.leading,f="maxWait"in r,i=f?Wg(xi(r.maxWait)||0,t):i,c="trailing"in r?!!r.trailing:c);function p(O){var m=n,w=o;return n=o=void 0,l=O,a=e.apply(w,m),a}function v(O){return l=O,s=setTimeout(y,t),d?p(O):a}function h(O){var m=O-u,w=O-l,P=t-m;return f?Kg(P,i-w):P}function g(O){var m=O-u,w=O-l;return u===void 0||m>=t||m<0||f&&w>=i}function y(){var O=Zo();if(g(O))return _(O);s=setTimeout(y,h(O))}function _(O){return s=void 0,c&&n?p(O):(n=o=void 0,a)}function A(){s!==void 0&&clearTimeout(s),l=0,n=u=o=s=void 0}function M(){return s===void 0?a:_(Zo())}function S(){var O=Zo(),m=g(O);if(n=arguments,o=this,u=O,m){if(s===void 0)return v(u);if(f)return clearTimeout(s),s=setTimeout(y,t),p(u)}return s===void 0&&(s=setTimeout(y,t)),a}return S.cancel=A,S.flush=M,S}function Ai(e,t,r){(r!==void 0&&!cn(e[t],r)||r===void 0&&!(t in e))&&Po(e,t,r)}function Zg(e){return Kt(e)&&pe(e)}function Mi(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function qg(e){return Mr(e,hn(e))}function Jg(e,t,r,n,o,i,a){var s=Mi(e,r),u=Mi(t,r),l=a.get(u);if(l){Ai(e,r,l);return}var d=i?i(s,u,r+"",e,t,a):void 0,f=d===void 0;if(f){var c=ct(u),p=!c&&yr(u),v=!c&&!p&&No(u);d=u,c||p||v?ct(s)?d=s:Zg(s)?d=Vl(s):p?(f=!1,d=uf(u,!0)):v?(f=!1,d=cf(u,!0)):d=[]:Mv(u)||vr(u)?(d=s,vr(s)?d=qg(s):(!bt(s)||ga(s))&&(d=pf(u))):f=!1}f&&(a.set(u,d),o(d,u,n,i,a),a.delete(u)),Ai(e,r,d)}function Af(e,t,r,n,o){e!==t&&Of(t,function(i,a){if(o||(o=new Vt),bt(i))Jg(e,t,a,r,Af,n,o);else{var s=n?n(Mi(e,a),i,a+"",e,t,o):void 0;s===void 0&&(s=i),Ai(e,a,s)}},hn)}function Qg(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}function t_(e){return typeof e=="function"?e:Mo}function st(e,t){var r=ct(e)?Kl:Ta;return r(e,t_(t))}function e_(e,t){return ya(t,function(r){return[r,e[r]]})}function r_(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=[n,n]}),r}var n_="[object Map]",o_="[object Set]";function i_(e){return function(t){var r=Tt(t);return r==n_?_f(t):r==o_?r_(t):e_(t,e(t))}}var De=i_(Pe);function a_(e){return function(t,r,n){var o=Object(t);if(!pe(t)){var i=yn(r);t=Pe(t),r=function(s){return i(o[s],s,o)}}var a=e(t,r,n);return a>-1?o[i?t[a]:a]:void 0}}var s_=Math.max;function u_(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var o=r==null?0:cp(r);return o<0&&(o=s_(n+o,0)),Zl(e,yn(t),o)}var Ge=a_(u_);function l_(e,t){var r=-1,n=pe(e)?Array(e.length):[];return Ta(e,function(o,i,a){n[++r]=t(o,i,a)}),n}function ce(e,t){var r=ct(e)?ya:l_;return r(e,yn(t))}var f_=Object.prototype,d_=f_.hasOwnProperty;function c_(e,t){return e!=null&&d_.call(e,t)}function Ks(e,t){return e!=null&&Ef(e,t,c_)}function p_(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var o=0;return Xp(e,t,o)}var h_="[object Boolean]";function v_(e){return e===!0||e===!1||Kt(e)&&Te(e)==h_}var y_="[object Map]",g_="[object Set]",__=Object.prototype,m_=__.hasOwnProperty;function Mf(e){if(e==null)return!0;if(pe(e)&&(ct(e)||typeof e=="string"||typeof e.splice=="function"||yr(e)||No(e)||vr(e)))return!e.length;var t=Tt(e);if(t==y_||t==g_)return!e.size;if(pn(e))return!of(e).length;for(var r in e)if(m_.call(e,r))return!1;return!0}function Zs(e,t){return Lo(e,t)}function ir(e){return e==null}function _r(e){return e===void 0}function x_(e,t){var r={};return t=yn(t),wf(e,function(n,o,i){Po(r,t(n,o,i),n)}),r}var Tf=Jl(function(e,t,r){Af(e,t,r)});function Pf(e,t,r,n){if(!bt(e))return e;t=jo(t,e);for(var o=-1,i=t.length,a=i-1,s=e;s!=null&&++o<i;){var u=vn(t[o]),l=r;if(u==="__proto__"||u==="constructor"||u==="prototype")return e;if(o!=a){var d=s[u];l=void 0,l===void 0&&(l=bt(d)?d:To(t[o+1])?[]:{})}Do(s,u,l),s=s[u]}return e}function E_(e,t,r){for(var n=-1,o=t.length,i={};++n<o;){var a=t[n],s=ba(e,a);r(s,a)&&Pf(i,jo(a,e),s)}return i}function b_(e,t){return E_(e,t,function(r,n){return bf(e,n)})}var er=Ev(function(e,t){return e==null?{}:b_(e,t)});function O_(e,t,r,n,o){return o(e,function(i,a,s){r=n?(n=!1,i):t(r,i,a,s)}),r}function w_(e,t,r){var n=ct(e)?Tv:O_,o=arguments.length<3;return n(e,yn(t),r,o,Ta)}function S_(e,t,r){return e==null?e:Pf(e,t,r)}var A_="Expected a function";function M_(e,t,r){var n=!0,o=!0;if(typeof e!="function")throw new TypeError(A_);return bt(r)&&(n="leading"in r?!!r.leading:n,o="trailing"in r?!!r.trailing:o),Sf(e,t,{leading:n,maxWait:t,trailing:o})}var T_=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r},Qr;(function(e){function t(r){var n=T_(r,[]),o=r.container;if(!o)throw new Error("Ensure the container of LogicFlow is specified and valid.");return tt({},e.defaults,n)}e.get=t})(Qr||(Qr={}));(function(e){e.defaults={background:!1,grid:!1,textEdit:!0,snapline:!0,outline:!1,disabledTools:[]}})(Qr||(Qr={}));var qs={node:!1,edge:!1},P_={node:!0,edge:!0},D_=function(e){return!e||typeof e=="boolean"?$(e===!0?P_:qs):Tf($(qs),e)},N_=function(){return Oa(window,"navigator.userAgent","").match(/MSIE|Trident/)!==null};function _t(e){try{return JSON.parse(JSON.stringify(e))}catch{return e}}var wn=200,C_=9999,R_=10,V;(function(e){e[e.DEFAULT=1]="DEFAULT",e[e.TEXT_EDIT=2]="TEXT_EDIT",e[e.SHOW_MENU=3]="SHOW_MENU",e[e.ALLOW_CONNECT=4]="ALLOW_CONNECT",e[e.NOT_ALLOW_CONNECT=5]="NOT_ALLOW_CONNECT"})(V||(V={}));var at;(function(e){e.NODE="node",e.EDGE="edge",e.GRAPH="graph"})(at||(at={}));var Y;(function(e){e.NODE="node",e.CIRCLE_NODE="circle-node",e.POLYGON_NODE="polygon-node",e.RECT_NODE="rect-node",e.TEXT_NODE="text-node",e.ELLIPSE_NODE="ellipse-node",e.DIAMOND_NODE="diamond-node",e.HTML_NODE="html-node",e.CUSTOM_HTML_NODE="custom-html-node",e.EDGE="edge",e.LINE_EDGE="line-edge",e.POLYLINE_EDGE="polyline-edge",e.BEZIER_EDGE="bezier-edge",e.GRAPH="graph"})(Y||(Y={}));var C;(function(e){e.ELEMENT_CLICK="element:click",e.NODE_ADD="node:add",e.NODE_DELETE="node:delete",e.NODE_CLICK="node:click",e.NODE_DBCLICK="node:dbclick",e.NODE_GROUP_COPY="node:group-copy-add",e.NODE_DND_ADD="node:dnd-add",e.NODE_DND_DRAG="node:dnd-drag",e.NODE_MOUSEDOWN="node:mousedown",e.NODE_DRAGSTART="node:dragstart",e.NODE_DRAG="node:drag",e.NODE_DROP="node:drop",e.NODE_MOUSEUP="node:mouseup",e.NODE_MOUSEMOVE="node:mousemove",e.NODE_MOUSEENTER="node:mouseenter",e.NODE_MOUSELEAVE="node:mouseleave",e.NODE_CONTEXTMENU="node:contextmenu",e.NODE_ROTATE="node:rotate",e.NODE_RESIZE="node:resize",e.NODE_PROPERTIES_CHANGE="node:properties-change",e.NODE_PROPERTIES_DELETE="node:properties-delete",e.EDGE_ADD="edge:add",e.EDGE_DELETE="edge:delete",e.EDGE_CLICK="edge:click",e.EDGE_DBCLICK="edge:dbclick",e.EDGE_MOUSEENTER="edge:mouseenter",e.EDGE_MOUSELEAVE="edge:mouseleave",e.EDGE_CONTEXTMENU="edge:contextmenu",e.EDGE_ADJUST="edge:adjust",e.EDGE_EXCHANGE_NODE="edge:exchange-node",e.ANCHOR_DRAGSTART="anchor:dragstart",e.ANCHOR_DRAG="anchor:drag",e.ANCHOR_DROP="anchor:drop",e.ANCHOR_DRAGEND="anchor:dragend",e.ADJUST_POINT_MOUSEDOWN="adjustPoint:mousedown",e.ADJUST_POINT_MOUSEUP="adjustPoint:mouseup",e.ADJUST_POINT_MOUSEMOVE="adjustPoint:mousemove",e.ADJUST_POINT_DRAGSTART="adjustPoint:dragstart",e.ADJUST_POINT_DRAG="adjustPoint:drag",e.ADJUST_POINT_DROP="adjustPoint:drop",e.ADJUST_POINT_DRAGEND="adjustPoint:dragend",e.BLANK_MOUSEDOWN="blank:mousedown",e.BLANK_DRAGSTART="blank:dragstart",e.BLANK_DRAG="blank:drag",e.BLANK_DROP="blank:drop",e.BLANK_MOUSEMOVE="blank:mousemove",e.BLANK_MOUSEUP="blank:mouseup",e.BLANK_CLICK="blank:click",e.BLANK_CONTEXTMENU="blank:contextmenu",e.SELECTION_MOUSEDOWN="selection:mousedown",e.SELECTION_DRAGSTART="selection:dragstart",e.SELECTION_DRAG="selection:drag",e.SELECTION_DROP="selection:drop",e.SELECTION_MOUSEMOVE="selection:mousemove",e.SELECTION_MOUSEUP="selection:mouseup",e.SELECTION_CONTEXTMENU="selection:contextmenu",e.CONNECTION_NOT_ALLOWED="connection:not-allowed",e.TEXT_MOUSEDOWN="text:mousedown",e.TEXT_DRAGSTART="text:dragstart",e.TEXT_DRAG="text:drag",e.TEXT_DROP="text:drop",e.TEXT_CLICK="text:click",e.TEXT_DBCLICK="text:dbclick",e.TEXT_BLUR="text:blur",e.TEXT_MOUSEMOVE="text:mousemove",e.TEXT_MOUSEUP="text:mouseup",e.TEXT_FOCUS="text:focus",e.TEXT_ADD="text:add",e.TEXT_UPDATE="text:update",e.TEXT_CLEAR="text:clear",e.LABEL_MOUSEDOWN="label:mousedown",e.LABEL_DRAGSTART="label:dragstart",e.LABEL_DRAG="label:drag",e.LABEL_DROP="label:drop",e.LABEL_CLICK="label:click",e.LABEL_DBCLICK="label:dbclick",e.LABEL_BLUR="label:blur",e.LABEL_MOUSEMOVE="label:mousemove",e.LABEL_MOUSEUP="label:mouseup",e.LABEL_FOCUS="label:focus",e.LABEL_ADD="label:add",e.LABEL_UPDATE="label:update",e.LABEL_CLEAR="label:clear",e.LABEL_DELETE="label:delete",e.LABEL_SHOULD_ADD="label:should-add",e.LABEL_BATCH_ADD="label:batch-add",e.LABEL_SHOULD_UPDATE="label:should-update",e.LABEL_SHOULD_DELETE="label:should-delete",e.LABEL_BATCH_DELETE="label:batch-delete",e.LABEL_NOT_ALLOWED_ADD="label:not-allowed-add",e.HISTORY_CHANGE="history:change",e.GRAPH_TRANSFORM="graph:transform",e.GRAPH_RENDERED="graph:rendered",e.GRAPH_UPDATED="graph:updated"})(C||(C={}));var Yt;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.INCREASE=1]="INCREASE"})(Yt||(Yt={}));var ot;(function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"})(ot||(ot={}));var Wt;(function(e){e.TEXT="text",e.LABEL="label"})(Wt||(Wt={}));var j_=0,le=function(){function e(t){var r=t.onDragStart,n=r===void 0?Vo:r,o=t.onDragging,i=o===void 0?Vo:o,a=t.onDragEnd,s=a===void 0?Vo:a,u=t.eventType,l=u===void 0?"":u,d=t.eventCenter,f=t.step,c=f===void 0?1:f,p=t.isStopPropagation,v=p===void 0?!0:p,h=t.model,g=t.data,y=this;this.isDragging=!1,this.isStartDragging=!1,this.startX=0,this.startY=0,this.sumDeltaX=0,this.sumDeltaY=0,this.handleMouseDown=function(_){var A,M,S=window==null?void 0:window.document;if(_.button===j_){y.isStopPropagation&&_.stopPropagation(),y.isStartDragging=!0,y.startX=_.clientX,y.startY=_.clientY,S.addEventListener("mousemove",y.handleMouseMove,!1),S.addEventListener("mouseup",y.handleMouseUp,!1);var O=(A=y.model)===null||A===void 0?void 0:A.getData();(M=y.eventCenter)===null||M===void 0||M.emit(C["".concat(y.eventType,"_MOUSEDOWN")],{e:_,data:y.data||O}),y.startTime=new Date().getTime()}},this.handleMouseMove=function(_){var A,M;if(y.isStopPropagation&&_.stopPropagation(),!!y.isStartDragging&&(y.sumDeltaX+=_.clientX-y.startX,y.sumDeltaY+=_.clientY-y.startY,y.startX=_.clientX,y.startY=_.clientY,y.step<=1||Math.abs(y.sumDeltaX)>y.step||Math.abs(y.sumDeltaY)>y.step)){var S=y.sumDeltaX%y.step,O=y.sumDeltaY%y.step,m=y.sumDeltaX-S,w=y.sumDeltaY-O;y.sumDeltaX=S,y.sumDeltaY=O;var P=(A=y.model)===null||A===void 0?void 0:A.getData();y.isDragging||((M=y.eventCenter)===null||M===void 0||M.emit(C["".concat(y.eventType,"_DRAGSTART")],{e:_,data:y.data||P}),y.onDragStart({event:_})),y.isDragging=!0,Promise.resolve().then(function(){var T,X;y.onDragging({deltaX:m,deltaY:w,event:_}),(T=y.eventCenter)===null||T===void 0||T.emit(C["".concat(y.eventType,"_MOUSEMOVE")],{deltaX:m,deltaY:w,e:_,data:y.data||P}),(X=y.eventCenter)===null||X===void 0||X.emit(C["".concat(y.eventType,"_DRAG")],{e:_,data:y.data||P})})}},this.handleMouseUp=function(_){var A=window.document;y.isStartDragging=!1,y.isStopPropagation&&_.stopPropagation(),Promise.resolve().then(function(){var M,S,O;A.removeEventListener("mousemove",y.handleMouseMove,!1),A.removeEventListener("mouseup",y.handleMouseUp,!1);var m=(M=y.model)===null||M===void 0?void 0:M.getData();(S=y.eventCenter)===null||S===void 0||S.emit(C["".concat(y.eventType,"_MOUSEUP")],{e:_,data:y.data||m}),y.isDragging&&(y.isDragging=!1,y.onDragEnd({event:_}),(O=y.eventCenter)===null||O===void 0||O.emit(C["".concat(y.eventType,"_DROP")],{e:_,data:y.data||m}))})},this.cancelDrag=function(){var _=window==null?void 0:window.document;_.removeEventListener("mousemove",y.handleMouseMove,!1),_.removeEventListener("mouseup",y.handleMouseUp,!1),y.onDragEnd({event:void 0}),y.isDragging=!1},this.onDragStart=n,this.onDragging=i,this.onDragEnd=s,this.step=c,this.isStopPropagation=v,this.eventType=l,this.eventCenter=d,this.model=h,this.data=g}return e.prototype.setStep=function(t){this.step=t},e.prototype.setModel=function(t){this.model=t},e}(),L_=function(e){var t=e.x,r=e.y,n=e.width,o=e.height;return{x:t-n/2,y:r-o/2,x1:t+n/2,y1:r+o/2}},I_=function(e){var t=e.startPoint,r=e.endPoint,n=(t.x+r.x)/2,o=(t.y+r.y)/2,i=Math.abs(t.x-r.x)+10,a=Math.abs(t.y-r.y)+10;return{x:n-i/2,y:o-a/2,x1:n+i/2,y1:o+a/2}},B_=function(e){var t=e.points,r=ze(t),n=rn(r,8),o=n.x,i=n.y,a=n.width,s=n.height;return{x:o-a/2,y:i-s/2,x1:o+a/2,y1:i+s/2}},$_=function(e){var t=e.path,r=Pa(t),n=rn(r,8),o=n.x,i=n.y,a=n.width,s=n.height;return{x:o-a/2,y:i-s/2,x1:o+a/2,y1:i+s/2}},X_=function(e){if(e.modelType===Y.LINE_EDGE)return I_(e);if(e.modelType===Y.POLYLINE_EDGE)return B_(e);if(e.modelType===Y.BEZIER_EDGE)return $_(e)},H_=function(e,t,r,n){var o=(t.y-e.y)*(n.x-r.x)-(e.x-t.x)*(r.y-n.y);if(o===0)return!1;var i=((t.x-e.x)*(n.x-r.x)*(r.y-e.y)+(t.y-e.y)*(n.x-r.x)*e.x-(n.y-r.y)*(t.x-e.x)*r.x)/o,a=-((t.y-e.y)*(n.y-r.y)*(r.x-e.x)+(t.x-e.x)*(n.y-r.y)*e.y-(n.x-r.x)*(t.y-e.y)*r.y)/o;return(i-e.x)*(i-t.x)<=0&&(a-e.y)*(a-t.y)<=0&&(i-r.x)*(i-n.x)<=0&&(a-r.y)*(a-n.y)<=0?{x:i,y:a}:!1},tn=function(e,t,r){var n=e.x,o=e.y,i=t.x,a=t.y,s=r.x,u=r.y,l=(u-a)/(s-i),d=a-l*i;return n>=i&&n<=s&&o>=a&&o<=u&&Math.abs(o-l*n+d)<Number.EPSILON},en=function(e){var t=e.start,r=e.end,n=e.offset,o=e.verticalLength,i=e.type,a={leftX:0,leftY:0,rightX:0,rightY:0},s=Math.atan((r.y-t.y)/(r.x-t.x)),u=Math.atan(n/o),l=Math.sqrt(o*o+n*n);return i==="start"?r.x>=t.x?(a.leftX=t.x+l*Math.sin(s+u),a.leftY=t.y-l*Math.cos(s+u),a.rightX=t.x-l*Math.sin(s-u),a.rightY=t.y+l*Math.cos(s-u)):(a.leftX=t.x-l*Math.sin(s+u),a.leftY=t.y+l*Math.cos(s+u),a.rightX=t.x+l*Math.sin(s-u),a.rightY=t.y-l*Math.cos(s-u)):i==="end"&&(r.x>=t.x?(a.leftX=r.x+l*Math.sin(s-u),a.leftY=r.y-l*Math.cos(s-u),a.rightX=r.x-l*Math.sin(s+u),a.rightY=r.y+l*Math.cos(s+u)):(a.leftX=r.x-l*Math.sin(s-u),a.leftY=r.y+l*Math.cos(s-u),a.rightX=r.x+l*Math.sin(s+u),a.rightY=r.y-l*Math.cos(s+u))),a},rr=function(){return rr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},rr.apply(this,arguments)},Nt=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},Oe=function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},Y_=function(e,t){return Math.abs(e.centerX-t.centerX)*2<e.width+t.width&&Math.abs(e.centerY-t.centerY)*2<e.height+t.height},Ti=function(e){var t=[],r={};return e.forEach(function(n){var o="".concat(n.x,"-").concat(n.y);n.id=o,r[o]=n}),Object.keys(r).forEach(function(n){t.push(r[n])}),t},oo=function(e,t){return e.width===0&&e.height===0?e:{x:e.x,y:e.y,centerX:e.centerX,centerY:e.centerY,minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,height:e.height+2*t,width:e.width+2*t}},F_=function(e,t){var r=Math.abs(e.x-t.centerX),n=Math.abs(e.y-t.centerY);return r/t.width>n/t.height?ot.HORIZONTAL:ot.VERTICAL},io=function(e,t,r){var n=F_(r,t);return n===ot.HORIZONTAL?{x:r.x>e.centerX?e.maxX:e.minX,y:r.y}:{x:r.x,y:r.y>e.centerY?e.maxY:e.minY}},Js=function(e,t){var r=Math.min(e.minX,t.minX),n=Math.min(e.minY,t.minY),o=Math.max(e.maxX,t.maxX),i=Math.max(e.maxY,t.maxY);return{x:(r+o)/2,y:(n+i)/2,centerX:(r+o)/2,centerY:(n+i)/2,minX:r,minY:n,maxX:o,maxY:i,height:i-n,width:o-r}},rn=function(e,t){e===void 0&&(e=[]);var r=[],n=[];e.forEach(function(d){r.push(d.x),n.push(d.y)});var o=Math.min.apply(Math,Oe([],Nt(r),!1)),i=Math.max.apply(Math,Oe([],Nt(r),!1)),a=Math.min.apply(Math,Oe([],Nt(n),!1)),s=Math.max.apply(Math,Oe([],Nt(n),!1)),u=i-o,l=s-a;return t&&(u+=t,l+=t),{centerX:(o+i)/2,centerY:(a+s)/2,maxX:i,maxY:s,minX:o,minY:a,x:(o+i)/2,y:(a+s)/2,height:l,width:u}},ao=function(e){var t=e.minX,r=e.minY,n=e.maxX,o=e.maxY;return[{x:t,y:r},{x:n,y:r},{x:n,y:o},{x:t,y:o}]},Sn=function(e,t){var r=e.x,n=e.y;return r<t.minX||r>t.maxX||n<t.minY||n>t.maxY},G_=function(e,t){return t<e.minX||t>e.maxX?[]:[{x:t,y:e.minY},{x:t,y:e.maxY}]},z_=function(e,t){return t<e.minY||t>e.maxY?[]:[{x:e.minX,y:t},{x:e.maxX,y:t}]},k_=function(e,t){return Oe(Oe([],Nt(G_(e,t.x)),!1),Nt(z_(e,t.y)),!1)},Pi=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},U_=function(e,t){var r=-2,n=0;return t.forEach(function(o){o&&(e.x===o.x&&(n+=r),e.y===o.y&&(n+=r))}),n},Qs=function(e,t,r,n,o){return Pi(e,t)+Pi(e,r)+U_(e,[t,r,n,o])},Df=function(e,t,r,n,o){o||(o=0),e.unshift(t[n]),r[n]&&r[n]!==n&&o<=100&&Df(e,t,r,r[n],o+1)},V_=function(e,t){var r=e.indexOf(t);r>-1&&e.splice(r,1)},jr=function(e,t,r,n){var o=t.x-e.x,i=t.y-e.y,a=n.x-r.x,s=n.y-r.y,u=(-i*(e.x-r.x)+o*(e.y-r.y))/(-a*i+o*s),l=(a*(e.y-r.y)-s*(e.x-r.x))/(-a*i+o*s);return u>=0&&u<=1&&l>=0&&l<=1},tu=function(e,t,r){if(r.width===0&&r.height===0)return!1;var n=Nt(ao(r),4),o=n[0],i=n[1],a=n[2],s=n[3];return jr(e,t,o,i)||jr(e,t,o,s)||jr(e,t,i,a)||jr(e,t,a,s)},W_=function(e,t,r,n){var o=[];return e.forEach(function(i){i!==t&&(i.x===t.x||i.y===t.y)&&!tu(i,t,r)&&!tu(i,t,n)&&o.push(i)}),Ti(o)},K_=function(e,t,r,n,o,i,a){var s=[],u=[t],l={},d={},f={};t.id&&(d[t.id]=0,f[t.id]=Qs(t,r,t));var c={};e.forEach(function(h){h.id&&(c[h.id]=h)});for(var p=function(){var h,g=1/0;if(u.forEach(function(_){_.id&&f[_.id]<g&&(g=f[_.id],h=_)}),h===r&&r.id){var y=[];return Df(y,c,l,r.id),{value:y}}if(!h)return{value:[t,r]};V_(u,h),s.push(h),W_(e,h,n,o).forEach(function(_){if(s.indexOf(_)===-1&&(u.indexOf(_)===-1&&u.push(_),h!=null&&h.id&&(_!=null&&_.id))){var A=f[h.id]+Pi(h,_);if(d[_.id]&&A>=d[_.id])return;l[_.id]=h.id,d[_.id]=A,f[_.id]=d[_.id]+Qs(_,r,t,i,a)}})};u.length;){var v=p();if(typeof v=="object")return v.value}return[t,r]},eu=function(e){return Ot(e)},Nf=function(e){for(var t=1;t<e.length-1;){var r=e[t-1],n=e[t],o=e[t+1];r.x===n.x&&n.x===o.x||r.y===n.y&&n.y===o.y?e.splice(t,1):t++}return e},ru=function(e,t,r,n,o){var i=eu(r),a=eu(n),s=oo(i,o),u=oo(a,o),l=io(s,i,e),d=io(u,a,t);if(Y_(s,u)){var f=q_(e,t,l,d);return Oe(Oe([e,l],Nt(f),!1),[d,t],!1)}var c=rn([l,d]),p=Js(s,c),v=Js(u,c),h=[];h=h.concat(ao(p)),h=h.concat(ao(v));var g={x:(e.x+t.x)/2,y:(e.y+t.y)/2};[c,p,v].forEach(function(_){h=h.concat(k_(_,g).filter(function(A){return Sn(A,s)&&Sn(A,u)}))}),[{x:l.x,y:d.y},{x:d.x,y:l.y}].forEach(function(_){Sn(_,s)&&Sn(_,u)&&h.push(_)}),h.unshift(l),h.push(d),h=Ti(h);var y=K_(h,l,d,i,a,e,t);return y.unshift(e),y.push(t),y.length>2&&(y=Nf(y)),Ti(y)},Z_=function(e){if(e.length===1){var t=Nt(e,1),r=t[0];return[r,r]}else{for(var n=e[0],o=e[1],i=Ft(n.x,n.y,o.x,o.y),a=1;a<e.length-1;a++){var s=e[a],u=e[a+1],l=Ft(s.x,s.y,u.x,u.y);l>i&&(i=l,n=s,o=u)}return[n,o]}},nu=function(e,t,r){var n=we(e,r),o=we(t,r);return n&&o},ou=function(e,t,r){var n=we(e,r),o=we(t,r),i=n&&o,a=n||o;return!i&&a},iu=function(e,t,r){for(var n=void 0,o=Ot(r),i=ao(o),a=0;a<i.length;a++){var s=jr(e,t,i[a],i[(a+1)%i.length]);s&&(n=[i[a],i[(a+1)%i.length]])}if(n)return H_(e,t,n[0],n[1])},so=function(e,t){var r=void 0;return e.x===t.x?r=ot.VERTICAL:e.y===t.y&&(r=ot.HORIZONTAL),r},ze=function(e){var t=e.split(" "),r=[];return t&&t.forEach(function(n){var o=Nt(n.split(","),2),i=o[0],a=o[1];r.push({x:Number(i),y:Number(a)})}),r},q_=function(e,t,r,n){var o=[],i=so(e,r),a=so(t,n);if(i===a)e.y===r.y?(o.push({x:r.x,y:(r.y+n.y)/2}),o.push({x:n.x,y:(r.y+n.y)/2})):(o.push({x:(r.x+n.x)/2,y:r.y}),o.push({x:(r.x+n.x)/2,y:n.y}));else{var s={x:r.x,y:n.y},u=tn(s,e,r),l=tn(s,t,n);if(u||l)s={x:n.x,y:r.y};else{var d=au(s,e,r),f=au(s,t,n);d&&f&&(s={x:n.x,y:r.y})}o.push(s)}return o},au=function(e,t,r){return e.x===t.x&&e.x===r.x||e.y===t.y&&e.y===r.y},Cf=function(e){if(!e)return 0;for(var t=0,r=0;r<e.length;r++){var n=e.charCodeAt(r);e.match(/[A-Z]/)?t+=1.5:n>=1&&n<=126||n>=65376&&n<=65439?t+=1:t+=2}return t},J_=function(e){var t=e.start,r=e.end,n;if(t.x===r.x&&t.y===r.y)n="";else{var o={start:t,end:r,offset:10,verticalLength:5},i=en(rr(rr({},o),{type:"start"})),a=en(rr(rr({},o),{type:"end"}));n="M".concat(i.leftX," ").concat(i.leftY,`
    L`).concat(i.rightX," ").concat(i.rightY,`
    L`).concat(a.rightX," ").concat(a.rightY,`
    L`).concat(a.leftX," ").concat(a.leftY," z")}return{d:n,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}},su=function(e){var t=e.start,r=e.end,n=e.sourceNode,o=e.targetNode,i=e.offset,a=Ot(n),s=Ot(o),u=oo(a,i),l=oo(s,i),d=io(u,a,t),f=io(l,s,r);return{sNext:d,ePre:f}},Pa=function(e){var t=e.replace(/M/g,"").replace(/C/g,",").split(","),r=An(t[0]),n=An(t[1]),o=An(t[2]),i=An(t[3]);return[r,n,o,i]},An=function(e){var t=Nt(e.replace(/(^\s*)/g,"").split(" "),2),r=t[0],n=t[1];return{x:+r,y:+n}},uu=function(e,t){var r=Nt(e,4),n=r[0],o=r[1],i=r[2],a=r[3],s=Im(n,o,i,a,t);return[s,e[3]]},Rf=function(e,t){for(var r=e.x,n=e.y,o=ze(t),i=Number.MAX_SAFE_INTEGER,a,s=[],u=0;u<o.length;u++)s.push({start:o[u],end:o[(u+1)%o.length]});if(s.forEach(function(c){var p=c.start,v=c.end;if(p.x===v.x){var h={x:p.x,y:n},g=tn(h,p,v);if(g){var y=Math.abs(p.x-r);y<i&&(i=y,a=h)}}else if(p.y===v.y){var h={x:r,y:p.y},g=tn(h,p,v);if(g){var y=Math.abs(p.y-n);y<i&&(i=y,a=h)}}}),!a){var l=s[0],d=l.start,f=l.end;a={x:d.x+(f.x-d.x)/2,y:d.y+(f.y-d.y)/2}}return a},Q_=function(e){return er(e,["id","type","sourceNodeId","sourceAnchorId","targetNodeId","targetAnchorId","pointsList","startPoint","endPoint","properties"])},lu=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))};function tm(e,t){return typeof t!="function"?function(r,n,o){return Object.assign({type:e.edgeType},o)}:function(r,n,o){var i=t(r,n,o);return i?typeof i=="string"?Object.assign({},o,{type:i}):Object.assign({type:i},o):{type:e.edgeType}}}var em=function(e){var t=e.rows,r=e.rowsLength,n=e.fontSize,o=0;return st(t,function(i){var a=Cf(i);o=a>o?a:o}),{width:Math.ceil(o/2)*n+n/4,height:r*(n+2)+n/4}},We=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},Mn=function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))};function mr(e,t){return t*Math.round(e/t)||e}function rm(e,t,r){if(!e)return[];var n=Math.min.apply(Math,Mn([],We(e.map(function(h){return h[0]})),!1)),o=Math.max.apply(Math,Mn([],We(e.map(function(h){return h[0]})),!1)),i=Math.min.apply(Math,Mn([],We(e.map(function(h){return h[1]})),!1)),a=Math.max.apply(Math,Mn([],We(e.map(function(h){return h[1]})),!1)),s=-n,u=-i,l=e.map(function(h){var g=We(h,2),y=g[0],_=g[1];return[y+s,_+u]}),d=o-n,f=a-i,c=t?t/d:1,p=r?r/f:1,v=Math.min(c,p);return l.map(function(h){var g=We(h,2),y=g[0],_=g[1];return[y*v,_*v]})}var qo=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},Jo=function(e,t,r){var n=qo(e,2),o=n[0],i=n[1],a=qo(t,2),s=a[0],u=a[1],l=qo(r,2),d=l[0],f=l[1];return o>s&&o<d&&i>u&&i<f},jf=function(e,t){var r=t.multipleSelectKey,n=!1;switch(r){case"meta":n=e.metaKey;break;case"alt":n=e.altKey;break;case"shift":n=e.shiftKey;break;case"ctrl":n=e.ctrlKey;break;default:n=!1;break}return n},Da=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();function fu(e,t){return e instanceof ht&&t instanceof ht}var Lf=function(e){Da(t,e);function t(r,n,o){var i=e.call(this,3)||this;return i[0]=r,i[1]=n,i[2]=o,i.x=r,i.y=n,i.z=o,Object.setPrototypeOf(i,t.prototype),i}return t.prototype.add=function(r){if(fu(this,r))return new ht(this.x+r.x,this.y+r.y);var n=this.z+r.z;return new Di((this.x+r.x)/n,(this.y+r.y)/n)},t.prototype.subtract=function(r){if(fu(this,r))return new ht(this.x-r.x,this.y-r.y);var n=this.z-r.z;return n===0?new ht(this.x-r.x,this.y-r.y):new Di((this.x-r.x)/n,(this.y-r.y)/n)},t}(Array),ht=function(e){Da(t,e);function t(r,n,o){var i=e.call(this,r,n,o??0)||this;return Object.setPrototypeOf(i,t.prototype),i}return t.prototype.toString=function(){return"Vector"},t.prototype.dot=function(r){var n=this;return r.reduce(function(o,i,a){return o+i*n[a]})},t.prototype.cross=function(r){return new t(this.y*r.z-this.z*r.y,this.z*r.x-this.x*r.z,this.x*r.y-this.y*r.x)},t.prototype.getLength=function(){return Math.hypot(this.x,this.y)},t.prototype.normalize=function(){var r=this.getLength();return new t(this.x/r,this.y/r)},t.prototype.crossZ=function(r){return this.x*r.y-this.y*r.x},t.prototype.angle=function(r){var n=this.crossZ(r),o=Math.acos(this.normalize().dot(r.normalize()));return n>=0?o:-o},t}(Lf),Di=function(e){Da(t,e);function t(r,n){var o=e.call(this,r,n,1)||this;return Object.setPrototypeOf(o,t.prototype),o}return t.prototype.toString=function(){return"Point"},t}(Lf),Io=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ke=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},Qo=function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},Bo=function(e){Io(t,e);function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=e.call(this,r.length)||this;return o.fill(new Array(3)),r.forEach(function(i,a){o[a]=i}),o.columns=r[0].length,o.rows=r.length,Object.setPrototypeOf(o,t.prototype),o}return t.prototype.getRow=function(r){return this[r]},t.prototype.getColumn=function(r){return Qo([],Ke(this.map(function(n){return n[r]})),!1)},t.prototype.transpose=function(){for(var r=[],n=0;n<this.columns;n++)r.push(this.getColumn(n));return new(t.bind.apply(t,Qo([void 0],Ke(r),!1)))},t.prototype.cross=function(r){var n=new Array(this.rows).fill("").map(function(){return[]});if(this.columns===r.rows)for(var o=0;o<this.rows;o++)for(var i=this.getRow(o),a=function(u){var l=r.getColumn(u);n[o][u]=i.reduce(function(d,f,c){return d+f*l[c]},0)},s=0;s<r.columns;s++)a(s);return new(t.bind.apply(t,Qo([void 0],Ke(n),!1)))},t.prototype.to2D=function(){return this.map(function(r){return[r[0],r[1]]})},t.prototype.toPoints=function(){return this.map(function(r){return new Di(r[0],r[1])})},t.prototype.toString=function(){var r=Ke(this[0],2),n=r[0],o=r[1],i=Ke(this[1],2),a=i[0],s=i[1],u=Ke(this[2],2),l=u[0],d=u[1];return"matrix(".concat(n," ").concat(o," ").concat(a," ").concat(s," ").concat(l," ").concat(d,")")},t.prototype.translate=function(r,n){return this.cross(new $o(r,n))},t.prototype.rotate=function(r){return this.cross(new nm(r))},t.prototype.scale=function(r,n){return this.cross(new om(r,n))},t}(Array),nm=function(e){Io(t,e);function t(r){var n=e.call(this,new ht(+Math.cos(r).toFixed(2),+Math.sin(r).toFixed(2),0),new ht(-Math.sin(r).toFixed(2),+Math.cos(r).toFixed(2),0),new ht(0,0,1))||this;return Object.setPrototypeOf(n,t.prototype),n}return t.prototype.inverse=function(){return this.transpose()},t}(Bo),om=function(e){Io(t,e);function t(r,n){var o=e.call(this,new ht(r,0,0),new ht(0,n,0),new ht(0,0,1))||this;return o.sx=r,o.sy=n,Object.setPrototypeOf(o,t.prototype),o}return t.prototype.inverse=function(){return new t(1/this.sx,1/this.sy)},t}(Bo),$o=function(e){Io(t,e);function t(r,n){var o=e.call(this,new ht(1,0,0),new ht(0,1,0),new ht(r,n,1))||this;return o.tx=r,o.ty=n,Object.setPrototypeOf(o,t.prototype),o}return t.prototype.inverse=function(){return new t(-this.tx,-this.ty)},t}(Bo);Jd({isolateGlobalState:!0});var uo=function(){return uo=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},uo.apply(this,arguments)},Ni=function(e){var t=e.anchors;return t},lo=function(e,t){for(var r=t.nodes,n,o=r.length-1;o>=0;o--){var i=r[o],a=sm(e,i);if(a){var s=i.getTargetAnchor(e);if(s){var u={node:i,anchorIndex:s.index,anchor:s.anchor};(!n||im(i,n.node,t))&&(n=u)}}}return n},im=function(e,t,r){return e.zIndex>t.zIndex?!0:r.nodesMap[e.id].index>r.nodesMap[t.id].index},am=function(e,t){for(var r=Ni(t),n,o=Number.MAX_SAFE_INTEGER,i=0;i<r.length;i++){var a=Ft(e.x,e.y,r[i].x,r[i].y);a<o&&(o=a,n={index:i,anchor:uo(uo({},r[i]),{x:r[i].x,y:r[i].y,id:r[i].id})})}return n},Ft=function(e,t,r,n){return Math.hypot(e-r,t-n)},we=function(e,t){var r=!1,n=0,o=Ot(t);return e.x>=o.minX-n&&e.x<=o.maxX+n&&e.y>=o.minY-n&&e.y<=o.maxY+n&&(r=!0),r},sm=function(e,t){var r=!1,n=5,o=Ot(t);return e.x>=o.minX-n&&e.x<=o.maxX+n&&e.y>=o.minY-n&&e.y<=o.maxY+n&&(r=!0),r},Ot=function(e){var t=e.x,r=e.y,n=e.width,o=e.height;return{minX:t-n/2,minY:r-o/2,maxX:t+n/2,maxY:r+o/2,x:t,y:r,width:n,height:o,centerX:t,centerY:r}},um=function(e){var t=e,r=t.x,n=t.y,o=t.width,i=t.height,a=t.radius;return[{x:r-o/2+a,y:n-i/2+a,r:a},{x:r+o/2-a,y:n-i/2+a,r:a},{x:r-o/2+a,y:n+i/2-a,r:a},{x:r+o/2-a,y:n+i/2-a,r:a}]},du=function(e,t,r){var n=um(r),o,i=Number.MAX_SAFE_INTEGER;return n.forEach(function(a){var s=Ft(e.x,e.y,a.x,a.y);s<i&&(i=s,o=a)}),Ci(e,t,o)},Ci=function(e,t,r){var n,o=r.x,i=r.y,a=r.r;if(t===ot.HORIZONTAL){var s=o-Math.sqrt(a*a-(e.y-i)*(e.y-i)),u=o+Math.sqrt(a*a-(e.y-i)*(e.y-i)),l=Math.abs(s-e.x)<Math.abs(u-e.x)?s:u;n={x:l,y:e.y}}else if(t===ot.VERTICAL){var d=i-Math.sqrt(a*a-(e.x-o)*(e.x-o)),f=i+Math.sqrt(a*a-(e.x-o)*(e.x-o)),c=Math.abs(d-e.y)<Math.abs(f-e.y)?d:f;n={x:e.x,y:c}}return n},cu=function(e,t){var r=t,n=!1,o=r.x,i=r.y,a=r.width,s=r.height,u=r.radius,l={minX:o-a/2+u,maxX:o+a/2-u,minY:i-s/2+u,maxY:i+s/2-u};return e.y===i+s/2||e.y===i-s/2?n=e.x>l.minX&&e.x<l.maxX:(e.x===o+a/2||e.x===o-a/2)&&(n=e.y>l.minY&&e.y<l.maxY),n},pu=function(e,t,r){var n,o=r,i=o.x,a=o.y,s=o.rx,u=o.ry;if(t===ot.HORIZONTAL){var l=i-Math.sqrt(s*s-(e.y-a)*(e.y-a)*s*s/(u*u)),d=i+Math.sqrt(s*s-(e.y-a)*(e.y-a)*s*s/(u*u)),f=Math.abs(l-e.x)<Math.abs(d-e.x)?l:d;n={x:f,y:e.y}}else if(t===ot.VERTICAL){var c=a-Math.sqrt(u*u-(e.x-i)*(e.x-i)*u*u/(s*s)),p=a+Math.sqrt(u*u-(e.x-i)*(e.x-i)*u*u/(s*s)),v=Math.abs(c-e.y)<Math.abs(p-e.y)?c:p;n={x:e.x,y:v}}return n},Tn=function(e,t,r){for(var n=r.pointsPosition,o=Number.MAX_SAFE_INTEGER,i,a=[],s=0;s<n.length;s++)a.push({start:n[s],end:n[(s+1)%n.length]});return a.forEach(function(u){var l=u.start,d=u.end,f=l,c=d;l.x>d.x&&(f=d,c=l);var p={x:e.x,y:e.y};if(f.x===c.x&&t===ot.HORIZONTAL&&(p={x:f.x,y:e.y}),f.y===c.y&&t===ot.VERTICAL&&(p={x:e.x,y:f.y}),f.x!==c.x&&f.y!==c.y){var v=(c.y-f.y)/(c.x-f.x),h=(f.x*c.y-c.x*f.y)/(f.x-c.x);t===ot.HORIZONTAL?p={x:(e.y-h)/v,y:e.y}:t===ot.VERTICAL&&(p={x:e.x,y:v*e.x+h})}var g=tn(p,l,d);if(g){var y=Ft(p.x,p.y,e.x,e.y);y<o&&(o=y,i=p)}}),i},lm=function(e){var t=er(e,["id","type","x","y","text","label","properties","virtual","rotate","resizable","rotatable"]);return t},hu=function(e,t,r,n){var o=e.x,i=e.y;return t.x>e.x?o=e.x+r/2:t.x<e.x&&(o=e.x-r/2),t.y>e.y?i=e.y+n/2:t.y<e.y&&(i=e.y-n/2),{x:o,y:i}},If=function(e){var t=e.rows,r=e.style,n=e.rowsLength,o=e.className,i=document.createElement("div");i.className=o,i.style.fontSize="".concat(r.fontSize),i.style.width="".concat(r.width),i.style.lineHeight="".concat(r.lineHeight),i.style.padding="".concat(r.padding),r.fontFamily&&(i.style.fontFamily="".concat(r.fontFamily)),n>1?t.forEach(function(s){var u=document.createElement("div");u.textContent=s,i.appendChild(u)}):i.textContent=t[0],document.body.appendChild(i);var a=i.clientHeight;return document.body.removeChild(i),a},vu=function(e){var t=e.rows,r=e.rowsLength,n=e.fontSize,o=0;return t&&t.forEach(function(i){var a=Cf(i);o=a>o?a:o}),{width:Math.ceil(o/2)*n+n/4,height:r*(n+2)+n/4}},fo=function(e){return typeof e!="object"?{isAllPass:!!e,msg:e?"":"不允许连接"}:e},He=function(){return ed()},$r=new Map,Bf=function(e){var t=He();function r(){e();var o=$r.get(t);if(o){var i=window.requestAnimationFrame(r);$r.set(t,i)}}var n=window.requestAnimationFrame(r);return $r.set(t,n),t},co=function(e){var t=$r.get(e);t&&(window.cancelAnimationFrame(t),$r.delete(e))},nn=function(){return nn=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},nn.apply(this,arguments)},fm=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i};function $f(e){var t=e.x,r=t===void 0?0:t,n=e.y,o=n===void 0?0:n,i=e.value,a=e.fontSize,s=a===void 0?12:a,u=e.fill,l=u===void 0?"currentColor":u,d=e.overflowMode,f=d===void 0?"default":d,c=e.textWidth,p=c===void 0?void 0:c,v=e.model,h={x:r,y:o,fill:l,fontSize:s,textAnchor:"middle",dominantBaseline:"central"};if(st(De(e),function(S){var O=fm(S,2),m=O[0],w=O[1];typeof w!="object"&&(h[m]=w)}),i){var g=String(i).split(/[\r\n]/g),y=g.length;if(f!=="default"){var _=v.BaseType,A=v.modelType;if(_===at.NODE&&A!==Y.TEXT_NODE||_===at.EDGE&&p)return dm(e)}if(y>1){var M=g.map(function(S,O){var m=s+2,w=(O-(y-1)/2)*m;return E("tspan",{className:"lf-text-tspan",x:r,y:o+w,children:S})});return E("text",nn({},h,{children:M}))}return E("text",nn({},h,{children:i}))}return null}function dm(e){var t=e.x,r=e.y,n=e.value,o=e.model,i=e.textWidth,a=e.fontSize,s=a===void 0?12:a,u=e.lineHeight,l=e.fontFamily,d=l===void 0?"":l,f=e.wrapPadding,c=f===void 0?"0, 0":f,p=e.overflowMode,v=o.width,h=o.height,g=o.textHeight,y=i||v,_=String(n).split(/[\r\n]/g),A=_.length,M=If({rows:_,style:{fontSize:"".concat(s,"px"),width:"".concat(y,"px"),fontFamily:d,lineHeight:u,padding:c},rowsLength:A,className:"lf-get-text-height"}),S=h>M?h:M;g&&(S=g);var O=p==="ellipsis";return O&&(S=s+2),E("g",{children:E("foreignObject",{width:y,height:S,x:t-y/2,y:r-S/2,style:{overflow:"visible",textAlign:"left"},children:E("div",{className:"lf-node-text-auto-wrap",style:{minHeight:S,width:y,padding:c},children:E("div",{className:O?"lf-node-text-ellipsis-content":"lf-node-text-auto-wrap-content",title:O?_.join(""):"",style:nn({},e),children:_.map(function(m){return E("div",{className:"lf-node-text--auto-wrap-inner",children:m})})})})})})}var Ri=function(){return Ri=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ri.apply(this,arguments)},cm=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i};function xr(e){var t={x1:10,y1:10,x2:20,y2:20,stroke:"black"};return st(De(e),function(r){var n=cm(r,2),o=n[0],i=n[1];(o==="style"||typeof i!="object")&&(t[o]=i)}),E("line",Ri({},t))}var ji=function(){return ji=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ji.apply(this,arguments)},pm=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i};function oe(e){var t=e.x,r=e.y,n=e.width,o=e.height,i=e.className,a=e.strokeWidth,s=e.radius,u=s===void 0?0:s,l=t-n/2,d=r-o/2,f={};return f["stroke-width"]=a,st(De(e),function(c){var p=pm(c,2),v=p[0],h=p[1];typeof h!="object"&&(f[v]=h)}),i?f.className="lf-basic-shape ".concat(i):f.className="lf-basic-shape",u&&(f.rx=u,f.ry=u),f.x=l,f.y=d,E("rect",ji({},f))}var Li=function(){return Li=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Li.apply(this,arguments)},hm=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i};function on(e){var t={d:""};return st(De(e),function(r){var n=hm(r,2),o=n[0],i=n[1];(o==="style"||typeof i!="object")&&(t[o]=i)}),E("path",Li({},t))}var Ii=function(){return Ii=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ii.apply(this,arguments)},vm=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i};function Er(e){var t=e.x,r=t===void 0?0:t,n=e.y,o=n===void 0?0:n,i=e.r,a=i===void 0?4:i,s=e.className,u={cx:r,cy:o,r:a,fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1};return st(De(e),function(l){var d=vm(l,2),f=d[0],c=d[1];typeof c!="object"&&(u[f]=c)}),s?u.className="lf-basic-shape ".concat(s):u.className="lf-basic-shape",E("circle",Ii({},u))}var Bi=function(){return Bi=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Bi.apply(this,arguments)},ym=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i};function gm(e){var t=e.x,r=t===void 0?0:t,n=e.y,o=n===void 0?0:n,i=e.rx,a=i===void 0?4:i,s=e.ry,u=s===void 0?4:s,l=e.className,d={cx:r,cy:o,rx:a,ry:u,fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1};return st(De(e),function(f){var c=ym(f,2),p=c[0],v=c[1];typeof v!="object"&&(d[p]=v)}),l?d.className="lf-basic-shape ".concat(l):d.className="lf-basic-shape",E("ellipse",Bi({},d))}var $i=function(){return $i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},$i.apply(this,arguments)},_m=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i};function Xf(e){var t=e.points,r=t===void 0?[]:t,n=e.className,o={fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1,points:""};return st(De(e),function(i){var a=_m(i,2),s=a[0],u=a[1];typeof u!="object"&&(o[s]=u)}),n?o.classNmae="lf-basic-shape ".concat(n):o.className="lf-basic-shape",o.points=r.map(function(i){return i.join(",")}).join(" "),E("polygon",$i({},o))}var Xi=function(){return Xi=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Xi.apply(this,arguments)},mm=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i};function xm(e){var t=e.className,r={points:"",fill:"none"};return st(De(e),function(n){var o=mm(n,2),i=o[0],a=o[1];(i==="style"||typeof a!="object")&&(r[i]=a)}),t&&(r.className="".concat(t)),E("polyline",Xi({},r))}var Hf=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),an=function(){return an=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},an.apply(this,arguments)},Em=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r},bm=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},J;(function(e){e[e.LEFT_TOP=0]="LEFT_TOP",e[e.RIGHT_TOP=1]="RIGHT_TOP",e[e.RIGHT_BOTTOM=2]="RIGHT_BOTTOM",e[e.LEFT_BOTTOM=3]="LEFT_BOTTOM"})(J||(J={}));var Om=function(e){Hf(t,e);function t(r){var n=e.call(this)||this;n.updateEdgePointByAnchors=function(){var s=n.nodeModel,u=s.id,l=s.anchors,d=n.graphModel.getNodeEdges(u);st(d,function(f){if(f.sourceNodeId===u){var c=Ge(l,function(p){return p.id===f.sourceAnchorId});c&&f.updateStartPoint({x:c.x,y:c.y})}else if(f.targetNodeId===u){var c=Ge(l,function(v){return v.id===f.targetAnchorId});c&&f.updateEndPoint({x:c.x,y:c.y})}})},n.triggerResizeEvent=function(s,u,l,d,f,c){n.graphModel.eventCenter.emit(C.NODE_RESIZE,{preData:s,data:u,deltaX:l,deltaY:d,index:f,model:c})},n.recalcResizeInfo=function(s,u,l,d,f){l===void 0&&(l=1),d===void 0&&(d=!1),f===void 0&&(f=!1);var c=$(u),p=c.deltaX,v=c.deltaY,h=c.width,g=c.height,y=c.PCTResizeInfo;if(y){var _=4,A=0,M=0;switch(s){case J.LEFT_TOP:M=(p*-1-v)/_;break;case J.RIGHT_TOP:M=(p-v)/_;break;case J.RIGHT_BOTTOM:M=(p+v)/_;break;case J.LEFT_BOTTOM:M=(p*-1+v)/_;break}M!==0&&(A=Math.round(M/y.ResizeBasis.basisHeight*1e5)/1e3),y.ResizePCT.widthPCT=Math.max(Math.min(y.ResizePCT.widthPCT+A,y.ScaleLimit.maxScaleLimit),y.ScaleLimit.minScaleLimit),y.ResizePCT.heightPCT=Math.max(Math.min(y.ResizePCT.heightPCT+A,y.ScaleLimit.maxScaleLimit),y.ScaleLimit.minScaleLimit);var S=Math.round(y.ResizePCT.widthPCT*y.ResizeBasis.basisWidth/100),O=Math.round(y.ResizePCT.heightPCT*y.ResizeBasis.basisHeight/100);switch(s){case J.LEFT_TOP:p=h-S,v=g-O;break;case J.RIGHT_TOP:p=S-h,v=g-O;break;case J.RIGHT_BOTTOM:p=S-h,v=O-g;break;case J.LEFT_BOTTOM:p=h-S,v=O-g;break}return c}switch(s){case J.LEFT_TOP:c.width=d?h:h-p*l,c.height=f?g:g-v*l;break;case J.RIGHT_TOP:c.width=d?h:h+p*l,c.height=f?g:g-v*l;break;case J.RIGHT_BOTTOM:c.width=d?h:h+p*l,c.height=f?g:g+v*l;break;case J.LEFT_BOTTOM:c.width=d?h:h-p*l,c.height=f?g:g+v*l;break}return c},n.resizeNode=function(s){var u=s.deltaX,l=s.deltaY,d=n.index,f=n.props,c=f.model,p=f.graphModel,v=f.x,h=f.y;Cm({x:v,y:h,deltaX:u,deltaY:l,index:d,nodeModel:c,graphModel:p,cancelCallback:function(){n.dragHandler.cancelDrag()}})},n.onDragging=function(s){var u=s.deltaX,l=s.deltaY,d=n.graphModel.transformModel,f=bm(d.fixDeltaXY(u,l),2),c=f[0],p=f[1];n.resizeNode({deltaX:c,deltaY:p})},n.onDragEnd=function(){var s=n.nodeModel.x,u=n.nodeModel.y;n.nodeModel.moveTo(s,u),n.updateEdgePointByAnchors()};var o=r.index,i=r.model,a=r.graphModel;return n.index=o,n.nodeModel=i,n.graphModel=a,n.dragHandler=new le({onDragging:n.onDragging,onDragEnd:n.onDragEnd,step:a.gridSize}),n}return t.prototype.componentWillUnmount=function(){this.dragHandler.cancelDrag()},t.prototype.render=function(){var r=this.props,n=r.x,o=r.y,i=r.direction,a=r.model,s=a.getResizeControlStyle(),u=s.width,l=s.height,d=Em(s,["width","height"]);return E("g",{className:"lf-resize-control lf-resize-control-".concat(i),children:[E(oe,an({className:"lf-resize-control-content",x:n,y:o,width:u??7,height:l??7},d)),E(oe,{className:"lf-resize-control-content",x:n,y:o,width:25,height:25,fill:"transparent",stroke:"transparent",onMouseDown:this.dragHandler.handleMouseDown})]})},t}(z),wm=function(e){Hf(t,e);function t(){return e.call(this)||this}return t.prototype.getResizeControl=function(){var r=this.props,n=r.model,o=r.graphModel,i=Ot(n),a=i.minX,s=i.minY,u=i.maxX,l=i.maxY,d=[{index:J.LEFT_TOP,direction:"nw",x:a,y:s},{index:J.RIGHT_TOP,direction:"ne",x:u,y:s},{index:J.RIGHT_BOTTOM,direction:"se",x:u,y:l},{index:J.LEFT_BOTTOM,direction:"sw",x:a,y:l}];return ce(d,function(f){return E(Om,an({},f,{model:n,graphModel:o}))})},t.prototype.getResizeOutline=function(){var r=this.props.model,n=r.x,o=r.y,i=r.width,a=r.height,s=r.getResizeOutlineStyle();return E(oe,an({},s,{x:n,y:o,width:i,height:a}))},t.prototype.render=function(){return E("g",{className:"lf-resize-control-group",children:[this.getResizeOutline(),this.getResizeControl()]})},t}(z);function Sm(e,t){var r=e.x,n=e.y,o=t.x,i=t.y,a={x:r+(o-r)/2,y:n+(i-n)/2};return a}function Lr(e,t,r){var n=Am(r),o=e.x-t.x,i=e.y-t.y,a=o*Math.cos(n)-i*Math.sin(n)+t.x,s=o*Math.sin(n)+i*Math.cos(n)+t.y;return{x:a,y:s}}function Am(e){return e*Math.PI/180}function Mm(e){return e/Math.PI*180}function Tm(e,t,r,n,o,i,a,s,u){s===void 0&&(s=!1),u===void 0&&(u=!1);var l=t.deltaX,d=t.deltaY,f=t.width,c=t.height,p=Mm(r),v={x:n,y:o},h={x:i,y:a},g=Lr(v,h,p),y={x:g.x+l,y:g.y+d},_=Rm(g,y,h,p,s,u,f,c),A=_.width,M=_.height,S=_.center;return t.width=A*e,t.height=M*e,t.deltaX=(S.x-h.x)*2,t.deltaY=(S.y-h.y)*2,t}var Pm=function(e,t,r,n,o,i,a,s,u,l){r===void 0&&(r=1),n===void 0&&(n=!1),o===void 0&&(o=!1),i===void 0&&(i=0);var d=$(t),f=d.deltaX,c=d.deltaY,p=d.width,v=d.height,h=d.PCTResizeInfo;if(h){var g=4,y=0,_=0;switch(e){case J.LEFT_TOP:_=(f*-1-c)/g;break;case J.RIGHT_TOP:_=(f-c)/g;break;case J.RIGHT_BOTTOM:_=(f+c)/g;break;case J.LEFT_BOTTOM:_=(f*-1+c)/g;break}_!==0&&(y=Math.round(_/h.ResizeBasis.basisHeight*1e5)/1e3),h.ResizePCT.widthPCT=Math.max(Math.min(h.ResizePCT.widthPCT+y,h.ScaleLimit.maxScaleLimit),h.ScaleLimit.minScaleLimit),h.ResizePCT.heightPCT=Math.max(Math.min(h.ResizePCT.heightPCT+y,h.ScaleLimit.maxScaleLimit),h.ScaleLimit.minScaleLimit);var A=Math.round(h.ResizePCT.widthPCT*h.ResizeBasis.basisWidth/100),M=Math.round(h.ResizePCT.heightPCT*h.ResizeBasis.basisHeight/100);switch(e){case J.LEFT_TOP:f=p-A,c=v-M;break;case J.RIGHT_TOP:f=A-p,c=v-M;break;case J.RIGHT_BOTTOM:f=A-p,c=M-v;break;case J.LEFT_BOTTOM:f=p-A,c=M-v;break}return d}if(i%(2*Math.PI)!==0&&a!==void 0&&s!==void 0)return Tm(r,d,i,a,s,u,l,n,o);switch(e){case J.LEFT_TOP:d.width=n?p:p-f*r,d.height=o?v:v-c*r;break;case J.RIGHT_TOP:d.width=n?p:p+f*r,d.height=o?v:v-c*r;break;case J.RIGHT_BOTTOM:d.width=n?p:p+f*r,d.height=o?v:v+c*r;break;case J.LEFT_BOTTOM:d.width=n?p:p-f*r,d.height=o?v:v+c*r;break}return d},Dm=function(e,t){var r=e.id,n=e.anchors,o=t.getNodeEdges(r);st(o,function(i){if(i.sourceNodeId===r){var a=Ge(n,function(s){return s.id===i.sourceAnchorId});a&&i.updateStartPoint({x:a.x,y:a.y})}else if(i.targetNodeId===r){var a=Ge(n,function(u){return u.id===i.targetAnchorId});a&&i.updateEndPoint({x:a.x,y:a.y})}})},Nm=function(e,t,r,n,o,i,a){a.eventCenter.emit(C.NODE_RESIZE,{preData:e,data:t,deltaX:r,deltaY:n,index:o,model:i})},Cm=function(e){var t=e.x,r=e.y,n=e.deltaX,o=e.deltaY,i=e.index,a=e.nodeModel,s=e.graphModel,u=e.cancelCallback,l=a.r,d=a.rx,f=a.ry,c=a.width,p=a.height,v=a.PCTResizeInfo,h=a.minWidth,g=a.minHeight,y=a.maxWidth,_=a.maxHeight,A=a.rotate,M=a.x,S=a.y,O=h===y,m=g===_,w={width:l||d||c,height:l||f||p,deltaX:n,deltaY:o,PCTResizeInfo:v},P=l||d&&f?1/2:1,T=t,X=r,B=Pm(i,w,P,O,m,A,T,X,M,S);if(B.width<h||B.width>y||B.height<g||B.height>_){u==null||u();return}(A%(2*Math.PI)==0||v||T===void 0||X===void 0)&&(B.deltaX=O?0:B.deltaX,B.deltaY=m?0:B.deltaY);var F=a.getData(),k=a.resize(B);F.x===k.x&&F.y===k.y||(Dm(a,s),Nm(F,k,n,o,i,a,s))};function Rm(e,t,r,n,o,i,a,s){o===void 0&&(o=!1),i===void 0&&(i=!1);var u={x:r.x-(e.x-r.x),y:r.y-(e.y-r.y)},l=Sm(u,t),d=Lr(t,l,-n),f=Lr(u,l,-n);if(o){var c=Math.abs(d.x-f.x),p=c-a;l.x>d.x?l.x=l.x+p/2:l.x=l.x-p/2}if(i){var v=Math.abs(d.y-f.y),h=v-s;l.y>d.y?l.y=l.y+h/2:l.y=l.y-h/2}if(o||i){var g=Lr(f,l,n),y=g.x-u.x,_=g.y-u.y;l.x=l.x-y,l.y=l.y-_,f=Lr(u,l,-n),d={x:l.x-(f.x-l.x),y:l.y-(f.y-l.y)}}var A=Math.abs(d.x-f.x),M=Math.abs(d.y-f.y);return o&&(A=a),i&&(M=s),{width:A,height:M,center:l}}var jm=100,Lm={x:1,y:0,z:0};function Im(e,t,r,n,o){for(var i=function(p){if(p<0||p>1)throw new RangeError('The value range of parameter "t" is [0,1]');return{x:e.x*Math.pow(1-p,3)+3*t.x*p*Math.pow(1-p,2)+3*r.x*Math.pow(p,2)*(1-p)+n.x*Math.pow(p,3),y:e.y*Math.pow(1-p,3)+3*t.y*p*Math.pow(1-p,2)+3*r.y*Math.pow(p,2)*(1-p)+n.y*Math.pow(p,3)}},a=0,s=2,u=n.x,l=n.y,d=n;a<o&&s<50;){d=i(1-s/jm);var f=d.x,c=d.y;a=Ft(u,l,f,c),s++}return d}function Bm(e,t){return e.x*t.y-e.y*t.x}function $m(e,t){var r=[e.x,e.y,e.z],n=[t.x,t.y,t.z];return n.reduce(function(o,i,a){return o+i*r[a]})}function Xm(e,t){var r=Bm(e,t),n=Math.acos($m(yu(e),yu(t)));return r>=0?n:-n}function yu(e){var t=Math.hypot(e.x,e.y);return{x:e.x/t,y:e.y/t,z:0}}function Hm(e){return Xm(Lm,e)}function Ym(e){return e*(180/Math.PI)}var Fm={baseNode:{fill:"#fff",stroke:"#000",strokeWidth:2},baseEdge:{stroke:"#000",strokeWidth:2},rect:{},circle:{},diamond:{},ellipse:{},polygon:{},text:{color:"#000",stroke:"none",fontSize:12,background:{fill:"transparent"}},anchor:{stroke:"#000",fill:"#fff",r:4,hover:{r:10,fill:"#949494",fillOpacity:.5,stroke:"#949494"}},anchorLine:{stroke:"#000",strokeWidth:2,strokeDasharray:"3,2"},nodeText:{color:"#000",overflowMode:"default",fontSize:12,lineHeight:1.2},edgeText:{textWidth:100,overflowMode:"default",fontSize:12,background:{fill:"#fff"}},line:{},polyline:{},bezier:{fill:"none",adjustLine:{stroke:"#949494"},adjustAnchor:{r:4,fill:"#949494",fillOpacity:1,stroke:"#949494"}},arrow:{offset:10,verticalLength:5},snapline:{stroke:"#949494",strokeWidth:1},edgeAdjust:{r:4,fill:"#fff",stroke:"#949494",strokeWidth:2},outline:{fill:"transparent",stroke:"#949494",strokeDasharray:"3,3",hover:{stroke:"#949494"}},edgeAnimation:{stroke:"red",strokeDasharray:"10,10",strokeDashoffset:"100%",animationName:"lf_animate_dash",animationDuration:"20s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"normal"},rotateControl:{stroke:"#000",fill:"#fff",strokeWidth:1.5},resizeControl:{width:7,height:7,fill:"#fff",stroke:"#000"},resizeOutline:{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},Yf=function(e){var t=$(Fm);return e&&(t=Tf(t,e)),t},Gm=Yf,zm=1e3,km=999,Na=function(){return++zm},Um=function(){return--km},lt=function(){return lt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},lt.apply(this,arguments)},R=function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},Xo=function(){function e(t,r){var n;this.BaseType=at.EDGE,this.id="",this.type="",this.sourceNodeId="",this.targetNodeId="",this.textMode=Wt.TEXT,this.text={value:"",x:0,y:0,draggable:!1,editable:!0},this.points="",this.pointsList=[],this.virtual=!1,this.isSelected=!1,this.isHovered=!1,this.isHitable=!0,this.isHittable=!0,this.draggable=!0,this.visible=!0,this.isAnimation=!1,this.isShowAdjustPoint=!1,this.zIndex=0,this.state=V.DEFAULT,this.modelType=Y.EDGE,this.customTextPosition=!1,this.style={},this.arrowConfig={markerEnd:"url(#marker-end-".concat(this.id,")"),markerStart:"url(#marker-start-".concat(this.id,")")},this.graphModel=r,this.properties=(n=t.properties)!==null&&n!==void 0?n:{},this.initEdgeData(t),this.setAttributes()}return e.prototype.initEdgeData=function(t){if(t.properties||(t.properties={}),!t.id){var r=this.graphModel.idGenerator,n=r&&r(t.type),o=this.createId();t.id=o||n||He()}this.arrowConfig.markerEnd="url(#marker-end-".concat(t.id,")"),this.arrowConfig.markerStart="url(#marker-start-".concat(t.id,")");var i=this.graphModel.editConfigModel.adjustEdgeStartAndEnd;this.isShowAdjustPoint=i,tt(this,Q_(t));var a=this.graphModel.overlapMode;a===Yt.INCREASE&&(this.zIndex=t.zIndex||Na()),this.setAnchors(),this.initPoints(),this.formatText(t)},e.prototype.setAttributes=function(){},e.prototype.createId=function(){return null},e.prototype.getEdgeStyle=function(){return lt(lt({},this.graphModel.theme.baseEdge),this.style)},e.prototype.getAdjustPointStyle=function(){return lt({},this.graphModel.theme.edgeAdjust)},e.prototype.getTextStyle=function(){var t=this.graphModel.theme.edgeText;return $(t)},e.prototype.getEdgeAnimationStyle=function(){var t=this.graphModel.theme.edgeAnimation;return $(t)},e.prototype.getArrowStyle=function(){var t=this.getEdgeStyle(),r=this.getEdgeAnimationStyle(),n=this.graphModel.theme.arrow,o=this.isAnimation?r.stroke:t.stroke;return lt(lt(lt({},t),{fill:o,stroke:o}),n)},e.prototype.getOutlineStyle=function(){var t=this.graphModel,r=t.theme.outline;return $(r)},e.prototype.getTextPosition=function(){return{x:0,y:0}},Object.defineProperty(e.prototype,"sourceNode",{get:function(){var t,r;return(r=(t=this.graphModel)===null||t===void 0?void 0:t.nodesMap[this.sourceNodeId])===null||r===void 0?void 0:r.model},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"targetNode",{get:function(){var t,r;return(r=(t=this.graphModel)===null||t===void 0?void 0:t.nodesMap[this.targetNodeId])===null||r===void 0?void 0:r.model},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textPosition",{get:function(){return this.getTextPosition()},enumerable:!1,configurable:!0}),e.prototype.getBeginAnchor=function(t,r,n){var o,i,a=Ni(t);if(n){if(o=Ge(a,function(s){return s.id===n}),o)return o;console.warn("未在节点上找到指定的起点锚点".concat(n,"，已使用默认锚点作为起点"))}return a.forEach(function(s){var u=lu(s,r);(i===void 0||u<i)&&(i=u,o=s)}),o},e.prototype.getEndAnchor=function(t,r){var n=this,o,i,a=Ni(t);if(r){if(o=Ge(a,function(s){return s.id===r}),o)return o;console.warn("未在节点上找到指定的终点锚点".concat(r,"，已使用默认锚点作为终点"))}return a.forEach(function(s){if(n.startPoint){var u=lu(s,n.startPoint);(i===void 0||u<i)&&(i=u,o=s)}}),o},e.prototype.getProperties=function(){return te(this.properties)},e.prototype.getData=function(){var t=this.properties;pr(t)&&(t=te(t));var r={id:this.id,type:this.type,properties:t,sourceNodeId:this.sourceNodeId,targetNodeId:this.targetNodeId,startPoint:tt({},this.startPoint),endPoint:tt({},this.endPoint)};this.graphModel.overlapMode===Yt.INCREASE&&(r.zIndex=this.zIndex);var n=this.text,o=n.x,i=n.y,a=n.value;return a&&(r.text={x:o,y:i,value:a}),r},e.prototype.getHistoryData=function(){return this.getData()},e.prototype.setProperty=function(t,r){da(this.properties,t,_t(r)),this.setAttributes()},e.prototype.deleteProperty=function(t){delete this.properties[t],this.setAttributes()},e.prototype.setProperties=function(t){this.properties=lt(lt({},te(this.properties)),_t(t)),this.setAttributes()},e.prototype.changeEdgeId=function(t){var r=this.arrowConfig,n=r.markerEnd,o=r.markerStart;o&&o==="url(#marker-start-".concat(this.id,")")&&(this.arrowConfig.markerStart="url(#marker-start-".concat(t,")")),n&&n==="url(#marker-end-".concat(this.id,")")&&(this.arrowConfig.markerEnd="url(#marker-end-".concat(t,")")),this.id=t},e.prototype.setStyle=function(t,r){var n;this.style=lt(lt({},this.style),(n={},n[t]=_t(r),n))},e.prototype.setStyles=function(t){this.style=lt(lt({},this.style),_t(t))},e.prototype.updateStyles=function(t){this.style=lt({},_t(t))},e.prototype.setTextMode=function(t){this.textMode=t},e.prototype.formatText=function(t){var r,n,o,i=this.textPosition,a=i.x,s=i.y,u=t.text,l={value:"",x:a,y:s,draggable:!1,editable:!0};u&&(typeof u=="string"?l=lt(lt({},l),{value:u}):(l=lt(lt({},l),{x:(r=u.x)!==null&&r!==void 0?r:a,y:(n=u.y)!==null&&n!==void 0?n:s,value:(o=u.value)!==null&&o!==void 0?o:""}),_r(u.draggable)||(l.draggable=u.draggable),_r(u.editable)||(l.editable=u.editable))),this.text=l},e.prototype.resetTextPosition=function(){var t=this.textPosition,r=t.x,n=t.y;this.text.x=r,this.text.y=n},e.prototype.moveText=function(t,r){var n=this.text,o=n.x,i=n.y,a=n.value,s=n.draggable,u=n.editable;this.text={value:a,editable:u,draggable:s,x:o+t,y:i+r}},e.prototype.setText=function(t){t&&tt(this.text,t)},e.prototype.updateText=function(t){this.text=lt(lt({},te(this.text)),{value:t})},e.prototype.setAnchors=function(){if(!this.sourceAnchorId||!this.startPoint){var t=this.getBeginAnchor(this.sourceNode,this.targetNode,this.sourceAnchorId);if(!t)throw new Error("无法获取beginAnchor，请检查anchors相关逻辑，anchors不能为空");this.startPoint||(this.startPoint={x:t.x,y:t.y}),this.sourceAnchorId||(this.sourceAnchorId=t.id)}if(!this.targetAnchorId||!this.endPoint){var t=this.getEndAnchor(this.targetNode,this.targetAnchorId);if(!t)throw new Error("无法获取endAnchor，请检查anchors相关逻辑，anchors不能为空");this.endPoint||(this.endPoint={x:t.x,y:t.y}),this.targetAnchorId||(this.targetAnchorId=t.id)}},e.prototype.setSelected=function(t){t===void 0&&(t=!0),this.isSelected=t},e.prototype.setHovered=function(t){t===void 0&&(t=!0),this.isHovered=t},e.prototype.setHitable=function(t){t===void 0&&(t=!0),this.isHitable=t},e.prototype.setHittable=function(t){t===void 0&&(t=!0),this.isHittable=t},e.prototype.openEdgeAnimation=function(){this.isAnimation=!0},e.prototype.closeEdgeAnimation=function(){this.isAnimation=!1},e.prototype.setElementState=function(t,r){this.state=t,this.additionStateData=r},e.prototype.updateStartPoint=function(t){this.startPoint=t},e.prototype.moveStartPoint=function(t,r){this.startPoint&&(this.startPoint.x+=t,this.startPoint.y+=r)},e.prototype.updateEndPoint=function(t){this.endPoint=t},e.prototype.moveEndPoint=function(t,r){this.endPoint&&(this.endPoint.x+=t,this.endPoint.y+=r)},e.prototype.setZIndex=function(t){t===void 0&&(t=0),this.zIndex=t},e.prototype.initPoints=function(){},e.prototype.updateAttributes=function(t){tt(this,t)},e.prototype.getAdjustStart=function(){return this.startPoint},e.prototype.getAdjustEnd=function(){return this.endPoint},e.prototype.updateAfterAdjustStartAndEnd=function(t){var r=t.startPoint,n=t.endPoint;this.updateStartPoint({x:r.x,y:r.y}),this.updateEndPoint({x:n.x,y:n.y})},e.BaseType=at.EDGE,R([b],e.prototype,"type",void 0),R([b],e.prototype,"sourceNodeId",void 0),R([b],e.prototype,"targetNodeId",void 0),R([b],e.prototype,"startPoint",void 0),R([b],e.prototype,"endPoint",void 0),R([b],e.prototype,"textMode",void 0),R([b],e.prototype,"text",void 0),R([b],e.prototype,"properties",void 0),R([b],e.prototype,"points",void 0),R([b],e.prototype,"pointsList",void 0),R([b],e.prototype,"isSelected",void 0),R([b],e.prototype,"isHovered",void 0),R([b],e.prototype,"isHitable",void 0),R([b],e.prototype,"isHittable",void 0),R([b],e.prototype,"draggable",void 0),R([b],e.prototype,"visible",void 0),R([b],e.prototype,"isAnimation",void 0),R([b],e.prototype,"isShowAdjustPoint",void 0),R([b],e.prototype,"zIndex",void 0),R([b],e.prototype,"state",void 0),R([b],e.prototype,"style",void 0),R([b],e.prototype,"arrowConfig",void 0),R([et],e.prototype,"sourceNode",null),R([et],e.prototype,"targetNode",null),R([et],e.prototype,"textPosition",null),R([x],e.prototype,"setProperty",null),R([x],e.prototype,"deleteProperty",null),R([x],e.prototype,"setProperties",null),R([x],e.prototype,"changeEdgeId",null),R([x],e.prototype,"setStyle",null),R([x],e.prototype,"setStyles",null),R([x],e.prototype,"updateStyles",null),R([x],e.prototype,"setTextMode",null),R([x],e.prototype,"formatText",null),R([x],e.prototype,"resetTextPosition",null),R([x],e.prototype,"moveText",null),R([x],e.prototype,"setText",null),R([x],e.prototype,"updateText",null),R([x],e.prototype,"setAnchors",null),R([x],e.prototype,"setSelected",null),R([x],e.prototype,"setHovered",null),R([x],e.prototype,"setHitable",null),R([x],e.prototype,"setHittable",null),R([x],e.prototype,"openEdgeAnimation",null),R([x],e.prototype,"closeEdgeAnimation",null),R([x],e.prototype,"setElementState",null),R([x],e.prototype,"updateStartPoint",null),R([x],e.prototype,"moveStartPoint",null),R([x],e.prototype,"updateEndPoint",null),R([x],e.prototype,"moveEndPoint",null),R([x],e.prototype,"setZIndex",null),R([x],e.prototype,"initPoints",null),R([x],e.prototype,"updateAttributes",null),R([x],e.prototype,"getAdjustStart",null),R([x],e.prototype,"getAdjustEnd",null),R([x],e.prototype,"updateAfterAdjustStartAndEnd",null),e}(),Vm=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),je=function(){return je=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},je.apply(this,arguments)},It=function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},ti=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},gu=function(e){Vm(t,e);function t(r,n){var o=e.call(this,r,n)||this;return o.modelType=Y.BEZIER_EDGE,o.path="",o.initEdgeData(r),o.setAttributes(),o}return t.prototype.initEdgeData=function(r){this.offset=100,e.prototype.initEdgeData.call(this,r)},t.prototype.getEdgeStyle=function(){var r=this.graphModel.theme.bezier,n=e.prototype.getEdgeStyle.call(this),o=this.properties.style,i=o===void 0?{}:o;return je(je(je({},n),$(r)),$(i))},t.prototype.getTextPosition=function(){if(this.pointsList&&this.pointsList.length>0){var r=0,n=0;return this.pointsList.forEach(function(o){var i=o.x,a=o.y;r+=i,n+=a}),{x:r/this.pointsList.length,y:n/this.pointsList.length}}return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}},t.prototype.getData=function(){var r=e.prototype.getData.call(this),n=this.pointsList.map(function(o){var i=o.x,a=o.y;return{x:i,y:a}});return je(je({},r),{pointsList:n})},t.prototype.getControls=function(){var r=this.startPoint,n=this.endPoint,o=su({start:r,end:n,sourceNode:this.sourceNode,targetNode:this.targetNode,offset:this.offset});return o},t.prototype.getPath=function(r){var n=ti(r,4),o=n[0],i=n[1],a=n[2],s=n[3];return"M ".concat(o.x," ").concat(o.y,`
    C `).concat(i.x," ").concat(i.y,`,
    `).concat(a.x," ").concat(a.y,`,
    `).concat(s.x," ").concat(s.y)},t.prototype.initPoints=function(){this.pointsList.length>0?this.path=this.getPath(this.pointsList):this.updatePoints()},t.prototype.updatePoints=function(){var r=this.getControls(),n=r.sNext,o=r.ePre;this.updatePath(n,o)},t.prototype.updatePath=function(r,n){r=$(r),n=$(n);var o={x:this.startPoint.x,y:this.startPoint.y},i={x:this.endPoint.x,y:this.endPoint.y};if(!r||!n){var a=this.getControls();r=a.sNext,n=a.ePre}this.pointsList=[o,r,n,i],this.path=this.getPath(this.pointsList)},t.prototype.updateStartPoint=function(r){this.startPoint=Object.assign({},r),this.updatePoints()},t.prototype.updateEndPoint=function(r){this.endPoint=Object.assign({},r),this.updatePoints()},t.prototype.moveStartPoint=function(r,n){this.startPoint.x+=r,this.startPoint.y+=n;var o=ti(this.pointsList,3),i=o[1],a=o[2];i.x+=r,i.y+=n,this.updatePath(i,a)},t.prototype.moveEndPoint=function(r,n){this.endPoint.x+=r,this.endPoint.y+=n;var o=ti(this.pointsList,3),i=o[1],a=o[2];a.x+=r,a.y+=n,this.updatePath(i,a)},t.prototype.updateAdjustAnchor=function(r,n){var o;n==="sNext"?this.pointsList[1]=r:n==="ePre"&&(this.pointsList[2]=r),this.path=this.getPath(this.pointsList),!((o=this.text)===null||o===void 0)&&o.value&&this.setText(tt({},this.text,this.textPosition))},t.prototype.getAdjustStart=function(){return this.pointsList[0]||this.startPoint},t.prototype.getAdjustEnd=function(){var r=this.pointsList;return r[r.length-1]||this.endPoint},t.prototype.updateAfterAdjustStartAndEnd=function(r){var n=r.startPoint,o=r.endPoint,i=r.sourceNode,a=r.targetNode,s=su({start:n,end:o,sourceNode:i,targetNode:a,offset:this.offset}),u=s.sNext,l=s.ePre;this.pointsList=[n,u,l,o],this.initPoints()},It([b],t.prototype,"path",void 0),It([x],t.prototype,"initPoints",null),It([x],t.prototype,"updatePoints",null),It([x],t.prototype,"updateStartPoint",null),It([x],t.prototype,"updateEndPoint",null),It([x],t.prototype,"moveStartPoint",null),It([x],t.prototype,"moveEndPoint",null),It([x],t.prototype,"updateAdjustAnchor",null),It([x],t.prototype,"getAdjustStart",null),It([x],t.prototype,"getAdjustEnd",null),It([x],t.prototype,"updateAfterAdjustStartAndEnd",null),t}(Xo),Wm=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xr=function(){return Xr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Xr.apply(this,arguments)},Km=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},Zm=function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},_u=function(e){Wm(t,e);function t(){var r=e.apply(this,Zm([],Km(arguments),!1))||this;return r.modelType=Y.LINE_EDGE,r}return t.prototype.getEdgeStyle=function(){var r=this.graphModel.theme.line,n=e.prototype.getEdgeStyle.call(this),o=this.properties.style,i=o===void 0?{}:o;return Xr(Xr(Xr({},n),$(r)),$(i))},t.prototype.getTextPosition=function(){return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}},t}(Xo),qm=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hr=function(){return Hr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Hr.apply(this,arguments)},gt=function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},mu=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},Jm=function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},xu=function(e){qm(t,e);function t(){var r=e.apply(this,Jm([],mu(arguments),!1))||this;return r.modelType=Y.POLYLINE_EDGE,r.draggingPointList=[],r}return t.prototype.initEdgeData=function(r){this.offset=30,e.prototype.initEdgeData.call(this,r)},t.prototype.getEdgeStyle=function(){var r=this.graphModel.theme.polyline,n=e.prototype.getEdgeStyle.call(this),o=this.properties.style,i=o===void 0?{}:o;return Hr(Hr(Hr({},n),$(r)),$(i))},t.prototype.getTextPosition=function(){var r,n=(r=this.text)===null||r===void 0?void 0:r.value;if(this.dbClickPosition&&!n){var o=this.dbClickPosition,i=o.x,a=o.y;return{x:i,y:a}}var s=ze(this.points),u=mu(Z_(s),2),l=u[0],d=u[1];return{x:(l.x+d.x)/2,y:(l.y+d.y)/2}},t.prototype.getAfterAnchor=function(r,n,o){var i,a;return o.forEach(function(s){var u;r===ot.HORIZONTAL?u=Math.abs(n.y-s.y):r===ot.VERTICAL&&(u=Math.abs(n.x-s.x)),(!a||a>u)&&(a=u,i=s)}),i},t.prototype.getCrossPoint=function(r,n,o){var i;return r===ot.HORIZONTAL?i={x:o.x,y:n.y}:r===ot.VERTICAL&&(i={x:n.x,y:o.y}),i},t.prototype.removeCrossPoints=function(r,n,o){var i=o.map(function(y){return y});if(r===1){var a=i[r],s=i[n],u=i[r-1],l=nu(u,a,this.sourceNode);if(l){var d=ou(a,s,this.sourceNode);if(d){var f=iu(a,s,this.sourceNode);f&&(i[r]=f,i.splice(r-1,1),r--,n--)}}else{var c=this.sourceNode.anchors;c.forEach(function(y){if(y.x===u.x&&y.x===a.x||y.y===u.y&&y.y===a.y){var _=Ft(y.x,y.y,a.x,a.y),A=Ft(u.x,u.y,a.x,a.y);_<A&&(i[r-1]=y)}})}}if(n===o.length-2){var p=i[r],v=i[n],h=i[n+1],g=nu(v,h,this.targetNode);if(g){var d=ou(p,v,this.targetNode);if(d){var f=iu(p,v,this.targetNode);f&&(i[n]=f,i.splice(n+1,1))}}else{var c=this.targetNode.anchors;c.forEach(function(_){if(_.x===h.x&&_.x===v.x||_.y===h.y&&_.y===v.y){var A=Ft(_.x,_.y,v.x,v.y),M=Ft(h.x,h.y,v.x,v.y);A<M&&(i[n+1]=_)}})}}return i},t.prototype.getDraggingPoints=function(r,n,o,i,a){var s=a.map(function(d){return d}),u=this.getAfterAnchor(r,o,i),l=this.getCrossPoint(r,o,u);return n==="start"?(s.unshift(l),s.unshift(u)):(s.push(l),s.push(u)),s},t.prototype.updateCrossPoints=function(r){var n=r.map(function(_){return _}),o=r[0],i=r[1],a=r[n.length-2],s=r[n.length-1],u=this,l=u.sourceNode,d=u.targetNode,f=l.modelType,c=d.modelType,p=so(o,i),v=n[0];switch(f){case Y.RECT_NODE:if(l.radius!==0){var h=cu(o,l);h||(v=du(o,p,l))}break;case Y.CIRCLE_NODE:v=Ci(o,p,l);break;case Y.ELLIPSE_NODE:v=pu(o,p,l);break;case Y.DIAMOND_NODE:v=Tn(o,p,l);break;case Y.POLYGON_NODE:v=Tn(o,p,l);break}v&&(n[0]=v);var g=so(a,s),y=n[n.length-1];switch(c){case Y.RECT_NODE:if(d.radius!==0){var h=cu(s,d);h||(y=du(s,g,d))}break;case Y.CIRCLE_NODE:y=Ci(s,g,d);break;case Y.ELLIPSE_NODE:y=pu(s,g,d);break;case Y.DIAMOND_NODE:y=Tn(s,g,d);break;case Y.POLYGON_NODE:y=Tn(s,g,d);break}return y&&(n[n.length-1]=y),n},t.prototype.getData=function(){var r=e.prototype.getData.call(this),n=this.pointsList.map(function(o){var i=o.x,a=o.y;return{x:i,y:a}});return Object.assign({},r,{pointsList:n})},t.prototype.initPoints=function(){this.pointsList.length>0?this.points=this.pointsList.map(function(r){return"".concat(r.x,",").concat(r.y)}).join(" "):this.updatePoints()},t.prototype.updatePoints=function(){var r=ru({x:this.startPoint.x,y:this.startPoint.y},{x:this.endPoint.x,y:this.endPoint.y},this.sourceNode,this.targetNode,this.offset||0);this.pointsList=r,this.points=r.map(function(n){return"".concat(n.x,",").concat(n.y)}).join(" ")},t.prototype.updateStartPoint=function(r){this.startPoint=Object.assign({},r),this.updatePoints()},t.prototype.moveStartPoint=function(r,n){this.startPoint.x+=r,this.startPoint.y+=n,this.updatePoints()},t.prototype.updateEndPoint=function(r){this.endPoint=Object.assign({},r),this.updatePoints()},t.prototype.moveEndPoint=function(r,n){this.endPoint.x+=r,this.endPoint.y+=n,this.updatePoints()},t.prototype.updatePointsList=function(r,n){this.pointsList.forEach(function(a){a.x+=r,a.y+=n});var o=this.pointsList[0];this.startPoint=Object.assign({},o);var i=this.pointsList[this.pointsList.length-1];this.endPoint=Object.assign({},i),this.initPoints()},t.prototype.dragAppendStart=function(){this.draggingPointList=this.pointsList.map(function(r){return r})},t.prototype.dragAppendSimple=function(r,n){var o;this.isDragging=!0;var i=r.start,a=r.end,s=r.startIndex,u=r.endIndex,l=r.direction,d=this.pointsList,f=d;return l===ot.HORIZONTAL?(d[s]={x:i.x,y:i.y+n.y},d[u]={x:a.x,y:a.y+n.y},f=this.pointsList.map(function(c){return c})):l===ot.VERTICAL&&(d[s]={x:i.x+n.x,y:i.y},d[u]={x:a.x+n.x,y:a.y},f=this.pointsList.map(function(c){return c})),this.updatePointsAfterDrag(f),this.draggingPointList=f,!((o=this.text)===null||o===void 0)&&o.value&&this.setText(tt({},this.text,this.textPosition)),{start:tt({},d[s]),end:tt({},d[u]),startIndex:s,endIndex:u,direction:l}},t.prototype.dragAppend=function(r,n){var o;this.isDragging=!0;var i=r.start,a=r.end,s=r.startIndex,u=r.endIndex,l=r.direction,d=this.pointsList;if(l===ot.HORIZONTAL){d[s]={x:i.x,y:i.y+n.y},d[u]={x:a.x,y:a.y+n.y};var f=this.pointsList.map(function(g){return g});if(s!==0&&u!==this.pointsList.length-1&&(f=this.removeCrossPoints(s,u,f)),s===0){var c={x:i.x,y:i.y+n.y},p=we(c,this.sourceNode);if(!p){var v=this.sourceNode.anchors;f=this.getDraggingPoints(l,"start",c,v,f)}}if(u===this.pointsList.length-1){var h={x:a.x,y:a.y+n.y},p=we(h,this.targetNode);if(!p){var v=this.targetNode.anchors;f=this.getDraggingPoints(l,"end",h,v,f)}}this.updatePointsAfterDrag(f),this.draggingPointList=f}else if(l===ot.VERTICAL){d[s]={x:i.x+n.x,y:i.y},d[u]={x:a.x+n.x,y:a.y};var f=this.pointsList.map(function(y){return y});if(s!==0&&u!==this.pointsList.length-1&&(f=this.removeCrossPoints(s,u,f)),s===0){var c={x:i.x+n.x,y:i.y},p=we(c,this.sourceNode);if(!p){var v=this.sourceNode.anchors;f=this.getDraggingPoints(l,"start",c,v,f)}}if(u===this.pointsList.length-1){var h={x:a.x+n.x,y:a.y},p=we(h,this.targetNode);if(!p){var v=this.targetNode.anchors;f=this.getDraggingPoints(l,"end",h,v,f)}}this.updatePointsAfterDrag(f),this.draggingPointList=f}return!((o=this.text)===null||o===void 0)&&o.value&&this.setText(tt({},this.text,this.textPosition)),{start:tt({},d[s]),end:tt({},d[u]),startIndex:s,endIndex:u,direction:l}},t.prototype.dragAppendEnd=function(){if(this.draggingPointList){var r=Nf(ze(this.points));this.pointsList=r.map(function(i){return i}),this.draggingPointList=[];var n=r[0];this.startPoint=tt({},n);var o=r[r.length-1];this.endPoint=tt({},o)}this.isDragging=!1},t.prototype.updatePointsAfterDrag=function(r){var n=this.updateCrossPoints(r);this.points=n.map(function(o){return"".concat(o.x,",").concat(o.y)}).join(" ")},t.prototype.getAdjustStart=function(){return this.pointsList[0]||this.startPoint},t.prototype.getAdjustEnd=function(){var r=this.pointsList;return r[r.length-1]||this.endPoint},t.prototype.updateAfterAdjustStartAndEnd=function(r){var n=r.startPoint,o=r.endPoint,i=r.sourceNode,a=r.targetNode;this.pointsList=ru({x:n.x,y:n.y},{x:o.x,y:o.y},i,a,this.offset||0),this.initPoints()},gt([b],t.prototype,"dbClickPosition",void 0),gt([x],t.prototype,"initPoints",null),gt([x],t.prototype,"updatePoints",null),gt([x],t.prototype,"updateStartPoint",null),gt([x],t.prototype,"moveStartPoint",null),gt([x],t.prototype,"updateEndPoint",null),gt([x],t.prototype,"moveEndPoint",null),gt([x],t.prototype,"updatePointsList",null),gt([x],t.prototype,"dragAppendStart",null),gt([x],t.prototype,"dragAppendSimple",null),gt([x],t.prototype,"dragAppend",null),gt([x],t.prototype,"dragAppendEnd",null),gt([x],t.prototype,"updatePointsAfterDrag",null),gt([x],t.prototype,"getAdjustStart",null),gt([x],t.prototype,"getAdjustEnd",null),gt([x],t.prototype,"updateAfterAdjustStartAndEnd",null),t}(Xo),ft=function(){return ft=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ft.apply(this,arguments)},j=function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},Eu=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Qm=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},Ne=function(){function e(t,r){var n;this.BaseType=at.NODE,this.id="",this.type="",this.x=0,this.y=0,this.textMode=Wt.TEXT,this.text={value:"",x:0,y:0,draggable:!1,editable:!0},this._width=100,this._height=80,this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.anchorsOffset=[],this.virtual=!1,this.isSelected=!1,this.isHovered=!1,this.isShowAnchor=!1,this.isDragging=!1,this.isHitable=!0,this.isHittable=!0,this.draggable=!0,this.visible=!0,this.rotatable=!0,this.resizable=!0,this.zIndex=1,this.state=V.DEFAULT,this.autoToFront=!0,this.style={},this._rotate=0,this.modelType=Y.NODE,this.additionStateData={},this.targetRules=[],this.sourceRules=[],this.moveRules=[],this.resizeRules=[],this.hasSetTargetRules=!1,this.hasSetSourceRules=!1,this.graphModel=r,this.properties=(n=t.properties)!==null&&n!==void 0?n:{},this.initNodeData(t),this.setAttributes()}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t;var r=this,n=r.x,o=n===void 0?0:n,i=r.y,a=i===void 0?0:i;this.transform=new $o(-o,-a).rotate(t).translate(o,a).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"incoming",{get:function(){return{nodes:this.graphModel.getNodeIncomingNode(this.id),edges:this.graphModel.getNodeIncomingEdge(this.id)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"outgoing",{get:function(){return{nodes:this.graphModel.getNodeOutgoingNode(this.id),edges:this.graphModel.getNodeOutgoingEdge(this.id)}},enumerable:!1,configurable:!0}),e.prototype.initNodeData=function(t){if(t.properties||(t.properties={}),!t.id){var r=this.graphModel.idGenerator,n=r&&r(t.type),o=this.createId();t.id=o||n||He()}this.formatText(t),tt(this,lm(t));var i=this.graphModel.overlapMode;i===Yt.INCREASE&&(this.zIndex=t.zIndex||Na())},e.prototype.setAttributes=function(){},e.prototype.createId=function(){return null},e.prototype.setTextMode=function(t){this.textMode=t},e.prototype.formatText=function(t){var r,n,o,i=t.x,a=t.y,s=t.text,u={value:"",x:i,y:a,draggable:!1,editable:!0};s&&(typeof s=="string"?u.value=s:(u=ft(ft({},u),{x:(r=s.x)!==null&&r!==void 0?r:i,y:(n=s.y)!==null&&n!==void 0?n:a,value:(o=s.value)!==null&&o!==void 0?o:""}),_r(s.draggable)||(u.draggable=s.draggable),_r(s.editable)||(u.editable=s.editable))),t.text=u},e.prototype.resize=function(t){var r=t.width,n=t.height,o=t.deltaX,i=t.deltaY,a=this.isAllowResizeNode(o,i,r,n);return a?(this.move(o/2,i/2),this.width=r,this.height=n,this.setProperties({width:r,height:n}),this.getData()):this.getData()},e.prototype.proportionalResize=function(){},e.prototype.getData=function(){var t=this.text,r=t.x,n=t.y,o=t.value,i=this.properties;pr(i)&&(i=te(i)),ir(i.width)&&(i.width=this.width),ir(i.height)&&(i.height=this.height);var a={id:this.id,type:this.type,x:this.x,y:this.y,properties:i};return this.rotate&&(a.rotate=this.rotate),this.graphModel.overlapMode===Yt.INCREASE&&(a.zIndex=this.zIndex),o&&(a.text={x:r,y:n,value:o}),a},e.prototype.getHistoryData=function(){return this.getData()},e.prototype.getProperties=function(){return te(this.properties)},e.prototype.getOuterGAttributes=function(){return{className:""}},e.prototype.getNodeStyle=function(){return ft(ft({},this.graphModel.theme.baseNode),this.style)},e.prototype.getTextStyle=function(){var t=this.graphModel.theme.nodeText,r=this.properties.textStyle,n=r===void 0?{}:r;return ft(ft({},$(t)),$(n))},e.prototype.getRotateControlStyle=function(){var t=this.graphModel.theme.rotateControl;return $(t)},e.prototype.getResizeControlStyle=function(){var t=this.graphModel.theme.resizeControl;return $(t)},e.prototype.getResizeOutlineStyle=function(){var t=this.graphModel.theme.resizeOutline;return $(t)},e.prototype.getAnchorStyle=function(t){var r=this.graphModel.theme.anchor;return $(r)},e.prototype.getAnchorLineStyle=function(t){var r=this.graphModel.theme.anchorLine;return $(r)},e.prototype.getOutlineStyle=function(){var t=this.graphModel.theme.outline;return $(t)},e.prototype.isAllowConnectedAsSource=function(t,r,n,o){var i=this.hasSetSourceRules?this.sourceRules:this.getConnectedSourceRules();this.hasSetSourceRules=!0;for(var a=!0,s="",u=0;u<i.length;u++){var l=i[u];if(!l.validate.call(this,this,t,r,n,o)){a=!1,s=l.message;break}}return{isAllPass:a,msg:s}},e.prototype.getConnectedSourceRules=function(){return this.sourceRules},e.prototype.isAllowConnectedAsTarget=function(t,r,n,o){var i=this.hasSetTargetRules?this.targetRules:this.getConnectedTargetRules();this.hasSetTargetRules=!0;for(var a=!0,s="",u=0;u<i.length;u++){var l=i[u];if(!l.validate.call(this,t,this,r,n,o)){a=!1,s=l.message;break}}return{isAllPass:a,msg:s}},e.prototype.isAllowMoveNode=function(t,r){var n,o,i=!0,a=!0,s=this.moveRules.concat(this.graphModel.nodeMoveRules);try{for(var u=Eu(s),l=u.next();!l.done;l=u.next()){var d=l.value,f=d(this,t,r);if(!f)return!1;if(typeof f=="object"){var c=f;if(!c.x&&!c.y)return!1;i=i&&c.x,a=a&&c.y}}}catch(p){n={error:p}}finally{try{l&&!l.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}return{x:i,y:a}},e.prototype.getConnectedTargetRules=function(){return this.targetRules},e.prototype.getAnchorsByOffset=function(){var t=this,r=t.anchorsOffset,n=t.id,o=t.x,i=t.y;return r&&r.length>0?r.map(function(a,s){return a.length?(a=a,{id:"".concat(n,"_").concat(s),x:o+a[0],y:i+a[1]}):(a=a,ft(ft({},a),{x:o+a.x,y:i+a.y,id:a.id||"".concat(n,"_").concat(s)}))}):this.getDefaultAnchor()},e.prototype.getDefaultAnchor=function(){return[]},e.prototype.getTargetAnchor=function(t){return am(t,this)},e.prototype.getBounds=function(){return{minX:this.x-this.width/2,minY:this.y-this.height/2,maxX:this.x+this.width/2,maxY:this.y+this.height/2}},Object.defineProperty(e.prototype,"anchors",{get:function(){var t=this.getAnchorsByOffset(),r=this,n=r.x,o=r.y,i=r.rotate;return t.forEach(function(a){var s=a.x,u=a.y,l=Qm(new Bo([s,u,1]).translate(-n,-o).rotate(i).translate(n,o)[0],2),d=l[0],f=l[1];a.x=d,a.y=f}),t},enumerable:!1,configurable:!0}),e.prototype.getAnchorInfo=function(t){if(!ir(t))for(var r=0;r<this.anchors.length;r++){var n=this.anchors[r];if(n.id===t)return n}},e.prototype.addNodeMoveRules=function(t){this.moveRules.includes(t)||this.moveRules.push(t)},e.prototype.isAllowMoveByXORY=function(t,r,n){var o,i;if(n)o=!0,i=!0;else{var a=this.isAllowMoveNode(t,r);typeof a=="boolean"?(o=a,i=a):(o=a.x,i=a.y)}return{isAllowMoveX:o,isAllowMoveY:i}},e.prototype.move=function(t,r,n){n===void 0&&(n=!1);var o=this.isAllowMoveByXORY(t,r,n),i=o.isAllowMoveX,a=o.isAllowMoveY;return i&&(this.x=this.x+t,this.text&&this.moveText(t,0)),a&&(this.y=this.y+r,this.text&&this.moveText(0,r)),(i||a)&&(this.rotate=this._rotate),i||a},e.prototype.getMoveDistance=function(t,r,n){n===void 0&&(n=!1);var o=this.isAllowMoveByXORY(t,r,n),i=o.isAllowMoveX,a=o.isAllowMoveY,s=0,u=0;return i&&t&&(this.x=this.x+t,this.text&&this.moveText(t,0),s=t),a&&r&&(this.y=this.y+r,this.text&&this.moveText(0,r),u=r),[s,u]},e.prototype.moveTo=function(t,r,n){n===void 0&&(n=!1);var o=t-this.x,i=r-this.y;return!n&&!this.isAllowMoveNode(o,i)?!1:(this.text&&this.moveText(o,i),this.x=t,this.y=r,!0)},e.prototype.moveText=function(t,r){var n=this.text,o=n.x,i=n.y,a=n.value,s=n.draggable,u=n.editable;this.text={value:a,editable:u,draggable:s,x:o+t,y:i+r}},e.prototype.updateText=function(t){this.text=ft(ft({},te(this.text)),{value:t})},e.prototype.addNodeResizeRules=function(t){this.resizeRules.includes(t)||this.resizeRules.push(t)},e.prototype.isAllowResizeNode=function(t,r,n,o){var i,a,s=this.resizeRules.concat(this.graphModel.nodeResizeRules);try{for(var u=Eu(s),l=u.next();!l.done;l=u.next()){var d=l.value,f=d(this,t,r,n,o);if(!f)return!1}}catch(c){i={error:c}}finally{try{l&&!l.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}return!0},e.prototype.setSelected=function(t){t===void 0&&(t=!0),this.isSelected=t},e.prototype.setHovered=function(t){t===void 0&&(t=!0),this.isHovered=t,this.setIsShowAnchor(t)},e.prototype.setIsShowAnchor=function(t){t===void 0&&(t=!0),this.isShowAnchor=t},e.prototype.setRotatable=function(t){t===void 0&&(t=!0),this.rotatable=t},e.prototype.setResizable=function(t){t===void 0&&(t=!0),this.resizable=t},e.prototype.setHitable=function(t){t===void 0&&(t=!0),this.isHitable=t},e.prototype.setHittable=function(t){t===void 0&&(t=!0),this.isHittable=t},e.prototype.setElementState=function(t,r){this.state=t,this.additionStateData=r},e.prototype.updateProperties=function(t,r){var n=te(this.properties);this.properties=t,this.setAttributes(),this.graphModel.eventCenter.emit(C.NODE_PROPERTIES_CHANGE,{id:this.id,keys:r,preProperties:n,properties:t})},e.prototype.setProperty=function(t,r){var n=te(this.properties),o=$(n);S_(o,t,_t(r)),this.updateProperties(o,[t])},e.prototype.setProperties=function(t){var r=te(this.properties),n=ft(ft({},r),_t(t)),o=[];x_(t,function(i,a){(Ks(r,a)&&r[a]!==i||!Ks(r,a))&&o.push(a)}),this.updateProperties(n,o)},e.prototype.deleteProperty=function(t){delete this.properties[t],this.setAttributes()},e.prototype.setStyle=function(t,r){var n;this.style=ft(ft({},this.style),(n={},n[t]=_t(r),n))},e.prototype.setStyles=function(t){this.style=ft(ft({},this.style),_t(t))},e.prototype.updateStyles=function(t){this.style=ft({},_t(t))},e.prototype.setZIndex=function(t){t===void 0&&(t=1),this.zIndex=t},e.prototype.updateAttributes=function(t){tt(this,t)},e.BaseType=at.NODE,j([b],e.prototype,"type",void 0),j([b],e.prototype,"x",void 0),j([b],e.prototype,"y",void 0),j([b],e.prototype,"textMode",void 0),j([b],e.prototype,"text",void 0),j([b],e.prototype,"properties",void 0),j([b],e.prototype,"_width",void 0),j([b],e.prototype,"_height",void 0),j([b],e.prototype,"anchorsOffset",void 0),j([b],e.prototype,"isSelected",void 0),j([b],e.prototype,"isHovered",void 0),j([b],e.prototype,"isShowAnchor",void 0),j([b],e.prototype,"isDragging",void 0),j([b],e.prototype,"isHitable",void 0),j([b],e.prototype,"isHittable",void 0),j([b],e.prototype,"draggable",void 0),j([b],e.prototype,"visible",void 0),j([b],e.prototype,"rotatable",void 0),j([b],e.prototype,"resizable",void 0),j([b],e.prototype,"zIndex",void 0),j([b],e.prototype,"state",void 0),j([b],e.prototype,"autoToFront",void 0),j([b],e.prototype,"style",void 0),j([b],e.prototype,"transform",void 0),j([b],e.prototype,"_rotate",void 0),j([et],e.prototype,"incoming",null),j([et],e.prototype,"outgoing",null),j([x],e.prototype,"setTextMode",null),j([x],e.prototype,"addNodeMoveRules",null),j([x],e.prototype,"move",null),j([x],e.prototype,"getMoveDistance",null),j([x],e.prototype,"moveTo",null),j([x],e.prototype,"moveText",null),j([x],e.prototype,"updateText",null),j([x],e.prototype,"addNodeResizeRules",null),j([x],e.prototype,"setSelected",null),j([x],e.prototype,"setHovered",null),j([x],e.prototype,"setIsShowAnchor",null),j([x],e.prototype,"setRotatable",null),j([x],e.prototype,"setResizable",null),j([x],e.prototype,"setHitable",null),j([x],e.prototype,"setHittable",null),j([x],e.prototype,"setElementState",null),j([x],e.prototype,"setProperty",null),j([x],e.prototype,"setProperties",null),j([x],e.prototype,"deleteProperty",null),j([x],e.prototype,"setStyle",null),j([x],e.prototype,"setStyles",null),j([x],e.prototype,"updateStyles",null),j([x],e.prototype,"setZIndex",null),j([x],e.prototype,"updateAttributes",null),e}(),tx=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yr=function(){return Yr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Yr.apply(this,arguments)},ei=function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},bu=function(e){tx(t,e);function t(r,n){var o=e.call(this,r,n)||this;return o.modelType=Y.CIRCLE_NODE,o.r=50,o.initNodeData(r),o.setAttributes(),o}return Object.defineProperty(t.prototype,"width",{get:function(){return this.r*2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.r*2},enumerable:!1,configurable:!0}),t.prototype.setAttributes=function(){e.prototype.setAttributes.call(this);var r=this.properties.r;r&&(this.r=r)},t.prototype.getNodeStyle=function(){var r=e.prototype.getNodeStyle.call(this),n=this.graphModel.theme.circle,o=this.properties.style,i=o===void 0?{}:o;return Yr(Yr(Yr({},r),$(n)),$(i))},t.prototype.getDefaultAnchor=function(){var r=this,n=r.x,o=r.y,i=r.r;return[{x:n,y:o-i,id:"".concat(this.id,"_0")},{x:n+i,y:o,id:"".concat(this.id,"_1")},{x:n,y:o+i,id:"".concat(this.id,"_2")},{x:n-i,y:o,id:"".concat(this.id,"_3")}]},t.prototype.resize=function(r){var n=r.width,o=r.deltaX,i=r.deltaY;return this.move(o/2,i/2),this.r=n,this.setProperties({r:n}),this.getData()},ei([b],t.prototype,"r",void 0),ei([et],t.prototype,"width",null),ei([et],t.prototype,"height",null),t}(Ne),ex=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fr=function(){return Fr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Fr.apply(this,arguments)},Ze=function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},Pn=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},Ou=function(e){ex(t,e);function t(r,n){var o=e.call(this,r,n)||this;return o.modelType=Y.DIAMOND_NODE,o.rx=30,o.ry=50,o.initNodeData(r),o.setAttributes(),o}return t.prototype.setAttributes=function(){e.prototype.setAttributes.call(this);var r=this.properties,n=r.rx,o=r.ry;n&&(this.rx=n),o&&(this.ry=o)},t.prototype.getNodeStyle=function(){var r=e.prototype.getNodeStyle.call(this),n=this.graphModel.theme.diamond,o=this.properties.style,i=o===void 0?{}:o;return Fr(Fr(Fr({},r),$(n)),$(i))},Object.defineProperty(t.prototype,"points",{get:function(){var r=this,n=r.x,o=r.y,i=r.rx,a=r.ry;return[[n,o-a],[n+i,o],[n,o+a],[n-i,o]]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pointsPosition",{get:function(){return ce(this.points,function(r){var n=Pn(r,2),o=n[0],i=n[1];return{x:o,y:i}})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){var r=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER;return st(this.points,function(o){var i=Pn(o,1),a=i[0];a<r&&(r=a),a>n&&(n=a)}),n-r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){var r=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER;return st(this.points,function(o){var i=Pn(o,2),a=i[1];a<r&&(r=a),a>n&&(n=a)}),n-r},enumerable:!1,configurable:!0}),t.prototype.getDefaultAnchor=function(){var r=this;return ce(this.points,function(n,o){var i=Pn(n,2),a=i[0],s=i[1];return{x:a,y:s,id:"".concat(r.id,"_").concat(o)}})},t.prototype.resize=function(r){var n=r.width,o=r.height,i=r.deltaX,a=r.deltaY;return this.move(i/2,a/2),this.rx=n,this.ry=o,this.setProperties({rx:n,ry:o}),this.getData()},Ze([b],t.prototype,"rx",void 0),Ze([b],t.prototype,"ry",void 0),Ze([et],t.prototype,"points",null),Ze([et],t.prototype,"pointsPosition",null),Ze([et],t.prototype,"width",null),Ze([et],t.prototype,"height",null),t}(Ne),rx=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gr=function(){return Gr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Gr.apply(this,arguments)},Dn=function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},wu=function(e){rx(t,e);function t(r,n){var o=e.call(this,r,n)||this;return o.modelType=Y.ELLIPSE_NODE,o.rx=30,o.ry=45,o.initNodeData(r),o.setAttributes(),o}return t.prototype.setAttributes=function(){e.prototype.setAttributes.call(this);var r=this.properties,n=r.rx,o=r.ry;n&&(this.rx=n),o&&(this.ry=o)},t.prototype.getNodeStyle=function(){var r=e.prototype.getNodeStyle.call(this),n=this.graphModel.theme.ellipse,o=this.properties.style,i=o===void 0?{}:o;return Gr(Gr(Gr({},r),$(n)),$(i))},Object.defineProperty(t.prototype,"width",{get:function(){return this.rx*2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.ry*2},enumerable:!1,configurable:!0}),t.prototype.getDefaultAnchor=function(){var r=this,n=r.x,o=r.y,i=r.rx,a=r.ry;return[{x:n,y:o-a,id:"".concat(this.id,"_0")},{x:n+i,y:o,id:"".concat(this.id,"_1")},{x:n,y:o+a,id:"".concat(this.id,"_2")},{x:n-i,y:o,id:"".concat(this.id,"_3")}]},t.prototype.resize=function(r){var n=r.width,o=r.height,i=r.deltaX,a=r.deltaY;return this.move(i/2,a/2),this.rx=n,this.ry=o,this.setProperties({rx:n,ry:o}),this.getData()},Dn([b],t.prototype,"rx",void 0),Dn([b],t.prototype,"ry",void 0),Dn([et],t.prototype,"width",null),Dn([et],t.prototype,"height",null),t}(Ne),nx=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zr=function(){return zr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},zr.apply(this,arguments)},Nn=function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},Cn=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},Su=function(e){nx(t,e);function t(r,n){var o=e.call(this,r,n)||this;return o.modelType=Y.POLYGON_NODE,o.points=[[50,0],[100,50],[50,100],[0,50]],o.initNodeData(r),o.setAttributes(),o}return t.prototype.setAttributes=function(){e.prototype.setAttributes.call(this);var r=this.properties,n=r.points,o=r.width,i=r.height,a=n||this.points;this.points=rm(a,o,i)},t.prototype.getNodeStyle=function(){var r=e.prototype.getNodeStyle.call(this),n=this.graphModel.theme.polygon,o=this.properties.style,i=o===void 0?{}:o;return zr(zr(zr({},r),$(n)),$(i))},Object.defineProperty(t.prototype,"pointsPosition",{get:function(){var r=this,n=r.x,o=r.y,i=r.width,a=r.height;return this.points.map(function(s){return{x:s[0]+n-i/2,y:s[1]+o-a/2}})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){var r=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(o){var i=Cn(o,1),a=i[0];a<r&&(r=a),a>n&&(n=a)}),n-r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){var r=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(o){var i=Cn(o,2),a=i[1];a<r&&(r=a),a>n&&(n=a)}),n-r},enumerable:!1,configurable:!0}),t.prototype.getDefaultAnchor=function(){var r=this,n=this,o=n.x,i=n.y,a=n.width,s=n.height,u=n.points;return u.map(function(l,d){var f=Cn(l,2),c=f[0],p=f[1];return{x:o+c-a/2,y:i+p-s/2,id:"".concat(r.id,"_").concat(d)}})},t.prototype.resize=function(r){var n=this,o=r.width,i=r.height,a=r.deltaX,s=r.deltaY;this.move(a/2,s/2);var u=ce(this.points,function(l){var d=Cn(l,2),f=d[0],c=d[1];return[f*o/n.width,c*i/n.height]});return this.points=u,this.properties.points=u,this.getData()},Nn([b],t.prototype,"points",void 0),Nn([et],t.prototype,"pointsPosition",null),Nn([et],t.prototype,"width",null),Nn([et],t.prototype,"height",null),t}(Ne),ox=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),kr=function(){return kr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},kr.apply(this,arguments)},ix=function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},Au=function(e){ox(t,e);function t(r,n){var o=e.call(this,r,n)||this;return o.modelType=Y.RECT_NODE,o.radius=0,o.initNodeData(r),o.setAttributes(),o}return t.prototype.setAttributes=function(){e.prototype.setAttributes.call(this);var r=this.properties,n=r.width,o=r.height,i=r.radius;ir(n)||(this.width=n),ir(o)||(this.height=o),ir(i)||(this.radius=i)},t.prototype.getDefaultAnchor=function(){var r=this,n=r.x,o=r.y,i=r.width,a=r.height;return[{x:n,y:o-a/2,id:"".concat(this.id,"_0")},{x:n+i/2,y:o,id:"".concat(this.id,"_1")},{x:n,y:o+a/2,id:"".concat(this.id,"_2")},{x:n-i/2,y:o,id:"".concat(this.id,"_3")}]},t.prototype.getNodeStyle=function(){var r=e.prototype.getNodeStyle.call(this),n=this.graphModel.theme.rect,o=this.properties.style,i=o===void 0?{}:o;return kr(kr(kr({},r),$(n)),$(i))},ix([b],t.prototype,"radius",void 0),t}(Ne),ax=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ur=function(){return Ur=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ur.apply(this,arguments)},Mu=function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},sx=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},ux=function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},Tu=function(e){ax(t,e);function t(){var r=e.apply(this,ux([],sx(arguments),!1))||this;return r.modelType=Y.TEXT_NODE,r}return t.prototype.getTextStyle=function(){var r=e.prototype.getTextStyle.call(this),n=this.graphModel.theme.text,o=this.properties.textStyle;return Ur(Ur(Ur({},r),$(n)),$(o))},Object.defineProperty(t.prototype,"width",{get:function(){var r=String(this.text.value).split(/[\r\n]/g),n=this.getTextStyle().fontSize,o=vu({rows:r,fontSize:n,rowsLength:r.length}).width;return o},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){var r=String(this.text.value).split(/[\r\n]/g),n=this.getTextStyle().fontSize,o=vu({rows:r,fontSize:n,rowsLength:r.length}).height;return o},enumerable:!1,configurable:!0}),Mu([et],t.prototype,"width",null),Mu([et],t.prototype,"height",null),t}(Ne),lx=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Pu=function(e){lx(t,e);function t(r,n){var o=e.call(this,r,n)||this;return o.modelType=Y.HTML_NODE,o.setAttributes(),o}return t.prototype.setAttributes=function(){e.prototype.setAttributes.call(this);var r=this.properties,n=r.width,o=r.height;n&&(this.width=n),o&&(this.height=o)},t.prototype.getDefaultAnchor=function(){var r=this,n=r.x,o=r.y,i=r.width,a=r.height;return[{x:n,y:o-a/2,id:"".concat(this.id,"_0")},{x:n+i/2,y:o,id:"".concat(this.id,"_1")},{x:n,y:o+a/2,id:"".concat(this.id,"_2")},{x:n-i/2,y:o,id:"".concat(this.id,"_3")}]},t}(Ne),K=function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},fx={stopZoomGraph:!1,stopScrollGraph:!1,stopMoveGraph:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,adjustNodePosition:!1,hideAnchors:!0,allowRotate:!1,allowResize:!1,nodeSelectedOutline:!0,textEdit:!1,nodeTextEdit:!1,edgeTextEdit:!1,textDraggable:!1,nodeTextDraggable:!1,edgeTextDraggable:!1},Rn=["isSilentMode","stopZoomGraph","stopScrollGraph","stopMoveGraph","adjustEdge","adjustEdgeMiddle","adjustEdgeStartAndEnd","adjustEdgeStart","adjustEdgeEnd","adjustNodePosition","hideAnchors","allowRotate","allowResize","autoExpand","hoverOutline","nodeSelectedOutline","edgeSelectedOutline","textEdit","nodeTextEdit","edgeTextEdit","textDraggable","nodeTextDraggable","edgeTextDraggable","multipleSelectKey","textMode","nodeTextMode","edgeTextMode","nodeTextMultiple","edgeTextMultiple","nodeTextVertical","edgeTextVertical"],dx=function(){function e(t){this.isSilentMode=!1,this.stopZoomGraph=!1,this.stopMoveGraph=!1,this.stopScrollGraph=!1,this.textMode=Wt.TEXT,this.textEdit=!0,this.textDraggable=!1,this.nodeTextEdit=!0,this.nodeTextDraggable=!1,this.nodeTextMultiple=!1,this.nodeTextVertical=!1,this.nodeTextMode=Wt.TEXT,this.edgeTextMode=Wt.TEXT,this.edgeTextEdit=!0,this.edgeTextDraggable=!1,this.edgeTextMultiple=!1,this.edgeTextVertical=!1,this.hideAnchors=!1,this.allowRotate=!1,this.allowResize=!1,this.hoverOutline=!0,this.nodeSelectedOutline=!0,this.adjustNodePosition=!0,this.autoExpand=!1,this.adjustEdge=!0,this.adjustEdgeMiddle=!1,this.adjustEdgeStartAndEnd=!1,this.adjustEdgeStart=!1,this.adjustEdgeEnd=!1,this.edgeSelectedOutline=!0,this.multipleSelectKey="",tt(this,this.computeConfig(t))}return e.prototype.updateEditConfig=function(t){var r=this.computeConfig(t);tt(this,r)},e.prototype.computeConfig=function(t){var r=t.isSilentMode,n=t.textDraggable,o=t.textMode,i=t.textEdit,a=t.adjustEdgeStartAndEnd,s={};if(r===!1&&tt(s,this.stagedConfig),r===!0&&r!==this.isSilentMode){var u=er(fx,Rn);this.stagedConfig=er(this,Rn),tt(s,u)}_r(i)||tt(s,{nodeTextEdit:i,edgeTextEdit:i}),_r(n)||tt(s,{nodeTextDraggable:n,edgeTextDraggable:n}),o&&tt(s,{nodeTextMode:o,edgeTextMode:o}),v_(a)&&tt(s,{adjustEdgeStart:a,adjustEdgeEnd:a});var l=er(t,Rn);return tt(s,l)},e.prototype.updateTextMode=function(t){this.textMode=t,this.edgeTextMode=t,this.nodeTextMode=t},e.prototype.getConfig=function(){return er(this,Rn)},K([b],e.prototype,"isSilentMode",void 0),K([b],e.prototype,"stopZoomGraph",void 0),K([b],e.prototype,"stopMoveGraph",void 0),K([b],e.prototype,"stopScrollGraph",void 0),K([b],e.prototype,"textMode",void 0),K([b],e.prototype,"textEdit",void 0),K([b],e.prototype,"textDraggable",void 0),K([b],e.prototype,"nodeTextEdit",void 0),K([b],e.prototype,"nodeTextDraggable",void 0),K([b],e.prototype,"nodeTextMultiple",void 0),K([b],e.prototype,"nodeTextVertical",void 0),K([b],e.prototype,"nodeTextMode",void 0),K([b],e.prototype,"edgeTextMode",void 0),K([b],e.prototype,"edgeTextEdit",void 0),K([b],e.prototype,"edgeTextDraggable",void 0),K([b],e.prototype,"edgeTextMultiple",void 0),K([b],e.prototype,"edgeTextVertical",void 0),K([b],e.prototype,"hideAnchors",void 0),K([b],e.prototype,"allowRotate",void 0),K([b],e.prototype,"allowResize",void 0),K([b],e.prototype,"hoverOutline",void 0),K([b],e.prototype,"nodeSelectedOutline",void 0),K([b],e.prototype,"adjustNodePosition",void 0),K([b],e.prototype,"autoExpand",void 0),K([b],e.prototype,"adjustEdge",void 0),K([b],e.prototype,"adjustEdgeMiddle",void 0),K([b],e.prototype,"adjustEdgeStartAndEnd",void 0),K([b],e.prototype,"adjustEdgeStart",void 0),K([b],e.prototype,"adjustEdgeEnd",void 0),K([b],e.prototype,"edgeSelectedOutline",void 0),K([x],e.prototype,"updateEditConfig",null),K([x],e.prototype,"updateTextMode",null),e}(),cx="*",px=function(){function e(){this._events={}}return e.prototype.on=function(t,r,n){var o=this;t==null||t.split(",").forEach(function(i){i=i.trim(),o._events[i]||(o._events[i]=[]),o._events[i].push({callback:r,once:!!n})})},e.prototype.once=function(t,r){var n=this;t==null||t.split(",").forEach(function(o){o=o.trim(),n.on(o,r,!0)})},e.prototype.emit=function(t,r){var n=this;t==null||t.split(",").forEach(function(o){var i=n._events[o]||[],a=n._events[cx]||[],s=function(u){for(var l=u.length,d=0;d<l;d++)if(u[d]){var f=u[d],c=f.callback,p=f.once;p&&(u.splice(d,1),u.length===0&&delete n._events[o],l--,d--),c.apply(n,[r])}};s(i),s(a)})},e.prototype.off=function(t,r){var n=this;t||(this._events={}),t.split(",").forEach(function(o){if(!r)delete n._events[o];else{for(var i=n._events[o]||[],a=i.length,s=0;s<a;s++)i[s].callback===r&&(i.splice(s,1),a--,s--);i.length===0&&delete n._events[o]}})},e.prototype.getEvents=function(){return this._events},e}(),nr=function(){return nr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},nr.apply(this,arguments)},N=function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},dt=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},Dt=function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},hx=function(){function e(t){this.modelMap=new Map,this.nodeModelMap=new Map,this.edgeModelMap=new Map,this.elementsModelMap=new Map,this.nodeMoveRules=[],this.nodeResizeRules=[],this.nodes=[],this.edges=[],this.overlapMode=Yt.DEFAULT,this.gridSize=1,this.partial=!1;var r=t.container,n=t.partial,o=t.background,i=o===void 0?{}:o,a=t.grid,s=t.idGenerator,u=t.edgeGenerator,l=t.animation,d=t.customTrajectory;this.rootEl=r,this.partial=!!n,this.background=i,typeof a=="object"&&(this.gridSize=a.size||1),this.theme=Yf(t.style),this.edgeType=t.edgeType||"polyline",this.animation=D_(l),this.overlapMode=t.overlapMode||Yt.DEFAULT,this.width=t.width||this.rootEl.getBoundingClientRect().width,this.height=t.height||this.rootEl.getBoundingClientRect().height,this.eventCenter=new px,this.editConfigModel=new dx(t),this.transformModel=new gx(this.eventCenter,t),this.flowId=He(),this.idGenerator=s,this.edgeGenerator=tm(this,u),this.customTrajectory=d}return Object.defineProperty(e.prototype,"nodesMap",{get:function(){return this.nodes.reduce(function(t,r,n){return t[r.id]={index:n,model:r},t},{})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"edgesMap",{get:function(){return this.edges.reduce(function(t,r,n){return t[r.id]={index:n,model:r},t},{})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"modelsMap",{get:function(){return Dt(Dt([],dt(this.nodes),!1),dt(this.edges),!1).reduce(function(t,r){return t[r.id]=r,t},{})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sortElements",{get:function(){for(var t=Dt(Dt([],dt(this.nodes),!1),dt(this.edges),!1).sort(function(s,u){return s.zIndex-u.zIndex}),r=[],n=[-wn,-wn],o=[this.width+wn,this.height+wn],i=0;i<t.length;i++){var a=t[i];a.visible&&(!this.partial||a.isSelected||this.isElementInArea(a,n,o,!1,!1))&&r.push(a)}return r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textEditElement",{get:function(){var t=this.nodes.find(function(n){return n.state===V.TEXT_EDIT}),r=this.edges.find(function(n){return n.state===V.TEXT_EDIT});return t||r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectElements",{get:function(){var t=new Map;return this.nodes.forEach(function(r){r.isSelected&&t.set(r.id,r)}),this.edges.forEach(function(r){r.isSelected&&t.set(r.id,r)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectNodes",{get:function(){var t=[];return this.nodes.forEach(function(r){r.isSelected&&t.push(r)}),t},enumerable:!1,configurable:!0}),e.prototype.getAreaElement=function(t,r,n,o,i){var a=this;n===void 0&&(n=!0),o===void 0&&(o=!0),i===void 0&&(i=!1);var s=[];return st(Dt(Dt([],dt(this.nodes),!1),dt(this.edges),!1),function(u){var l=a.isElementInArea(u,t,r,n,o);(!i||u.visible)&&l&&s.push(u)}),s},e.prototype.getModel=function(t){return this.modelMap.get(t)},e.prototype.getNodeModelById=function(t){var r;return this.fakeNode&&t===this.fakeNode.id?this.fakeNode:(r=this.nodesMap[t])===null||r===void 0?void 0:r.model},e.prototype.getPointByClient=function(t){var r=t.x,n=t.y,o=this.rootEl.getBoundingClientRect(),i={x:r-o.left,y:n-o.top},a=dt(this.transformModel.HtmlPointToCanvasPoint([i.x,i.y]),2),s=a[0],u=a[1],l={x:s,y:u};return{domOverlayPosition:i,canvasOverlayPosition:l}},e.prototype.isElementInArea=function(t,r,n,o,i){var a;if(o===void 0&&(o=!0),i===void 0&&(i=!0),t.BaseType===at.NODE){t=t;for(var s=Ot(t),u=s.minX,l=s.minY,d=s.maxX,f=s.maxY,c=[{x:u,y:l},{x:d,y:l},{x:d,y:f},{x:u,y:f}],p=i,v=0;v<c.length;v++){var h=c[v],g=h.x,y=h.y;if(a=dt(this.transformModel.CanvasPointToHtmlPoint([g,y]),2),g=a[0],y=a[1],Jo([g,y],r,n)!==i){p=!i;break}}return p}if(t.BaseType===at.EDGE){t=t;var _=t.startPoint,A=t.endPoint,M=this.transformModel.CanvasPointToHtmlPoint([_.x,_.y]),S=this.transformModel.CanvasPointToHtmlPoint([A.x,A.y]),O=Jo(M,r,n),m=Jo(S,r,n);return o?O&&m:O||m}return!1},e.prototype.graphDataToModel=function(t){var r=this;if((!this.width||!this.height)&&this.resize(),!t){this.nodes=[],this.edges=[];return}if(t.nodes?this.nodes=ce(t.nodes,function(o){return r.getModelAfterSnapToGrid(o)}):this.nodes=[],t.edges){var n=this.edgeType;this.edges=ce(t.edges,function(o){var i,a=r.getModel((i=o.type)!==null&&i!==void 0?i:n);if(!a)throw new Error("找不到".concat(o.type,"对应的边。"));var s=new a(o,r);return r.edgeModelMap.set(s.id,s),r.elementsModelMap.set(s.id,s),s})}else this.edges=[]},e.prototype.modelToGraphData=function(){var t=[];this.edges.forEach(function(n){var o=n.getData();o&&!n.virtual&&t.push(o)});var r=[];return this.nodes.forEach(function(n){var o=n.getData();o&&!n.virtual&&r.push(o)}),{nodes:r,edges:t}},e.prototype.modelToHistoryData=function(){for(var t=!1,r=[],n=0;n<this.nodes.length;n++){var o=this.nodes[n];if(o.isDragging){t=!0;break}else r.push(o.getHistoryData())}if(t)return!1;for(var i=!1,a=[],s=0;s<this.edges.length;s++){var u=this.edges[s];if(u.isDragging){i=!0;break}else a.push(u.getHistoryData())}return i?!1:{nodes:r,edges:a}},e.prototype.getEdgeModelById=function(t){var r;return(r=this.edgesMap[t])===null||r===void 0?void 0:r.model},e.prototype.getElement=function(t){return this.modelsMap[t]},e.prototype.getNodeEdges=function(t){for(var r=[],n=0;n<this.edges.length;n++){var o=this.edges[n],i=o.sourceNodeId===t,a=o.targetNodeId===t;(i||a)&&r.push(o)}return r},e.prototype.getSelectElements=function(t){t===void 0&&(t=!0);var r=this.selectElements,n={nodes:[],edges:[]};return r.forEach(function(o){if(o.BaseType===at.NODE&&n.nodes.push(o.getData()),o.BaseType===at.EDGE){var i=o.getData(),a=r.get(i.sourceNodeId)&&r.get(i.targetNodeId);(t||a)&&n.edges.push(i)}}),n},e.prototype.updateAttributes=function(t,r){var n=this.getElement(t);n==null||n.updateAttributes(r)},e.prototype.changeNodeId=function(t,r){return r||(r=He()),this.nodesMap[r]?(console.warn("当前流程图已存在节点".concat(r,", 修改失败")),""):this.nodesMap[t]?(this.edges.forEach(function(n){n.sourceNodeId===t&&(n.sourceNodeId=r),n.targetNodeId===t&&(n.targetNodeId=r)}),this.nodesMap[t].model.id=r,this.nodesMap[r]=this.nodesMap[t],r):(console.warn("当前流程图找不到节点".concat(t,", 修改失败")),"")},e.prototype.changeEdgeId=function(t,r){return r||(r=He()),this.edgesMap[r]?(console.warn("当前流程图已存在边: ".concat(r,", 修改失败")),""):this.edgesMap[t]?(this.edges.forEach(function(n){n.id===t&&n.changeEdgeId(r)}),r):(console.warn("当前流程图找不到边: ".concat(r,", 修改失败")),"")},e.prototype.getTextModel=function(t){var r=this.editConfigModel,n=r.textMode,o=r.nodeTextMode,i=r.edgeTextMode;if(t.BaseType===at.NODE)return t.textMode||o||n||Wt.TEXT;if(t.BaseType===at.EDGE)return t.textMode||i||n||Wt.TEXT},e.prototype.setTextMode=function(t,r){this.editConfigModel.updateEditConfig({textMode:t})},e.prototype.setFakeNode=function(t){this.fakeNode=t},e.prototype.removeFakeNode=function(){this.fakeNode=null},e.prototype.setModel=function(t,r){return this.modelMap.set(t,r)},e.prototype.toFront=function(t){var r,n,o,i=((r=this.nodesMap[t])===null||r===void 0?void 0:r.model)||((n=this.edgesMap[t])===null||n===void 0?void 0:n.model);i&&(this.overlapMode===Yt.DEFAULT&&((o=this.topElement)===null||o===void 0||o.setZIndex(),i.setZIndex(C_),this.topElement=i),this.overlapMode===Yt.INCREASE&&this.setElementZIndex(t,"top"))},e.prototype.setElementZIndex=function(t,r){var n,o,i=((n=this.nodesMap[t])===null||n===void 0?void 0:n.model)||((o=this.edgesMap[t])===null||o===void 0?void 0:o.model);if(i){var a=void 0;typeof r=="number"?a=r:(r==="top"&&(a=Na()),r==="bottom"&&(a=Um())),i.setZIndex(a)}},e.prototype.deleteNode=function(t){var r=this.nodesMap[t].model.getData();this.deleteEdgeBySource(t),this.deleteEdgeByTarget(t),this.nodes.splice(this.nodesMap[t].index,1),this.eventCenter.emit(C.NODE_DELETE,{data:r})},e.prototype.addNode=function(t,r,n){r===void 0&&(r=C.NODE_ADD);var o=_t(t),i=o.id;i&&this.nodesMap[i]&&delete o.id;var a=this.getModelAfterSnapToGrid(o);this.nodes.push(a);var s=a.getData(),u={data:s};return n&&(u.e=n),this.eventCenter.emit(r,u),a},e.prototype.getModelAfterSnapToGrid=function(t){var r=this.getModel(t.type);if(!r)throw new Error("找不到".concat(t.type,"对应的节点，请确认是否已注册此类型节点。"));var n=t.x,o=t.y;n&&o&&(t.x=mr(n,this.gridSize),t.y=mr(o,this.gridSize),typeof t.text=="object"&&t.text!==null&&(t.text.x+=t.x-n,t.text.y+=t.y-o));var i=new r(t,this);return this.nodeModelMap.set(i.id,i),this.elementsModelMap.set(i.id,i),i},e.prototype.cloneNode=function(t){var r=this.getNodeModelById(t),n=r==null?void 0:r.getData();if(n){n.x+=30,n.y+=30,n.id="",typeof n.text=="object"&&n.text!==null&&(n.text.x+=30,n.text.y+=30);var o=this.addNode(n);return o.setSelected(!0),r==null||r.setSelected(!1),o.getData()}},e.prototype.moveNode=function(t,r,n,o){var i;o===void 0&&(o=!1);var a=this.nodesMap[t];if(!a){console.warn("不存在id为".concat(t,"的节点"));return}var s=a.model;i=dt(s.getMoveDistance(r,n,o),2),r=i[0],n=i[1],this.moveEdge(t,r,n)},e.prototype.moveNode2Coordinate=function(t,r,n,o){o===void 0&&(o=!1);var i=this.nodesMap[t];if(!i){console.warn("不存在id为".concat(t,"的节点"));return}var a=i.model,s=a.x,u=a.y,l=r-s,d=n-u;this.moveNode(t,l,d,o)},e.prototype.editText=function(t){this.setElementStateById(t,V.TEXT_EDIT)},e.prototype.addEdge=function(t){var r=_t(t),n=r.type;n||(n=this.edgeType),r.id&&this.edgesMap[r.id]&&delete r.id;var o=this.getModel(n);if(!o)throw new Error("找不到".concat(n,"对应的边，请确认是否已注册此类型边。"));var i=new o(nr(nr({},r),{type:n}),this);this.edgeModelMap.set(i.id,i),this.elementsModelMap.set(i.id,i);var a=i.getData();return this.edges.push(i),this.eventCenter.emit(C.EDGE_ADD,{data:a}),i},e.prototype.moveEdge=function(t,r,n){for(var o=0;o<this.edges.length;o++){var i=this.edges[o],a=i.textPosition,s=a.x,u=a.y,l=this.edges[o].sourceNodeId===t,d=this.edges[o].targetNodeId===t;l&&i.moveStartPoint(r,n),d&&i.moveEndPoint(r,n),(l||d)&&this.handleEdgeTextMove(i,s,u)}},e.prototype.handleEdgeTextMove=function(t,r,n){var o;if(t.customTextPosition){t.resetTextPosition();return}if(t.modelType===Y.POLYLINE_EDGE&&(!((o=t.text)===null||o===void 0)&&o.value)){var i=t.text,a=Rf(i,t.points);t.moveText(a.x-i.x,a.y-i.y)}var s=t.textPosition,u=s.x,l=s.y;t.moveText(u-r,l-n)},e.prototype.deleteEdgeBySourceAndTarget=function(t,r){for(var n=0;n<this.edges.length;n++)if(this.edges[n].sourceNodeId===t&&this.edges[n].targetNodeId===r){var o=this.edges[n].getData();this.edges.splice(n,1),n--,this.eventCenter.emit(C.EDGE_DELETE,{data:o})}},e.prototype.deleteEdgeById=function(t){var r=this.edgesMap[t];if(r){var n=this.edgesMap[t].index,o=this.edgesMap[t].model.getData();this.edges.splice(n,1),this.eventCenter.emit(C.EDGE_DELETE,{data:o})}},e.prototype.deleteEdgeBySource=function(t){for(var r=0;r<this.edges.length;r++)if(this.edges[r].sourceNodeId===t){var n=this.edges[r].getData();this.edges.splice(r,1),r--,this.eventCenter.emit(C.EDGE_DELETE,{data:n})}},e.prototype.deleteEdgeByTarget=function(t){for(var r=0;r<this.edges.length;r++)if(this.edges[r].targetNodeId===t){var n=this.edges[r].getData();this.edges.splice(r,1),r--,this.eventCenter.emit(C.EDGE_DELETE,{data:n})}},e.prototype.setElementStateById=function(t,r,n){this.nodes.forEach(function(o){o.id===t?o.setElementState(r,n):o.setElementState(V.DEFAULT)}),this.edges.forEach(function(o){o.id===t?o.setElementState(r,n):o.setElementState(V.DEFAULT)})},e.prototype.updateText=function(t,r){var n=Ge(Dt(Dt([],dt(this.nodes),!1),dt(this.edges),!1),function(o){return o.id===t});n==null||n.updateText(r)},e.prototype.selectNodeById=function(t,r){var n;r===void 0&&(r=!1),r||this.clearSelectElements();var o=(n=this.nodesMap[t])===null||n===void 0?void 0:n.model;o==null||o.setSelected(!0)},e.prototype.selectEdgeById=function(t,r){var n;r===void 0&&(r=!1),r||this.clearSelectElements();var o=(n=this.edgesMap[t])===null||n===void 0?void 0:n.model;o==null||o.setSelected(!0)},e.prototype.selectElementById=function(t,r){r===void 0&&(r=!1),r||this.clearSelectElements();var n=this.getElement(t);n==null||n.setSelected(!0)},e.prototype.clearSelectElements=function(){var t;this.selectElements.forEach(function(r){r==null||r.setSelected(!1)}),this.selectElements.clear(),this.overlapMode===Yt.DEFAULT&&((t=this.topElement)===null||t===void 0||t.setZIndex())},e.prototype.moveNodes=function(t,r,n,o){var i,a,s,u=this;o===void 0&&(o=!1);for(var l=t.reduce(function(A,M){var S,O=(S=u.nodesMap[M])===null||S===void 0?void 0:S.model;return O&&(A[M]=O.getMoveDistance(r,n,o)),A},{}),d=0;d<this.edges.length;d++){var f=this.edges[d],c=f.textPosition,p=c.x,v=c.y,h=l[f.sourceNodeId],g=l[f.targetNodeId],y=void 0,_=void 0;h&&g&&f.modelType===Y.POLYLINE_EDGE?(i=dt(h,2),y=i[0],_=i[1],f.updatePointsList(y,_)):(h&&(a=dt(h,2),y=a[0],_=a[1],f.moveStartPoint(y,_)),g&&(s=dt(g,2),y=s[0],_=s[1],f.moveEndPoint(y,_))),(h||g)&&this.handleEdgeTextMove(f,p,v)}},e.prototype.addNodeMoveRules=function(t){this.nodeMoveRules.includes(t)||this.nodeMoveRules.push(t)},e.prototype.addNodeResizeRules=function(t){this.nodeResizeRules.includes(t)||this.nodeResizeRules.push(t)},e.prototype.setDefaultEdgeType=function(t){this.edgeType=t},e.prototype.changeNodeType=function(t,r){var n=this.getNodeModelById(t);if(!n){console.warn("找不到id为".concat(t,"的节点"));return}var o=n.getData();o.type=r;var i=this.getModel(r);if(!i)throw new Error("找不到".concat(r,"对应的节点，请确认是否已注册此类型节点。"));var a=new i(o,this);this.nodes.splice(this.nodesMap[t].index,1,a);var s=this.getNodeEdges(t);s.forEach(function(u){if(u.sourceNodeId===t){var l=hu(a,u.startPoint,a.width,a.height);u.updateStartPoint(l)}if(u.targetNodeId===t){var l=hu(a,u.endPoint,a.width,a.height);u.updateEndPoint(l)}})},e.prototype.changeEdgeType=function(t,r){var n=this.getEdgeModelById(t);if(!n){console.warn("找不到id为".concat(t,"的边"));return}if(n.type!==r){var o=n.getData();o.type=r;var i=this.getModel(r);if(!i)throw new Error("找不到".concat(r,"对应的节点，请确认是否已注册此类型节点。"));delete o.pointsList;var a=new i(o,this);this.edges.splice(this.edgesMap[t].index,1,a)}},e.prototype.getNodeIncomingEdge=function(t){var r=[];return this.edges.forEach(function(n){n.targetNodeId===t&&r.push(n)}),r},e.prototype.getNodeOutgoingEdge=function(t){var r=[];return this.edges.forEach(function(n){n.sourceNodeId===t&&r.push(n)}),r},e.prototype.getAnchorIncomingEdge=function(t){var r=[];return this.edges.forEach(function(n){n.targetAnchorId===t&&r.push(n)}),r},e.prototype.getAnchorOutgoingEdge=function(t){var r=[];return this.edges.forEach(function(n){n.sourceAnchorId===t&&r.push(n)}),r},e.prototype.getNodeIncomingNode=function(t){var r=this,n=[];return this.edges.forEach(function(o){var i;o.targetNodeId===t&&n.push((i=r.nodesMap[o.sourceNodeId])===null||i===void 0?void 0:i.model)}),n},e.prototype.getNodeOutgoingNode=function(t){var r=this,n=[];return this.edges.forEach(function(o){o.sourceNodeId===t&&n.push(r.nodesMap[o.targetNodeId].model)}),n},e.prototype.setTheme=function(t){this.theme=Gm(nr(nr({},this.theme),t))},e.prototype.resize=function(t,r){this.width=t||this.rootEl.getBoundingClientRect().width,this.height=r||this.rootEl.getBoundingClientRect().height,(!this.width||!this.height)&&console.warn("渲染画布的时候无法获取画布宽高，请确认在container已挂载到DOM。@see https://github.com/didi/LogicFlow/issues/675")},e.prototype.clearData=function(){this.nodes=[],this.edges=[]},e.prototype.getVirtualRectSize=function(){var t=this.nodes,r=[],n=[];t.forEach(function(c){var p=c.x,v=c.y,h=c.width,g=c.height,y=c.getNodeStyle().strokeWidth,_=y===void 0?0:y,A=p+h/2+_,M=p-h/2-_,S=v+g/2+_,O=v-g/2-_;r=r.concat([A,M].filter(function(m){return!Number.isNaN(m)})),n=n.concat([S,O].filter(function(m){return!Number.isNaN(m)}))});var o=Math.min.apply(Math,Dt([],dt(r),!1)),i=Math.max.apply(Math,Dt([],dt(r),!1)),a=Math.min.apply(Math,Dt([],dt(n),!1)),s=Math.max.apply(Math,Dt([],dt(n),!1)),u=i-o||0,l=s-a||0,d=o+u/2,f=a+l/2;return{width:u,height:l,x:d,y:f}},e.prototype.translateCenter=function(){var t=this,r=t.nodes,n=t.width,o=t.height,i=t.rootEl,a=t.transformModel;if(r.length){var s=n||i.clientWidth,u=o||i.clientHeight,l=this.getVirtualRectSize(),d=l.x,f=l.y;a.focusOn(d,f,s,u)}},e.prototype.fitView=function(t,r){t===void 0&&(t=20),r===void 0&&(r=20);var n=this,o=n.nodes,i=n.width,a=n.height,s=n.rootEl,u=n.transformModel;if(o.length){var l=i||s.clientWidth,d=a||s.clientHeight,f=this.getVirtualRectSize(),c=f.width,p=f.height,v=f.x,h=f.y,g=(c+r)/l,y=(p+t)/d,_=1/Math.max(g,y),A=[l/2,d/2];u.zoom(_,A),u.focusOn(v,h,l,d)}},e.prototype.openEdgeAnimation=function(t){var r=this.getEdgeModelById(t);r==null||r.openEdgeAnimation()},e.prototype.closeEdgeAnimation=function(t){var r=this.getEdgeModelById(t);r==null||r.closeEdgeAnimation()},e.prototype.getPartial=function(){return this.partial},e.prototype.setPartial=function(t){this.partial=t},N([b],e.prototype,"width",void 0),N([b],e.prototype,"height",void 0),N([b],e.prototype,"edgeType",void 0),N([b],e.prototype,"nodes",void 0),N([b],e.prototype,"edges",void 0),N([b],e.prototype,"fakeNode",void 0),N([b],e.prototype,"overlapMode",void 0),N([b],e.prototype,"background",void 0),N([b],e.prototype,"gridSize",void 0),N([b],e.prototype,"transformModel",void 0),N([b],e.prototype,"editConfigModel",void 0),N([b],e.prototype,"partial",void 0),N([et],e.prototype,"nodesMap",null),N([et],e.prototype,"edgesMap",null),N([et],e.prototype,"modelsMap",null),N([et],e.prototype,"sortElements",null),N([et],e.prototype,"textEditElement",null),N([et],e.prototype,"selectElements",null),N([et],e.prototype,"selectNodes",null),N([x],e.prototype,"setTextMode",null),N([x],e.prototype,"setFakeNode",null),N([x],e.prototype,"removeFakeNode",null),N([x],e.prototype,"setModel",null),N([x],e.prototype,"toFront",null),N([x],e.prototype,"setElementZIndex",null),N([x],e.prototype,"deleteNode",null),N([x],e.prototype,"addNode",null),N([x],e.prototype,"cloneNode",null),N([x],e.prototype,"moveNode",null),N([x],e.prototype,"moveNode2Coordinate",null),N([x],e.prototype,"editText",null),N([x],e.prototype,"addEdge",null),N([x],e.prototype,"moveEdge",null),N([x],e.prototype,"deleteEdgeBySourceAndTarget",null),N([x],e.prototype,"deleteEdgeById",null),N([x],e.prototype,"deleteEdgeBySource",null),N([x],e.prototype,"deleteEdgeByTarget",null),N([x],e.prototype,"setElementStateById",null),N([x],e.prototype,"updateText",null),N([x],e.prototype,"selectNodeById",null),N([x],e.prototype,"selectEdgeById",null),N([x],e.prototype,"selectElementById",null),N([x],e.prototype,"clearSelectElements",null),N([x],e.prototype,"moveNodes",null),N([x],e.prototype,"setDefaultEdgeType",null),N([x],e.prototype,"changeNodeType",null),N([x],e.prototype,"changeEdgeType",null),N([x],e.prototype,"getNodeIncomingEdge",null),N([x],e.prototype,"getNodeOutgoingEdge",null),N([x],e.prototype,"getAnchorIncomingEdge",null),N([x],e.prototype,"getAnchorOutgoingEdge",null),N([x],e.prototype,"getNodeIncomingNode",null),N([x],e.prototype,"getNodeOutgoingNode",null),N([x],e.prototype,"setTheme",null),N([x],e.prototype,"resize",null),N([x],e.prototype,"clearData",null),N([x],e.prototype,"translateCenter",null),N([x],e.prototype,"fitView",null),N([x],e.prototype,"openEdgeAnimation",null),N([x],e.prototype,"closeEdgeAnimation",null),N([x],e.prototype,"setPartial",null),e}(),Le=function(){return Le=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Le.apply(this,arguments)},Dr=function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},vx=function(){function e(t){this.isShowHorizontal=!1,this.isShowVertical=!1,this.position={x:0,y:0},this.graphModel=t}return e.prototype.getStyle=function(){return Le({},this.graphModel.theme.snapline)},e.prototype.getCenterSnapLine=function(t,r){for(var n=t.x,o=t.y,i=!1,a=!1,s=0;s<r.length;s++){var u=r[s];if(u.id!==t.id&&(n===u.x&&(i=!0),o===u.y&&(a=!0),i&&a))break}return{isShowVertical:i,isShowHorizontal:a,position:{x:n,y:o}}},e.prototype.getHorizontalSnapline=function(t,r){var n=!1,o=0,i=t.id,a;if(i){var s=this.graphModel.fakeNode;if(s&&s.id===i)a=Ot(s);else{var u=this.graphModel.getNodeModelById(i);u&&(a=Ot(u))}}for(var l=0;l<r.length;l++){var d=r[l];if(d.id!==t.id){var f=Ot(d);if(f.minY===(a==null?void 0:a.minY)||f.maxY===(a==null?void 0:a.minY)){n=!0,o=a.minY;break}if(f.minY===(a==null?void 0:a.maxY)||f.maxY===(a==null?void 0:a.maxY)){n=!0,o=a.maxY;break}}}return{isShowHorizontal:n,isShowVertical:this.isShowVertical,position:Le(Le({},this.position),{y:o})}},e.prototype.getVerticalSnapline=function(t,r){var n=!1,o=0,i=t.id,a;if(i){var s=this.graphModel.fakeNode;if(s&&s.id===i)a=Ot(s);else{var u=this.graphModel.getNodeModelById(i);u&&(a=Ot(u))}}for(var l=0;l<r.length;l++){var d=r[l];if(d.id!==t.id){var f=Ot(d);if(f.minX===(a==null?void 0:a.minX)||f.maxX===(a==null?void 0:a.minX)){n=!0,o=a.minX;break}if(f.minX===(a==null?void 0:a.maxX)||f.maxX===(a==null?void 0:a.maxX)){n=!0,o=a.maxX;break}}}return{isShowHorizontal:this.isShowHorizontal,isShowVertical:n,position:Le(Le({},this.position),{x:o})}},e.prototype.getSnapLinePosition=function(t,r){var n=this.getCenterSnapLine(t,r),o=n.isShowHorizontal,i=n.isShowVertical;if(!o){var a=this.getHorizontalSnapline(t,r);a.isShowHorizontal&&(n.isShowHorizontal=a.isShowHorizontal,n.position.y=a.position.y)}if(!i){var s=this.getVerticalSnapline(t,r);s.isShowVertical&&(n.isShowVertical=s.isShowVertical,n.position.x=s.position.x)}return n},e.prototype.setSnaplineInfo=function(t){var r=t.isShowHorizontal,n=t.isShowVertical,o=t.position;this.position=o,this.isShowHorizontal=r,this.isShowVertical=n},e.prototype.clearSnapline=function(){this.position={x:0,y:0},this.isShowHorizontal=!1,this.isShowVertical=!1},e.prototype.setNodeSnapLine=function(t){var r=this.graphModel.nodes,n=this.getSnapLinePosition(t,r);this.setSnaplineInfo(n)},Dr([b],e.prototype,"isShowHorizontal",void 0),Dr([b],e.prototype,"isShowVertical",void 0),Dr([b],e.prototype,"position",void 0),Dr([x],e.prototype,"clearSnapline",null),Dr([x],e.prototype,"setNodeSnapLine",null),e}(),Bt=function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},qe=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},yx={false:[-1/0,-1/0,1/0,1/0],true:[-1/0,-1/0,1/0,1/0],vertical:[-1/0,0,1/0,0],horizontal:[0,-1/0,0,1/0]},gx=function(){function e(t,r){this.MINI_SCALE_SIZE=.2,this.MAX_SCALE_SIZE=16,this.SCALE_X=1,this.SKEW_Y=0,this.SKEW_X=0,this.SCALE_Y=1,this.TRANSLATE_X=0,this.TRANSLATE_Y=0,this.ZOOM_SIZE=.04,this.translateLimitMinX=-1/0,this.translateLimitMinY=-1/0,this.translateLimitMaxX=1/0,this.translateLimitMaxY=1/0,this.eventCenter=t;var n=r.stopMoveGraph,o=n===void 0?!1:n;this.updateTranslateLimits(o)}return e.prototype.setZoomMiniSize=function(t){this.MINI_SCALE_SIZE=t},e.prototype.setZoomMaxSize=function(t){this.MAX_SCALE_SIZE=t},e.prototype.HtmlPointToCanvasPoint=function(t){var r=qe(t,2),n=r[0],o=r[1];return[(n-this.TRANSLATE_X)/this.SCALE_X,(o-this.TRANSLATE_Y)/this.SCALE_Y]},e.prototype.CanvasPointToHtmlPoint=function(t){var r=qe(t,2),n=r[0],o=r[1];return[n*this.SCALE_X+this.TRANSLATE_X,o*this.SCALE_Y+this.TRANSLATE_Y]},e.prototype.moveCanvasPointByHtml=function(t,r,n){var o=qe(t,2),i=o[0],a=o[1];return[i+r/this.SCALE_X,a+n/this.SCALE_Y]},e.prototype.fixDeltaXY=function(t,r){return[t/this.SCALE_X,r/this.SCALE_Y]},e.prototype.getTransformStyle=function(){var t=[this.SCALE_X,this.SKEW_Y,this.SKEW_X,this.SCALE_Y,this.TRANSLATE_X,this.TRANSLATE_Y].join(",");return{transform:"matrix(".concat(t,")")}},e.prototype.zoom=function(t,r){t===void 0&&(t=!1);var n=this.SCALE_X,o=this.SCALE_Y;return typeof t=="number"?(n=t,o=t):t?(n+=this.ZOOM_SIZE,o+=this.ZOOM_SIZE):(n-=this.ZOOM_SIZE,o-=this.ZOOM_SIZE),n<this.MINI_SCALE_SIZE||n>this.MAX_SCALE_SIZE?"".concat(this.SCALE_X*100,"%"):(r&&(this.TRANSLATE_X-=(n-this.SCALE_X)*r[0],this.TRANSLATE_Y-=(o-this.SCALE_Y)*r[1]),this.SCALE_X=n,this.SCALE_Y=o,this.emitGraphTransform("zoom"),"".concat(this.SCALE_X*100,"%"))},e.prototype.emitGraphTransform=function(t){this.eventCenter.emit(C.GRAPH_TRANSFORM,{type:t,transform:{SCALE_X:this.SCALE_X,SKEW_Y:this.SKEW_Y,SKEW_X:this.SKEW_X,SCALE_Y:this.SCALE_Y,TRANSLATE_X:this.TRANSLATE_X,TRANSLATE_Y:this.TRANSLATE_Y}})},e.prototype.resetZoom=function(){this.SCALE_X=1,this.SCALE_Y=1,this.emitGraphTransform("resetZoom")},e.prototype.translate=function(t,r){this.TRANSLATE_X+t<=this.translateLimitMaxX&&this.TRANSLATE_X+t>=this.translateLimitMinX&&(this.TRANSLATE_X+=t),this.TRANSLATE_Y+r<=this.translateLimitMaxY&&this.TRANSLATE_Y+r>=this.translateLimitMinY&&(this.TRANSLATE_Y+=r),this.emitGraphTransform("translate")},e.prototype.focusOn=function(t,r,n,o){var i=qe(this.CanvasPointToHtmlPoint([t,r]),2),a=i[0],s=i[1],u=qe([n/2-a,o/2-s],2),l=u[0],d=u[1];this.TRANSLATE_X+=l,this.TRANSLATE_Y+=d,this.emitGraphTransform("focusOn")},e.prototype.updateTranslateLimits=function(t){var r;r=qe(Array.isArray(t)&&t.length===4?t:yx[t.toString()],4),this.translateLimitMinX=r[0],this.translateLimitMinY=r[1],this.translateLimitMaxX=r[2],this.translateLimitMaxY=r[3]},Bt([b],e.prototype,"SCALE_X",void 0),Bt([b],e.prototype,"SKEW_Y",void 0),Bt([b],e.prototype,"SKEW_X",void 0),Bt([b],e.prototype,"SCALE_Y",void 0),Bt([b],e.prototype,"TRANSLATE_X",void 0),Bt([b],e.prototype,"TRANSLATE_Y",void 0),Bt([b],e.prototype,"ZOOM_SIZE",void 0),Bt([x],e.prototype,"zoom",null),Bt([x],e.prototype,"resetZoom",null),Bt([x],e.prototype,"translate",null),Bt([x],e.prototype,"focusOn",null),e}(),_x=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hi=function(){return Hi=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Hi.apply(this,arguments)},mx=function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},xx=function(e){_x(t,e);function t(r){var n=e.call(this)||this;n.stepScrollX=0,n.stepScrollY=0,n.onDragging=function(s){var u=s.deltaX,l=s.deltaY;n.setState({isDragging:!0});var d=n.props.graphModel,f=d.transformModel,c=d.editConfigModel;c.stopMoveGraph!==!0&&f.translate(u,l)},n.onDragEnd=function(){n.setState({isDragging:!1})},n.zoomHandler=function(s){var u=n.props,l=u.graphModel,d=l.editConfigModel,f=l.transformModel,c=l.gridSize,p=u.graphModel,v=s.deltaX,h=s.deltaY;if(!d.stopScrollGraph&&!s.ctrlKey&&!s.metaKey){if(s.preventDefault(),n.stepScrollX+=v,n.stepScrollY+=h,Math.abs(n.stepScrollX)>=c){var g=n.stepScrollX%c,y=n.stepScrollX-g;f.translate(-y*f.SCALE_X,0),n.stepScrollX=g}if(Math.abs(n.stepScrollY)>=c){var _=n.stepScrollY%c,A=n.stepScrollY-_;f.translate(0,-A*f.SCALE_Y),n.stepScrollY=_}return}if(!d.stopZoomGraph){s.preventDefault();var M=p.getPointByClient({x:s.clientX,y:s.clientY}),S=M.canvasOverlayPosition,O=S.x,m=S.y;f.zoom(s.deltaY<0,[O,m])}},n.clickHandler=function(s){var u=s.target;if(u.getAttribute("name")==="canvas-overlay"){var l=n.props.graphModel,d=l.selectElements;d.size>0&&l.clearSelectElements(),l.eventCenter.emit(C.BLANK_CLICK,{e:s})}},n.handleContextMenu=function(s){var u=s.target;if(u.getAttribute("name")==="canvas-overlay"){s.preventDefault();var l=n.props.graphModel,d=l.getPointByClient({x:s.clientX,y:s.clientY});l.eventCenter.emit(C.BLANK_CONTEXTMENU,{e:s,position:d})}},n.mouseDownHandler=function(s){var u=n.props.graphModel,l=u.eventCenter,d=u.editConfigModel,f=u.transformModel.SCALE_X,c=u.gridSize,p=s.target,v=!d.adjustEdge&&!d.adjustNodePosition;(p.getAttribute("name")==="canvas-overlay"||v)&&(d.stopMoveGraph!==!0?(n.stepDrag.setStep(c*f),n.stepDrag.handleMouseDown(s)):l.emit(C.BLANK_MOUSEDOWN,{e:s}),n.clickHandler(s))};var o=r.graphModel,i=o.gridSize,a=o.eventCenter;return n.stepDrag=new le({onDragging:n.onDragging,onDragEnd:n.onDragEnd,step:i,eventType:"BLANK",isStopPropagation:!1,eventCenter:a,model:void 0}),n.state={isDragging:!1},n}return t.prototype.render=function(){var r=this.props.graphModel.transformModel,n=r.getTransformStyle().transform,o=this.props,i=o.children,a=o.dnd,s=this.state.isDragging;return E("svg",Hi({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",name:"canvas-overlay",onWheel:this.zoomHandler,onMouseDown:this.mouseDownHandler,onContextMenu:this.handleContextMenu,className:s?"lf-canvas-overlay lf-dragging":"lf-canvas-overlay lf-drag-able"},a.eventMap(),{children:E("g",{transform:n,children:i})}))},t=mx([jt],t),t}(z),Ff=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),sn=function(){return sn=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},sn.apply(this,arguments)},Ex=function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},bx=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},Du=function(e){Ff(t,e);function t(){var r=e.call(this)||this;return r.onDragging=function(n){var o=n.event,i=r.props,a=i.graphModel,s=i.bezierModel,u=i.type,l=a.getPointByClient({x:o.clientX,y:o.clientY}).canvasOverlayPosition,d=l.x,f=l.y;s.updateAdjustAnchor({x:d,y:f},u),a.eventCenter.emit(C.EDGE_ADJUST,{data:s.getData()})},r.onDragEnd=function(){var n=r.props.bezierModel;n.isDragging=!1},r.dragHandler=new le({onDragging:r.onDragging,onDragEnd:r.onDragEnd}),r}return t.prototype.render=function(){var r=this,n=this.props.position,o=n.x,i=n.y,a=this.props.bezierModel,s=a.getEdgeStyle().adjustAnchor;return E(Er,sn({className:"lf-bezier-adjust-anchor",x:o,y:i},s,{onMouseDown:function(u){r.dragHandler.handleMouseDown(u)}}))},t}(z),Ox=function(e){Ff(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getBezierAdjust=function(r,n){var o=r.path,i=r.id,a=Pa(o),s=bx(a,4),u=s[0],l=s[1],d=s[2],f=s[3],c=r.getEdgeStyle().adjustLine,p=[];return p.push(E(xr,sn({x1:u.x,y1:u.y,x2:l.x,y2:l.y},c))),p.push(E(Du,{position:l,bezierModel:r,graphModel:n,type:"sNext"},"".concat(i,"_ePre"))),p.push(E(xr,sn({x1:f.x,y1:f.y,x2:d.x,y2:d.y},c))),p.push(E(Du,{position:d,bezierModel:r,graphModel:n,type:"ePre"},"".concat(i,"_sNext"))),p},t.prototype.selectedBezierEdge=function(){for(var r=this.props.graphModel,n=r.edges,o=[],i=0;i<n.length;i++){var a=n[i];a.isSelected&&a.modelType===Y.BEZIER_EDGE&&a.draggable&&o.push(this.getBezierAdjust(a,r))}return o},t.prototype.render=function(){return E("g",{className:"lf-bezier-adjust",children:this.selectedBezierEdge()})},t=Ex([jt],t),t}(z),wx=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Sx=function(e){wx(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){var r=this.props.background;return E("div",{className:"lf-background",children:E("div",{style:r,className:"lf-background-area"})})},t}(z),Ax=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Mx=function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},Tx=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},Px=function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},po=function(e){Ax(t,e);function t(){var r=e.apply(this,Px([],Tx(arguments),!1))||this;return r.id=He(),r}return t.prototype.renderDot=function(){var r=this.props,n=r.config,o=r.size,i=o===void 0?1:o,a=r.visible,s=n??{},u=s.color,l=s.thickness,d=l===void 0?2:l,f=Math.min(Math.max(2,d),i/4),c=a?1:0;return E("g",{fill:u,opacity:c,children:[E("circle",{cx:0,cy:0,r:f/2}),E("circle",{cx:0,cy:i,r:f/2}),E("circle",{cx:i,cy:0,r:f/2}),E("circle",{cx:i,cy:i,r:f/2})]})},t.prototype.renderMesh=function(){var r=this.props,n=r.config,o=r.size,i=o===void 0?1:o,a=r.visible,s=n??{},u=s.color,l=s.thickness,d=l===void 0?1:l,f=Math.min(Math.max(1,d),i/2),c="M 0 0 H ".concat(i," V ").concat(i," H 0 Z"),p=a?1:0;return E("path",{d:c,stroke:u,strokeWidth:f,opacity:p,fill:"transparent"})},t.prototype.render=function(){var r=this.props,n=r.type,o=r.size,i=o===void 0?1:o,a=r.graphModel.transformModel,s=a.SCALE_X,u=a.SKEW_Y,l=a.SKEW_X,d=a.SCALE_Y,f=a.TRANSLATE_X,c=a.TRANSLATE_Y,p=[s,u,l,d,f,c].join(","),v="matrix(".concat(p,")");return E("div",{className:"lf-grid",children:E("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",children:[E("defs",{children:E("pattern",{id:this.id,patternUnits:"userSpaceOnUse",patternTransform:v,x:"0",y:"0",width:i,height:i,children:[n==="dot"&&this.renderDot(),n==="mesh"&&this.renderMesh()]})}),E("rect",{width:"100%",height:"100%",fill:"url(#".concat(this.id,")")})]})})},t=Mx([jt],t),t}(z);(function(e){e.defaultProps={size:R_,visible:!0,type:"dot",config:{color:"#ababab",thickness:1}};function t(r){var n=$(e.defaultProps);return typeof r=="number"?tt(n,{size:r}):typeof r=="boolean"?tt(n,{visible:r}):tt(n,r)}e.getGridOptions=t})(po||(po={}));var Dx=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Nx=function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},Cx=function(e){Dx(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){var r=this.props.graphModel.transformModel,n=r.getTransformStyle().transform,o=this.props.children;return E("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",className:"modification-overlay",children:E("g",{transform:n,children:o})})},t=Nx([jt],t),t}(z),Rx=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_e=function(){return _e=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},_e.apply(this,arguments)},jx=function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},Lx=function(e){Rx(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getNodesOutline=function(){var r=this.props.graphModel,n=r.nodes,o=r.editConfigModel,i=o.hoverOutline,a=o.nodeSelectedOutline,s=[];return n.forEach(function(u){if(u.isHovered||u.isSelected){var l=u.isHovered,d=u.isSelected,f=u.x,c=u.y,p=u.width,v=u.height;if(a&&d||i&&l){var h=u.getOutlineStyle(),g={};if(Object.keys(h).forEach(function(_){_!=="hover"&&(g[_]=h[_])}),l){var y=h.hover;g=_e(_e({},g),y)}s.push(E(oe,_e({transform:u.transform,className:"lf-outline-node",x:f,y:c,width:p+10,height:v+10},g)))}}}),s},t.prototype.getEdgeOutline=function(){for(var r=this.props.graphModel,n=r.edges,o=r.editConfigModel,i=o.edgeSelectedOutline,a=o.hoverOutline,s=[],u=0;u<n.length;u++){var l=n[u];(i&&l.isSelected||a&&l.isHovered)&&(l.modelType===Y.LINE_EDGE?s.push(this.getLineOutline(l)):l.modelType===Y.POLYLINE_EDGE?s.push(this.getPolylineOutline(l)):l.modelType===Y.BEZIER_EDGE&&s.push(this.getBezierOutline(l)))}return s},t.prototype.getLineOutline=function(r){var n=r.startPoint,o=r.endPoint,i=(n.x+o.x)/2,a=(n.y+o.y)/2,s=Math.abs(n.x-o.x)+10,u=Math.abs(n.y-o.y)+10,l=r.getOutlineStyle();return E(oe,_e({className:"lf-outline-edge",x:i,y:a,width:s,height:u},l))},t.prototype.getPolylineOutline=function(r){var n=r.points,o=ze(n),i=rn(o,8),a=i.x,s=i.y,u=i.width,l=i.height,d=r.getOutlineStyle();return E(oe,_e({className:"lf-outline",x:a,y:s,width:u,height:l},d))},t.prototype.getBezierOutline=function(r){var n=r.path,o=Pa(n),i=rn(o,8),a=i.x,s=i.y,u=i.width,l=i.height,d=r.getOutlineStyle();return E(oe,_e({className:"lf-outline",x:a,y:s,width:u,height:l},d))},t.prototype.render=function(){return E("g",{className:"lf-outline",children:[this.getNodesOutline(),this.getEdgeOutline()]})},t=jx([jt],t),t}(z),Ix=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),me=function(){return me=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},me.apply(this,arguments)},Bx=function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},$x=function(e){Ix(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){var r=this.props.snaplineModel,n=r??{},o=n.position,i=n.isShowHorizontal,a=n.isShowVertical,s=r==null?void 0:r.getStyle(),u=o??{},l=u.x,d=l===void 0?0:l,f=u.y,c=f===void 0?0:f,p=me(me({x1:-1e5,y1:c,x2:1e5,y2:c},s),{stroke:i?s==null?void 0:s.stroke:"none"}),v=me(me({x1:d,y1:-1e5,x2:d,y2:1e5},s),{stroke:a?s==null?void 0:s.stroke:"none"});return E("g",{className:"lf-snapline",children:[E(xr,me({},p)),E(xr,me({},v))]})},t=Bx([jt],t),t}(z),Xx=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hx=function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},Yx=function(e){Xx(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.componentDidMount=function(){this.triggerToolRender()},t.prototype.componentDidUpdate=function(){this.triggerToolRender()},t.prototype.getTools=function(){var r=this.props,n=r.tool,o=r.graphModel,i=o.textEditElement,a=n.getTools(),s=a.map(function(u){return ar(u,{textEditElement:i,graphModel:o,lf:n.instance})});return n.components=s,s},t.prototype.triggerToolRender=function(){var r=this.props,n=r.tool,o=r.graphModel,i=document.querySelector("#ToolOverlay_".concat(o.flowId)),a=n.getInstance();a.components.forEach(function(s){return s(a,i)}),a.components=[]},t.prototype.render=function(){var r=this.props.graphModel;return E("div",{className:"lf-tool-overlay",id:"ToolOverlay_".concat(r.flowId),children:this.getTools()})},t=Hx([jt],t),t}(z),Fx=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yi=function(){return Yi=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Yi.apply(this,arguments)},Gx=function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},zx=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},kx=function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},Ux=function(e){Fx(t,e);function t(){var r=e.apply(this,kx([],zx(arguments),!1))||this;return r.handleResize=function(){r.props.graphModel.resize()},r.throttleResize=function(){return M_(r.handleResize,200)},r}return t.prototype.componentDidMount=function(){window.addEventListener("resize",this.throttleResize)},t.prototype.componentDidUpdate=function(){var r=this.props.graphModel.modelToGraphData();this.props.graphModel.eventCenter.emit(C.GRAPH_UPDATED,{data:r})},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.throttleResize)},t.prototype.getComponent=function(r,n,o){o===void 0&&(o="canvas-overlay");var i=this.props.getView,a=i(r.type);return a?E(a,{model:r,graphModel:n,overlay:o},r.id):null},t.prototype.render=function(){var r=this,n=this.props,o=n.graphModel,i=n.tool,a=n.options,s=n.dnd,u=n.snaplineModel;a.width&&"".concat(o.width,"px"),a.height&&"".concat(o.height,"px");var l=a.grid&&po.getGridOptions(a.grid),d=o.fakeNode,f=o.editConfigModel,c=f.adjustEdge;return E("div",{className:"lf-graph","flow-id":o.flowId,children:[E(xx,{graphModel:o,dnd:s,children:[E("g",{className:"lf-base",children:ce(o.sortElements,function(p){return r.getComponent(p,o)})}),d?this.getComponent(d,o):""]}),E(Cx,{graphModel:o,children:[E(Lx,{graphModel:o}),c?E(Ox,{graphModel:o}):"",a.snapline!==!1?E($x,{snaplineModel:u}):""]}),E(Yx,{graphModel:o,tool:i}),a.background&&E(Sx,{background:a.background}),l&&E(po,Yi({},l,{graphModel:o}))]})},t=Gx([jt],t),t}(z),Vx=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qt=function(){return Qt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Qt.apply(this,arguments)},Wx=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},Kx=function(e){Vx(t,e);function t(){var r=e.call(this)||this;return r.onDragStart=function(n){var o=n.event,i=r.props,a=i.anchorData,s=i.nodeModel,u=i.graphModel;u.selectNodeById(s.id),s.autoToFront&&u.toFront(s.id),u.eventCenter.emit(C.ANCHOR_DRAGSTART,{data:a,e:o,nodeModel:s}),r.setState({startX:a.x,startY:a.y,endX:a.x,endY:a.y})},r.onDragging=function(n){var o=n.event,i=r.props,a=i.graphModel,s=i.nodeModel,u=i.anchorData,l=a.transformModel,d=a.eventCenter,f=a.width,c=a.height,p=a.editConfigModel,v=p.autoExpand,h=p.stopMoveGraph;if(o){var g=o.clientX,y=o.clientY,_=a.getPointByClient({x:g,y}),A=_.domOverlayPosition,M=A.x,S=A.y,O=_.canvasOverlayPosition,m=O.x,w=O.y;r.t&&co(r.t);var P=[],T=10;M<10?P=[T,0]:M+10>f?P=[-T,0]:S<10?P=[0,T]:S+10>c&&(P=[0,-T]),r.setState({endX:m,endY:w,dragging:!0}),r.moveAnchorEnd(m,w),P.length>0&&!h&&v&&(r.t=Bf(function(){var X=Wx(P,2),B=X[0],F=X[1];l.translate(B,F);var k=r.state,mt=k.endX,xt=k.endY;r.setState({endX:mt-B,endY:xt-F}),r.moveAnchorEnd(mt-B,xt-F)})),d.emit(C.ANCHOR_DRAG,{data:u,e:o,nodeModel:s})}},r.onDragEnd=function(n){var o=n.event;r.t&&co(r.t);var i=r.checkEnd(o);r.setState({startX:0,startY:0,endX:0,endY:0,dragging:!1}),r.sourceRuleResults.clear(),r.targetRuleResults.clear();var a=r.props,s=a.graphModel,u=a.nodeModel,l=a.anchorData;i&&s.eventCenter.emit(C.ANCHOR_DRAGEND,{data:l,e:o,nodeModel:u,edgeModel:i})},r.checkEnd=function(n){var o,i=r.props,a=i.graphModel,s=i.nodeModel,u=i.anchorData,l=u.x,d=u.y,f=u.id,c=r.state,p=c.endX,v=c.endY,h=c.dragging,g=lo({x:p,y:v},a);if(r.preTargetNode&&r.preTargetNode.state!==V.DEFAULT&&r.preTargetNode.setElementState(V.DEFAULT),!!h&&g&&g.node){var y=g.node,_=g.anchor.id,A="".concat(s.id,"_").concat(y.id,"_").concat(_,"_").concat(f),M=r.sourceRuleResults.get(A)||{},S=M.isAllPass,O=M.msg,m=r.targetRuleResults.get(A)||{},w=m.isAllPass,P=m.msg;if(S&&w){y.setElementState(V.DEFAULT);var T=a.getNodeModelById(g.node.id),X=(o=a.edgeGenerator)===null||o===void 0?void 0:o.call(a,s.getData(),T==null?void 0:T.getData()),B=a.addEdge(Qt(Qt({},X),{sourceNodeId:s.id,sourceAnchorId:f,startPoint:{x:l,y:d},targetNodeId:g.node.id,targetAnchorId:g.anchor.id,endPoint:{x:g.anchor.x,y:g.anchor.y}})),F=r.props.anchorData;return a.eventCenter.emit(C.ANCHOR_DROP,{data:F,e:n,nodeModel:s,edgeModel:B}),B}var k=y.getData();return a.eventCenter.emit(C.CONNECTION_NOT_ALLOWED,{data:k,msg:P||O||"不允许添加连线"}),null}},r.sourceRuleResults=new Map,r.targetRuleResults=new Map,r.state={startX:0,startY:0,endX:0,endY:0,dragging:!1},r.dragHandler=new le({onDragStart:r.onDragStart,onDragging:r.onDragging,onDragEnd:r.onDragEnd}),r}return t.prototype.getAnchorShape=function(){var r=this.props,n=r.anchorData,o=r.style,i=r.node,a=i.getAnchorShape(n);if(a)return a;var s=n.x,u=n.y,l=Qt(Qt({},o),o==null?void 0:o.hover);return E("g",{children:[E(Er,Qt({className:"lf-node-anchor-hover"},l,{x:s,y:u})),E(Er,Qt({className:"lf-node-anchor"},o,{x:s,y:u}))]})},Object.defineProperty(t.prototype,"customTrajectory",{get:function(){var r=this.props.graphModel.customTrajectory;return r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"relateEdges",{get:function(){var r=this.props,n=r.graphModel,o=n.getAnchorIncomingEdge,i=n.getAnchorOutgoingEdge,a=r.anchorData.id;return{incomingEdgeList:o(a),outgoingEdgeList:i(a)}},enumerable:!1,configurable:!0}),t.prototype.moveAnchorEnd=function(r,n){var o,i,a=this.props,s=a.graphModel,u=a.nodeModel,l=a.anchorData,d=lo({x:r,y:n},s);if(d){var f=d.node,c=d.anchor.id;if(this.preTargetNode&&this.preTargetNode!==d.node&&this.preTargetNode.setElementState(V.DEFAULT),l.id===c)return;this.preTargetNode=f;var p="".concat(u.id,"_").concat(f.id,"_").concat(c,"_").concat(l.id);if(!this.targetRuleResults.has(p)){var v=d.anchor,h=u.isAllowConnectedAsSource(f,l,v),g=f.isAllowConnectedAsTarget(u,l,v);this.sourceRuleResults.set(p,fo(h)),this.targetRuleResults.set(p,fo(g))}var y=((o=this.sourceRuleResults.get(p))!==null&&o!==void 0?o:{}).isAllPass,_=((i=this.targetRuleResults.get(p))!==null&&i!==void 0?i:{}).isAllPass;y&&_?f.setElementState(V.ALLOW_CONNECT):f.setElementState(V.NOT_ALLOW_CONNECT)}else this.preTargetNode&&this.preTargetNode.state!==V.DEFAULT&&this.preTargetNode.setElementState(V.DEFAULT)},t.prototype.isShowLine=function(){var r=this.state,n=r.startX,o=r.startY,i=r.endX,a=r.endY,s=Ft(n,o,i,a);return s>10},t.prototype.render=function(){var r=this,n=this.state,o=n.startX,i=n.startY,a=n.endX,s=n.endY,u=this.props,l=u.anchorData.edgeAddable,d=u.edgeStyle;return E("g",{className:"lf-anchor",children:[E("g",{onMouseDown:function(f){l!==!1&&r.dragHandler.handleMouseDown(f)},children:this.getAnchorShape()}),this.isShowLine()&&(this.customTrajectory?this.customTrajectory(Qt({sourcePoint:{x:o,y:i},targetPoint:{x:a,y:s}},d)):E(xr,Qt({x1:o,y1:i,x2:a,y2:s},d,{"pointer-events":"none"})))]})},t}(z),Zx=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fi=function(){return Fi=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Fi.apply(this,arguments)},qx=function(e){Zx(t,e);function t(r){var n=e.call(this,r)||this;return n.style={},n.onDragging=function(o){var i,a=o.event,s=n.props,u=s.graphModel,l=s.nodeModel,d=s.eventCenter,f=u.selectNodes,c=l.x,p=l.y,v=a.clientX,h=a.clientY,g=u.getPointByClient({x:v,y:h}).canvasOverlayPosition,y=g.x,_=g.y,A=new ht(y-c,_-p),M=((i=n.normal)===null||i===void 0?void 0:i.angle(A))-n.defaultAngle,S=new $o(-c,-p).rotate(M).translate(c,p).toString();l.transform=S,l.rotate=M;var O=ce(f,function(w){return w.id});O.indexOf(l.id)===-1&&(O=[l.id]);var m=w_(O,function(w,P){var T=u.getNodeModelById(P);return w[P]=T==null?void 0:T.getMoveDistance(0,0,!1),w},{});O.forEach(function(w){var P=u.getNodeEdges(w);P.forEach(function(T){if(m[T.sourceNodeId]){var X=u.getNodeModelById(T.sourceNodeId),B=X.anchors.find(function(F){return F.id===T.sourceAnchorId});T.updateStartPoint(B)}if(m[T.targetNodeId]){var X=u.getNodeModelById(T.targetNodeId),B=X.anchors.find(function(mt){return mt.id===T.targetAnchorId});T.updateEndPoint(B)}})}),d.emit(C.NODE_ROTATE,{e:a,model:l,data:l.getData()})},n.style=r.style,n.stepperDrag=new le({onDragging:n.onDragging}),n}return t.prototype.render=function(){var r=this,n=this.props.nodeModel,o=n.x,i=n.y,a=n.width,s=n.height,u=o+a/2+20,l=i-s/2-20;return this.normal=new ht(1,0),this.defaultAngle=this.normal.angle(new ht(u-o,l-i)),n.defaultAngle=this.defaultAngle,E("g",{className:"lf-rotate-control",children:E("g",{onMouseDown:function(d){r.stepperDrag.handleMouseDown(d)},children:E(Er,Fi({},this.style,{cx:u,cy:l}))})})},t}(z),Gf={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function r(){for(var i="",a=0;a<arguments.length;a++){var s=arguments[a];s&&(i=o(i,n(s)))}return i}function n(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return r.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var a="";for(var s in i)t.call(i,s)&&i[s]&&(a=o(a,s));return a}function o(i,a){return a?i?i+" "+a:i+a:i}e.exports?(r.default=r,e.exports=r):window.classNames=r})()})(Gf);var Jx=Gf.exports;const Qx=Ku(Jx);var tE=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gi=function(){return Gi=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Gi.apply(this,arguments)},eE=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},zf=function(e){tE(t,e);function t(r){var n=e.call(this)||this;n.mouseDownHandler=function(i){var a=n.props,s=a.draggable,u=a.model,l=a.graphModel,d=l.editConfigModel.nodeTextDraggable;(s??d)&&(n.stepperDrag.model=u,n.stepperDrag.handleMouseDown(i))},n.onDragging=function(i){var a=i.deltaX,s=i.deltaY,u=n.props,l=u.model,d=u.graphModel.transformModel;if(a&&s){var f=eE(d.fixDeltaXY(a,s),2),c=f[0],p=f[1];l.moveText(c,p)}},n.dbClickHandler=function(){var i=n.props,a=i.editable,s=i.graphModel.eventCenter,u=i.model;a&&u.setElementState(V.TEXT_EDIT),s.emit(C.TEXT_DBCLICK,{data:u.text,model:u})};var o=r.draggable;return n.stepperDrag=new le({onDragging:n.onDragging,step:1,eventType:"TEXT",isStopPropagation:o}),n}return t.prototype.getShape=function(){var r=this.props,n=r.model,o=r.graphModel,i=o.editConfigModel,a=n.text,s=a.value,u=a.x,l=a.y,d=a.editable,f=a.draggable,c={x:u,y:l,className:"",value:s},p=n.getTextStyle(),v=i.nodeTextDraggable||f;return E($f,Gi({},c,p,{className:Qx({"lf-element-text":d,"lf-text-draggable":!d&&v,"lf-text-disabled":!d&&!v}),model:n}))},t.prototype.render=function(){var r=this.props.model.text;if(r)return E("g",{onMouseDown:this.mouseDownHandler,onDblClick:this.dbClickHandler,children:this.getShape()})},t}(z),rE=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$t=function(){return $t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},$t.apply(this,arguments)},jn=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},nE=function(e){rE(t,e);function t(r){var n=e.call(this,r)||this;return n.setHoverOn=function(){n.setState({isHovered:!0})},n.setHoverOff=function(){n.setState({isHovered:!1})},n.state={isHovered:!1},n}return t.prototype.getBackground=function(){var r=this.state.isHovered,n=this.props.model,o=n.text,i=n.getTextStyle(),a=i.background||{};if(r&&i.hover&&i.hover.background&&(a=$t($t({},a),i.hover.background)),o!=null&&o.value&&(a==null?void 0:a.fill)!=="transparent"){var s=i.fontSize,u=i.textWidth,l=i.lineHeight,d=i.overflowMode,f=a.wrapPadding,c=o==null?void 0:o.value.split(/[\r\n]/g),p=c.length,v=o.x,h=o.y,g={};if(d==="autoWrap"&&u){var y=If({rows:c,style:{fontSize:"".concat(s,"px"),width:"".concat(u,"px"),lineHeight:l,padding:f},rowsLength:p,className:"lf-get-text-height"});g=$t($t({},a),{x:v,y:h,width:u,height:y})}else{var _=em({rows:c,rowsLength:p,fontSize:s}),A=_.width,M=_.height;if(d==="ellipsis"&&(A=u,M=s+2),typeof a.wrapPadding=="string"){var S=a.wrapPadding.split(",").filter(function(vt){return vt.trim()}).map(function(vt){return parseFloat(vt.trim())});if(S.length>0&&S.length<=4){if(S.length===1){var O=jn(S,1),m=O[0];S=[m,m,m,m]}else if(S.length===2){var w=jn(S,2),P=w[0],T=w[1];S=[P,T,P,T]}else if(S.length===3){var X=jn(S,3),B=X[0],T=X[1],F=X[2];S=[B,T,F,T]}var k=jn(S,4),mt=k[0],xt=k[1],Lt=k[2],ye=k[3];A+=xt+ye,M+=mt+Lt,v=v+(xt-ye)/2,h=h+(Lt-mt)/2}}g=$t($t({},a),{x:v-1,y:h-1,width:A,height:M})}return E(oe,$t({},g))}return null},t.prototype.getShape=function(){var r=this.props.model,n=r.text,o=n.x,i=n.y,a=n.value;if(!a)return null;var s=r.getTextStyle(),u=$t({x:o,y:i,value:a,model:r,className:"lf-element-text"},s);return E("g",{className:"lf-line-text",onMouseEnter:this.setHoverOn,onMouseLeave:this.setHoverOff,children:[this.getBackground(),E($f,$t({},u))]})},t}(zf),oE=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ho=function(){return ho=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ho.apply(this,arguments)},iE=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r},Ln=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},Ce=function(e){oE(t,e);function t(r){var n=e.call(this)||this;n.onDragStart=function(u){var l=u.event,d=n.props,f=d.model,c=d.graphModel;if(l){var p=c.getPointByClient({x:l.clientX,y:l.clientY}).canvasOverlayPosition,v=p.x,h=p.y;n.moveOffset={dx:f.x-v,dy:f.y-h}}},n.onDragging=function(u){var l,d,f,c,p=u.event,v=n.props,h=v.model,g=v.graphModel,y=g.editConfigModel,_=y.stopMoveGraph,A=y.autoExpand,M=g.transformModel,S=g.selectNodes,O=g.width,m=g.height,w=g.gridSize;h.isDragging=!0;var P=p,T=P.clientX,X=P.clientY,B=g.getPointByClient({x:T,y:X}).canvasOverlayPosition,F=B.x,k=B.y,mt=Ln(M.CanvasPointToHtmlPoint([F,k]),2),xt=mt[0],Lt=mt[1];if(F=F+((d=(l=n.moveOffset)===null||l===void 0?void 0:l.dx)!==null&&d!==void 0?d:0),k=k+((c=(f=n.moveOffset)===null||f===void 0?void 0:f.dy)!==null&&c!==void 0?c:0),F=mr(F,w),k=mr(k,w),!O||!m){g.moveNode2Coordinate(h.id,F,k);return}var ye=xt<0||Lt<0||xt>O||Lt>m;if(!(A&&!_&&ye)){var vt=Ln(M.CanvasPointToHtmlPoint([F-h.width/2,k-h.height/2]),2),Pt=vt[0],I=vt[1],U=Ln(M.CanvasPointToHtmlPoint([F+h.width/2,k+h.height/2]),2),Q=U[0],G=U[1],rt=Math.max(w,20),yt=[];Pt<0?yt=[rt,0]:Q>g.width?yt=[-rt,0]:I<0?yt=[0,rt]:G>g.height&&(yt=[0,-rt]),n.t&&co(n.t),h.transform=new $o(-F,-k).rotate(h.rotate).translate(F,k).toString();var q=S.map(function(ut){return ut.id});q.indexOf(h.id)===-1&&(q=[h.id]),yt.length>0&&!_&&A?n.t=Bf(function(){var ut=Ln(yt,2),Mt=ut[0],Et=ut[1];M.translate(Mt??0,Et??0);var Yo=-(Mt??0)/M.SCALE_X,Fo=-(Et??0)/M.SCALE_X;g.moveNodes(q,Yo,Fo)}):g.moveNodes(q,F-h.x,k-h.y)}},n.onDragEnd=function(){n.t&&co(n.t);var u=n.props.model;u.isDragging=!1},n.onMouseOut=function(u){N_()&&n.setHoverOff(u)},n.handleMouseUp=function(){var u=n.props.model;n.mouseUpDrag=u.isDragging},n.handleClick=function(u){var l=n.mouseUpDrag===!1;if(n.startTime){var d=n.props,f=d.model,c=d.graphModel;if(l){var p=f.getData(),v=c.getPointByClient({x:u.clientX,y:u.clientY}),h={data:p,e:u,position:v,isSelected:!1,isMultiple:!1},g=u.button===2,y=u.detail===2;if(!g){var _=c.editConfigModel,A=jf(u,_);h.isMultiple=A,f.isSelected&&!y&&A?(h.isSelected=!1,f.setSelected(!1)):(c.selectNodeById(f.id,A),h.isSelected=!0,n.toFront()),y?(_.nodeTextEdit&&f.text.editable&&(f.setSelected(!1),c.setElementStateById(f.id,V.TEXT_EDIT)),c.eventCenter.emit(C.NODE_DBCLICK,h)):(c.eventCenter.emit(C.ELEMENT_CLICK,h),c.eventCenter.emit(C.NODE_CLICK,h))}}}},n.handleContextMenu=function(u){u.preventDefault();var l=n.props,d=l.model,f=l.graphModel,c=d.getData(),p=f.getPointByClient({x:u.clientX,y:u.clientY});f.setElementStateById(d.id,V.SHOW_MENU,p.domOverlayPosition),d.isSelected||f.selectNodeById(d.id),f.eventCenter.emit(C.NODE_CONTEXTMENU,{data:c,e:u,position:p}),n.toFront()},n.handleMouseDown=function(u){var l=n.props,d=l.model,f=l.graphModel;n.startTime=new Date().getTime();var c=f.editConfigModel;c.adjustNodePosition&&d.draggable&&n.stepDrag&&n.stepDrag.handleMouseDown(u)},n.setHoverOn=function(u){var l=n.props,d=l.model,f=l.graphModel;if(!d.isHovered){var c=d.getData();d.setHovered(!0),f.eventCenter.emit(C.NODE_MOUSEENTER,{data:c,e:u})}},n.setHoverOff=function(u){var l=n.props,d=l.model,f=l.graphModel,c=d.getData();d.isHovered&&(d.setHovered(!1),f.eventCenter.emit(C.NODE_MOUSELEAVE,{data:c,e:u}))};var o=r.graphModel,i=o.gridSize,a=o.eventCenter,s=r.model;return n.stepDrag=new le({onDragStart:n.onDragStart,onDragging:n.onDragging,onDragEnd:n.onDragEnd,step:i,eventType:"NODE",isStopPropagation:!1,eventCenter:a,model:s}),n.modelDisposer=Ol(function(){return n.props},function(u){u&&u.model&&n.stepDrag.setModel(u.model)}),n}return t.prototype.componentWillUnmount=function(){this.modelDisposer&&this.modelDisposer()},t.prototype.componentDidMount=function(){},t.prototype.componentDidUpdate=function(){},t.prototype.getAnchorShape=function(r){return null},t.prototype.getAnchors=function(){var r=this,n=this.props,o=n.model,i=n.graphModel,a=o.isSelected,s=o.isHitable,u=o.isDragging,l=o.isShowAnchor;return s&&(a||l)&&!u?ce(o.anchors,function(d,f){var c=o.getAnchorLineStyle(d),p=o.getAnchorStyle(d);return E(Kx,{anchorData:d,node:r,style:p,edgeStyle:c,anchorIndex:f,nodeModel:o,graphModel:i,setHoverOff:r.setHoverOff})}):[]},t.prototype.getRotateControl=function(){var r=this.props,n=r.model,o=r.graphModel,i=o.editConfigModel,a=i.isSilentMode,s=i.allowRotate,u=n.isSelected,l=n.isHitable,d=n.rotatable,f=n.isHovered,c=s&&d,p=n.getRotateControlStyle();if(!a&&l&&(u||f)&&c)return E(qx,{graphModel:o,nodeModel:n,eventCenter:o.eventCenter,style:p})},t.prototype.getResizeControl=function(){var r=this.props,n=r.model,o=r.graphModel,i=o.editConfigModel,a=i.isSilentMode,s=i.allowResize,u=n.isSelected,l=n.isHitable,d=n.resizable,f=n.isHovered,c=s&&d,p=n.getResizeControlStyle();return!a&&l&&(u||f)&&c?E(wm,{style:p,model:n,graphModel:o}):null},t.prototype.getText=function(){var r,n=this.props,o=n.model,i=n.graphModel,a=i.editConfigModel;if(a.nodeTextMode!==Wt.TEXT||o.state===V.TEXT_EDIT)return null;if(o.text){var s=!1;return a.nodeTextDraggable&&o.text.draggable&&(s=!0),E(zf,{editable:a.nodeTextEdit&&((r=o.text.editable)!==null&&r!==void 0?r:!0),model:o,graphModel:i,draggable:s})}return null},t.prototype.getStateClassName=function(){var r=this.props.model,n=r.state,o=r.isDragging,i=r.isSelected,a="lf-node";switch(n){case V.ALLOW_CONNECT:a+=" lf-node-allow";break;case V.NOT_ALLOW_CONNECT:a+=" lf-node-not-allow";break;default:a+=" lf-node-default";break}return o&&(a+=" lf-dragging"),i&&(a+=" lf-node-selected"),a},t.prototype.toFront=function(){var r=this.props,n=r.model,o=r.graphModel;n.autoToFront&&o.toFront(n.id)},t.prototype.render=function(){var r=this.props,n=r.model,o=r.graphModel,i=o.editConfigModel,a=i.hideAnchors,s=i.adjustNodePosition,u=i.allowRotate,l=i.allowResize,d=o.gridSize,f=o.transformModel.SCALE_X,c=n.isHitable,p=n.draggable,v=n.transform,h=n.getOuterGAttributes(),g=h.className,y=g===void 0?"":g,_=iE(h,["className"]),A=E("g",{className:"lf-node-content",children:[E("g",{transform:v,children:[this.getShape(),this.getText(),u&&this.getRotateControl(),l&&this.getResizeControl()]}),!a&&this.getAnchors()]}),M;return c?(s&&p&&this.stepDrag.setStep(d*f),M=E("g",ho({className:"".concat(this.getStateClassName()," ").concat(y),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick,onMouseEnter:this.setHoverOn,onMouseOver:this.setHoverOn,onMouseLeave:this.setHoverOff,onMouseOut:this.onMouseOut,onContextMenu:this.handleContextMenu},_,{children:A}))):M=E("g",ho({className:"".concat(this.getStateClassName()," ").concat(y)},_,{children:A})),M},t.isObserved=!1,t}(z),aE=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zi=function(){return zi=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},zi.apply(this,arguments)},Nu=function(e){aE(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getShape=function(){var r=this.props.model,n=r.getNodeStyle();return E(oe,zi({},n,{x:r.x,y:r.y,width:r.width,height:r.height,radius:r.radius}))},t}(Ce),sE=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ki=function(){return ki=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ki.apply(this,arguments)},Cu=function(e){sE(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getShape=function(){var r=this.props.model,n=r.x,o=r.y,i=r.r,a=r.getNodeStyle();return E(Er,ki({},a,{x:n,y:o,r:i}))},t}(Ce),uE=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),vo=function(){return vo=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},vo.apply(this,arguments)},Ru=function(e){uE(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getShape=function(){var r=this.props.model,n=r,o=n.x,i=n.y,a=n.width,s=n.height,u=n.points,l=r.getNodeStyle(),d={transform:"matrix(1 0 0 1 ".concat(o-a/2," ").concat(i-s/2,")")};return E("g",vo({},d,{children:E(Xf,vo({},l,{points:u,x:o,y:i}))}))},t}(Ce),lE=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ui=function(){return Ui=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ui.apply(this,arguments)},ju=function(e){lE(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getShape=function(){var r=this.props.model,n=r.getNodeStyle();return E("g",{children:E(Xf,Ui({},n,{points:r.points,x:r.x,y:r.y}))})},t}(Ce),fE=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vi=function(){return Vi=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Vi.apply(this,arguments)},Lu=function(e){fE(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getShape=function(){var r=this.props.model,n=r.getNodeStyle();return E(gm,Vi({},n,{x:r.x,y:r.y,rx:r.rx,ry:r.ry}))},t}(Ce),dE=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vr=function(){return Vr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Vr.apply(this,arguments)},Iu=function(e){dE(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getBackground=function(){var r=this.props.model,n=r.getTextStyle(),o=r.width,i=r.height,a=r.x,s=r.y,u=Vr(Vr({},n.background),{x:a,y:s,width:o,height:i});return E(oe,Vr({},u))},t.prototype.getResizeControl=function(){return null},t.prototype.getShape=function(){return E("g",{children:this.getBackground()})},t}(Ce),cE=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wi=function(){return Wi=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Wi.apply(this,arguments)},pE=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},hE=function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},Bu=function(e){cE(t,e);function t(){var r=e.apply(this,hE([],pE(arguments),!1))||this;return r.ref=ea(),r}return Object.defineProperty(t.prototype,"rootEl",{get:function(){return this.ref.current},enumerable:!1,configurable:!0}),t.prototype.setHtml=function(r){r.appendChild(document.createElement("div"))},t.prototype.confirmUpdate=function(r){this.setHtml(r)},t.prototype.shouldUpdate=function(){return this.preProperties&&this.preProperties===this.currentProperties?!1:(this.preProperties=this.currentProperties,!0)},t.prototype.componentDidMount=function(){this.shouldUpdate()&&this.rootEl&&this.setHtml(this.rootEl)},t.prototype.componentDidUpdate=function(){this.shouldUpdate()&&this.rootEl&&this.confirmUpdate(this.rootEl)},t.prototype.componentWillUnmount=function(){this.rootEl.innerHTML=""},t.prototype.getShape=function(){var r=this.props.model,n=r.x,o=r.y,i=r.height,a=r.width,s=r.getNodeStyle();return this.currentProperties=JSON.stringify(r.properties),E("foreignObject",Wi({},s,{x:n-a/2,y:o-i/2,width:a,height:i,ref:this.ref}))},t}(Ce),vE=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xt=function(){return Xt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Xt.apply(this,arguments)},yE=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r},gE=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},re;(function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"})(re||(re={}));var $u=function(e){vE(t,e);function t(r){var n=e.call(this)||this;n.handleMouseDown=function(u){n.stepDrag&&n.stepDrag.handleMouseDown(u)},n.onDragStart=function(){var u=n.props,l=u.x,d=u.y,f=u.edgeModel,c=f.startPoint,p=f.endPoint,v=f.pointsList;n.oldEdge={startPoint:c,endPoint:p,pointsList:v},n.setState({endX:l,endY:d,dragging:!0})},n.onDragging=function(u){var l=u.deltaX,d=u.deltaY,f=n.state,c=f.endX,p=f.endY,v=n.props,h=v.graphModel,g=v.type,y=h.transformModel,_=h.editConfigModel,A=gE(y.moveCanvasPointByHtml([c,p],l,d),2),M=A[0],S=A[1];n.setState({endX:M,endY:S,dragging:!0});var O=n.props.edgeModel,m=lo({x:c,y:p},h);if(m&&m.node&&n.isAllowAdjust(m).pass){var w=O.startPoint,P=O.endPoint,T=O.sourceNode,X=O.targetNode,B=g===re.SOURCE?{startPoint:{x:m.anchor.x,y:m.anchor.y},endPoint:{x:P.x,y:P.y},sourceNode:m.node,targetNode:X}:{startPoint:{x:w.x,y:w.y},endPoint:{x:m.anchor.x,y:m.anchor.y},sourceNode:T,targetNode:m.node};O.updateAfterAdjustStartAndEnd(B)}else g===re.SOURCE?O.updateStartPoint({x:M,y:S}):O.updateEndPoint({x:M,y:S});O.text.value&&_.adjustEdge&&O.setText(Object.assign({},O.text,O.textPosition))},n.onDragEnd=function(u){var l,d,f,c=u.event;try{n.setState({dragging:!1});var p=n.props,v=p.graphModel,h=p.edgeModel,g=p.type,y=n.state,_=y.endX,A=y.endY,M=y.dragging,S=lo({x:_,y:A},v);if(!M)return;var O=!1,m=void 0;if(S&&S.node){var w=n.isAllowAdjust(S),P=w.pass,T=w.msg,X=w.newTargetNode;if(P){var B=h.getData(),F=B.text,k=B.sourceAnchorId,mt=k===void 0?"":k,xt=B.targetAnchorId,Lt=xt===void 0?"":xt,ye=yE(B,["text","sourceAnchorId","targetAnchorId"]);if(m=Xt(Xt({sourceAnchorId:mt,targetAnchorId:Lt},ye),{text:(F==null?void 0:F.value)||""}),g===re.SOURCE){var vt=v.getNodeModelById(S.node.id),Pt=v.getNodeModelById(h.targetNodeId),I=(l=v.edgeGenerator)===null||l===void 0?void 0:l.call(v,vt==null?void 0:vt.getData(),Pt==null?void 0:Pt.getData(),m);m=Xt(Xt({},I),{sourceNodeId:S.node.id,sourceAnchorId:S.anchor.id,startPoint:{x:S.anchor.x,y:S.anchor.y},targetNodeId:h.targetNodeId,endPoint:Xt({},h.endPoint)}),h.sourceNodeId===S.node.id&&h.sourceAnchorId===S.anchor.id&&(O=!0)}else if(g===re.TARGET){var vt=v.getNodeModelById(h.sourceNodeId),Pt=v.getNodeModelById(S.node.id),I=(d=v.edgeGenerator)===null||d===void 0?void 0:d.call(v,vt==null?void 0:vt.getData(),Pt==null?void 0:Pt.getData(),m);m=Xt(Xt({},I),{sourceNodeId:h.sourceNodeId,startPoint:Xt({},h.startPoint),targetNodeId:S.node.id,targetAnchorId:S.anchor.id,endPoint:{x:S.anchor.x,y:S.anchor.y}}),h.targetNodeId===S.node.id&&h.targetAnchorId===S.anchor.id&&(O=!0)}}else{O=!0;var U=X.getData();v.eventCenter.emit(C.CONNECTION_NOT_ALLOWED,{data:U,msg:T})}}else O=!0;if(O)n.recoveryEdge();else{var Q=h.getData();v.deleteEdgeById(h.id);var G=v.addEdge(Xt({},m));v.eventCenter.emit(C.EDGE_EXCHANGE_NODE,{data:{newEdge:G.getData(),oldEdge:Q}})}(f=n.preTargetNode)===null||f===void 0||f.setElementState(V.DEFAULT)}finally{var v=n.props.graphModel;v.eventCenter.emit(C.ADJUST_POINT_DRAGEND,{e:c,data:n.stepDragData})}},n.recoveryEdge=function(){var u=n.props.edgeModel,l=n.oldEdge,d=l.startPoint,f=l.endPoint,c=l.pointsList;u.updateStartPoint(d),u.updateEndPoint(f),u.modelType!==Y.LINE_EDGE&&(u.pointsList=c??[],u.initPoints())},n.getAdjustPointStyle=function(){var u=n.props.graphModel.theme,l=u.edgeAdjust;return l},n.state={dragging:!1,endX:0,endY:0},n.targetRuleResults=new Map,n.sourceRuleResults=new Map;var o=r.type,i=r.edgeModel,a=r.graphModel,s=a.eventCenter;return n.stepDragData={type:o,edgeData:i.getData()},n.stepDrag=new le({onDragStart:n.onDragStart,onDragging:n.onDragging,onDragEnd:n.onDragEnd,eventType:"ADJUST_POINT",isStopPropagation:!1,eventCenter:s,data:n.stepDragData}),n}return t.prototype.isAllowAdjust=function(r){var n=this.props,o=n.edgeModel,i=o.id,a=o.sourceNode,s=o.targetNode,u=o.sourceAnchorId,l=o.targetAnchorId,d=n.type,f,c,p,v;if(d===re.SOURCE?(f=r.node,c=s,p=r.anchor,v=s.getAnchorInfo(l)):(f=a,c=r.node,v=r.anchor,p=a.getAnchorInfo(u)),this.preTargetNode&&this.preTargetNode!==r.node&&this.preTargetNode.setElementState(V.DEFAULT),this.preTargetNode=r.node,v.id===p.id)return{pass:!1,msg:"",newTargetNode:c};var h="".concat(f.id,"_").concat(c.id,"_").concat(p.id,"_").concat(v.id);if(!this.targetRuleResults.has(h)){var g=f.isAllowConnectedAsSource(c,p,v,i),y=c.isAllowConnectedAsTarget(f,p,v,i);this.sourceRuleResults.set(h,fo(g)),this.targetRuleResults.set(h,fo(y))}var _=this.sourceRuleResults.get(h),A=_.isAllPass,M=_.msg,S=this.targetRuleResults.get(h),O=S.isAllPass,m=S.msg,w=A&&O?V.ALLOW_CONNECT:V.NOT_ALLOW_CONNECT;return d===re.SOURCE?f.setElementState(w):c.setElementState(w),{pass:A&&O,msg:m||M,newTargetNode:c}},t.prototype.render=function(){var r=this.props,n=r.x,o=r.y,i=r.getAdjustPointShape,a=r.edgeModel,s=this.state.dragging;return E("g",{pointerEvents:s?"none":"",onMouseDown:this.handleMouseDown,children:s?"":i(n,o,a)})},t}(z),_E=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ki=function(){return Ki=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ki.apply(this,arguments)};(function(e){_E(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getArrowAttributes=function(){var r=this.props,n=r.arrowInfo,o=r.style,i=n.start,a=n.end,s={start:i,end:a,offset:o.offset,verticalLength:o.verticalLength,type:"end"},u=en(s),l=u.leftX,d=u.leftY,f=u.rightX,c=u.rightY;return Ki({d:"M".concat(l," ").concat(d," L").concat(a.x," ").concat(a.y," L").concat(f," ").concat(c," z")},o)},t.prototype.getShape=function(){var r=this.getArrowAttributes(),n=r.d,o=r.strokeWidth,i=r.stroke,a=r.fill;return E(on,{d:n,fill:a,strokeWidth:o,stroke:i})},t.prototype.render=function(){return E("g",{className:"lf-arrow",children:this.getShape()})},t})(z);var mE=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wr=function(){return Wr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Wr.apply(this,arguments)},xE=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},Ho=function(e){mE(t,e);function t(){var r=e.call(this)||this;return r.textRef=ea(),r.handleHover=function(n,o){var i=r.props,a=i.model,s=i.graphModel.eventCenter;a.setHovered(n);var u=n?C.EDGE_MOUSEENTER:C.EDGE_MOUSELEAVE,l=a.getData();s.emit(u,{data:l,e:o})},r.setHoverOn=function(n){var o=r.props.model.isHovered;o||(r.textRef&&r.textRef.current&&r.textRef.current.setHoverOn(),r.handleHover(!0,n))},r.setHoverOff=function(n){var o=r.props.model.isHovered;o&&(r.textRef&&r.textRef.current&&r.textRef.current.setHoverOff(),r.handleHover(!1,n))},r.handleContextMenu=function(n){n.preventDefault(),r.contextMenuTime=new Date().getTime(),r.clickTimer&&clearTimeout(r.clickTimer);var o=r.props,i=o.model,a=o.graphModel,s=a.getPointByClient({x:n.clientX,y:n.clientY});a.setElementStateById(i.id,V.SHOW_MENU,s.domOverlayPosition),r.toFront(),i.isSelected||a.selectEdgeById(i.id);var u=i==null?void 0:i.getData();a.eventCenter.emit(C.EDGE_CONTEXTMENU,{data:u,e:n,position:s})},r.handleMouseDown=function(n){n.stopPropagation(),r.startTime=new Date().getTime()},r.handleMouseUp=function(n){if(r.startTime){var o=new Date().getTime()-r.startTime;if(!(o>200)){var i=n.button===2;if(!i){var a=n.detail===2,s=r.props,u=s.model,l=s.graphModel,d=u==null?void 0:u.getData(),f=l.getPointByClient({x:n.clientX,y:n.clientY});if(a){var c=l.editConfigModel,p=l.textEditElement,v=u.id,h=u.text,g=u.modelType;if(p&&p.id===v&&l.setElementStateById(v,V.DEFAULT),c.edgeTextEdit&&h.editable&&(u.setSelected(!1),l.setElementStateById(v,V.TEXT_EDIT)),g===Y.POLYLINE_EDGE){var y=u,_=l.getPointByClient({x:n.x,y:n.y}).canvasOverlayPosition,A=_.x,M=_.y;y.dbClickPosition=Rf({x:A,y:M},y.points)}l.eventCenter.emit(C.EDGE_DBCLICK,{data:d,e:n,position:f})}else l.eventCenter.emit(C.ELEMENT_CLICK,{data:d,e:n,position:f}),l.eventCenter.emit(C.EDGE_CLICK,{data:d,e:n,position:f});var S=l.editConfigModel;l.selectEdgeById(u.id,jf(n,S)),r.toFront()}}}},r}return t.prototype.getShape=function(){return E("g",{children:this.getEdge()})},t.prototype.getTextStyle=function(){},t.prototype.getText=function(){var r,n=this.props,o=n.model,i=n.graphModel,a=i.editConfigModel;if(a.edgeTextMode!==Wt.TEXT||o.state===V.TEXT_EDIT)return null;if(o.text){var s=!1;return a.edgeTextDraggable&&o.text.draggable&&(s=!0),E(nE,{ref:this.textRef,editable:a.edgeTextEdit&&((r=o.text.editable)!==null&&r!==void 0?r:!0),model:o,graphModel:i,draggable:s})}return null},t.prototype.getArrowInfo=function(){var r=this.props.model,n=r.startPoint,o=r.endPoint,i=r.isSelected,a=this.state.hover;return{start:n,end:o,hover:a,isSelected:i}},t.prototype.getLastTwoPoints=function(){var r=this.props.model,n=r.startPoint,o=r.endPoint;return[n,o]},t.prototype.getArrowStyle=function(){return console.error("getArrowStyle is deprecated in 1.2.0, please use model.getArrowStyle"),null},t.prototype.getArrow=function(){var r=this.props.model,n=r.id,o=r.getArrowStyle(),i=o.refY,a=i===void 0?0:i,s=o.refX,u=s===void 0?2:s,l=xE(this.getLastTwoPoints(),2),d=l[0],f=l[1],c="auto";return d!==null&&f!==null&&(c=Ym(Hm({x:f.x-d.x,y:f.y-d.y,z:0}))),E("g",{children:E("defs",{children:[E("marker",{id:"marker-start-".concat(n),refX:-u,refY:a,overflow:"visible",orient:"auto",markerUnits:"userSpaceOnUse",children:this.getStartArrow()}),E("marker",{id:"marker-end-".concat(n),refX:u,refY:a,overflow:"visible",orient:c,markerUnits:"userSpaceOnUse",children:this.getEndArrow()})]})})},t.prototype.getStartArrow=function(){return E("path",{})},t.prototype.getEndArrow=function(){var r=this.props.model,n=r.getArrowStyle(),o=n.stroke,i=n.strokeWidth,a=n.offset,s=n.verticalLength;return E("path",{stroke:o,fill:o,strokeWidth:i,transform:"rotate(180)",d:"M 0 0 L ".concat(a," -").concat(s," L ").concat(a," ").concat(s," Z")})},t.prototype.getAdjustPointShape=function(r,n,o){var i=o.getAdjustPointStyle();return E(Er,Wr({className:"lf-edge-adjust-point"},i,{x:r,y:n}))},t.prototype.getAdjustPoints=function(){var r=this.props,n=r.model,o=r.graphModel,i=o.editConfigModel,a=i.adjustEdgeStartAndEnd,s=i.adjustEdgeStart,u=i.adjustEdgeEnd,l=n.getAdjustStart(),d=n.getAdjustEnd();return E("g",{children:[a&&s&&E($u,Wr({type:re.SOURCE},l,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:n,graphModel:o})),a&&u&&E($u,Wr({type:re.TARGET},d,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:n,graphModel:o}))]})},t.prototype.getAnimation=function(){console.error("getAnimation is deprecated in 1.2.0, please use model.getEdgeAnimationStyle")},t.prototype.getAppendWidth=function(){return E("g",{})},t.prototype.getAppend=function(){return E("g",{className:"lf-edge-append",children:this.getAppendWidth()})},t.prototype.getEdge=function(){return null},t.prototype.toFront=function(){var r=this.props,n=r.graphModel,o=r.model;n.toFront(o.id)},t.prototype.render=function(){var r=this.props.model,n=r.isSelected,o=r.isHitable,i=r.isShowAdjustPoint;return E("g",{children:[E("g",{className:["lf-edge",!o&&"pointer-none",n&&"lf-edge-selected"].filter(Boolean).join(" "),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onContextMenu:this.handleContextMenu,onMouseOver:this.setHoverOn,onMouseEnter:this.setHoverOn,onMouseLeave:this.setHoverOff,children:[this.getShape(),this.getAppend(),this.getText(),this.getArrow()]}),i&&n?this.getAdjustPoints():""]})},t.isObserved=!1,t}(z),EE=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zi=function(){return Zi=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Zi.apply(this,arguments)},bE=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},Xu=function(e){EE(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getEdge=function(){var r=this.props.model,n=r.getEdgeStyle(),o=r,i=o.path,a=o.isAnimation,s=o.arrowConfig,u=r.getEdgeAnimationStyle(),l=u.strokeDasharray,d=u.stroke,f=u.strokeDashoffset,c=u.animationName,p=u.animationDuration,v=u.animationIterationCount,h=u.animationTimingFunction,g=u.animationDirection;return E(on,Zi({d:i},n,s,a?{strokeDasharray:l,stroke:d,style:{strokeDashoffset:f,animationName:c,animationDuration:p,animationIterationCount:v,animationTimingFunction:h,animationDirection:g}}:{}))},t.prototype.getAppendWidth=function(){var r=this.props.model.path;return E(on,{d:r,strokeWidth:10,stroke:"transparent",fill:"none"})},t.prototype.getArrowInfo=function(){var r=this.props.model,n=this.state.hover,o=r.isSelected,i=r.getArrowStyle().offset,a=r.pointsList.map(function(f){return{x:f.x,y:f.y}}),s=bE(uu(a,i),2),u=s[0],l=s[1],d={start:u,end:l,hover:n,isSelected:o};return d},t.prototype.getLastTwoPoints=function(){var r=this.props.model,n=r.getArrowStyle().offset,o=r.pointsList.map(function(i){return{x:i.x,y:i.y}});return uu(o,n)},t}(Ho),OE=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),qi=function(){return qi=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},qi.apply(this,arguments)},Hu=function(e){OE(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getEdge=function(){var r=this.props.model,n=r.startPoint,o=r.endPoint,i=r.isAnimation,a=r.arrowConfig,s=r.getEdgeStyle(),u=r.getEdgeAnimationStyle(),l=u.strokeDasharray,d=u.stroke,f=u.strokeDashoffset,c=u.animationName,p=u.animationDuration,v=u.animationIterationCount,h=u.animationTimingFunction,g=u.animationDirection;return E(xr,qi({},s,{x1:n.x,y1:n.y,x2:o.x,y2:o.y},a,i?{strokeDasharray:l,stroke:d,style:{strokeDashoffset:f,animationName:c,animationDuration:p,animationIterationCount:v,animationTimingFunction:h,animationDirection:g}}:{}))},t.prototype.getAppendWidth=function(){var r=this.props.model,n=r.startPoint,o=r.endPoint,i={start:n,end:o},a=J_(i),s=a.d,u=a.strokeWidth,l=a.fill,d=a.strokeDasharray,f=a.stroke;return E(on,{d:s,fill:l,strokeWidth:u,stroke:f,strokeDasharray:d})},t}(Ho),wE=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ie=function(){return Ie=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ie.apply(this,arguments)},SE=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},Yu=function(e){wE(t,e);function t(){var r=e.call(this)||this;return r.onDragStart=function(){var n=r.props.model;n.dragAppendStart(),r.isShowAdjustPointTemp=n.isShowAdjustPoint,n.isShowAdjustPoint=!1},r.onDragging=function(n){var o=n.deltaX,i=n.deltaY,a=r.props,s=a.model,u=a.graphModel;r.isDragging=!0;var l=u.transformModel,d=u.editConfigModel,f=SE(l.fixDeltaXY(o,i),2),c=f[0],p=f[1],v=s,h=d.adjustEdgeMiddle;h?r.appendInfo=v.dragAppendSimple(r.appendInfo,{x:c,y:p}):r.appendInfo=v.dragAppend(r.appendInfo,{x:c,y:p})},r.onDragEnd=function(){var n,o=r.props,i=o.model,a=o.graphModel.eventCenter,s=i;s.dragAppendEnd(),r.isDragging=!1,s.isShowAdjustPoint=(n=r.isShowAdjustPointTemp)!==null&&n!==void 0?n:!1,r.appendInfo=void 0,a.emit(C.EDGE_ADJUST,{data:s.getData()})},r.beforeDragStart=function(n,o){o.draggable&&r.drag.handleMouseDown(n),r.appendInfo=o},r.drag=new le({onDragStart:r.onDragStart,onDragging:r.onDragging,onDragEnd:r.onDragEnd,isStopPropagation:!1}),r}return t.prototype.getEdge=function(){var r=this.props.model,n=r.points,o=r.isAnimation,i=r.arrowConfig,a=r.getEdgeStyle(),s=r.getEdgeAnimationStyle(),u=s.strokeDasharray,l=s.stroke,d=s.strokeDashoffset,f=s.animationName,c=s.animationDuration,p=s.animationIterationCount,v=s.animationTimingFunction,h=s.animationDirection;return E(xm,Ie({points:n},a,i,o?{strokeDasharray:u,stroke:l,style:{strokeDashoffset:d,animationName:f,animationDuration:c,animationIterationCount:p,animationTimingFunction:v,animationDirection:h}}:{}))},t.prototype.getArrowInfo=function(){var r=this.props.model,n=r.points,o=r.isSelected,i=this.state.hover,a=ze(n),s=a[0],u=a[0];return a.length>=2&&(s=a[a.length-2],u=a[a.length-1]),{start:s,end:u,hover:i,isSelected:o}},t.prototype.getLastTwoPoints=function(){var r=this.props.model,n=r.points,o=ze(n),i=o[0],a=o[0];return o.length>=2&&(i=o[o.length-2],a=o[o.length-1]),[i,a]},t.prototype.getAppendAttributes=function(r){var n=r.start,o=r.end,i;if(n.x===o.x&&n.y===o.y)i="";else{var a={start:n,end:o,offset:10,verticalLength:5},s=en(Ie(Ie({},a),{type:"start"})),u=en(Ie(Ie({},a),{type:"end"}));i="M".concat(s.leftX," ").concat(s.leftY,`
      L`).concat(s.rightX," ").concat(s.rightY,`
      L`).concat(u.rightX," ").concat(u.rightY,`
      L`).concat(u.leftX," ").concat(u.leftY," z")}return{d:i,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}},t.prototype.getAppendShape=function(r){var n=this.getAppendAttributes(r),o=n.d,i=n.strokeWidth,a=n.fill,s=n.strokeDasharray,u=n.stroke;return E(on,{d:o,fill:a,strokeWidth:i,stroke:u,strokeDasharray:s})},t.prototype.getAppendWidth=function(){for(var r=this,n=this.props,o=n.model,i=n.graphModel,a=o.pointsList,s=o.draggable,u=[],l=a.length,d=function(p){var v="lf-polyline-append",h={start:{x:a[p].x,y:a[p].y},end:{x:a[p+1].x,y:a[p+1].y},startIndex:p,endIndex:p+1,direction:ot.HORIZONTAL,draggable:!0},g=E("g",{className:v,children:f.getAppendShape(h)}),y=i.editConfigModel,_=y.adjustEdge,A=y.adjustEdgeMiddle;if(_&&s){var M=h.startIndex,S=h.endIndex,O=A&&(M===0||S===l-1);h.draggable=!O,h.start.x===h.end.x?(h.draggable&&(v+="-ew-resize"),h.direction=ot.VERTICAL):h.start.y===h.end.y&&(h.draggable&&(v+="-ns-resize"),h.direction=ot.HORIZONTAL),g=E("g",{className:f.isDragging?"lf-dragging":"lf-drag-able",onMouseDown:function(m){return r.beforeDragStart(m,h)},children:E("g",{className:v,children:f.getAppendShape(h)})})}u.push(g)},f=this,c=0;c<l-1;c++)d(c);return E("g",{children:u})},t}(Ho),or=function(){return or=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},or.apply(this,arguments)},AE=function(){function e(t){var r=this;this.nodeConfig=null,this.fakeNode=null,this.stopDrag=function(){r.nodeConfig=null,window.document.removeEventListener("mouseup",r.stopDrag)},this.dragEnter=function(o){!r.nodeConfig||r.fakeNode||(r.fakeNode=r.lf.createFakeNode(or(or({},r.nodeConfig),r.clientToLocalPoint({x:o.clientX,y:o.clientY}))))},this.onDragOver=function(o){if(o.preventDefault(),r.fakeNode){var i=r.clientToLocalPoint({x:o.clientX,y:o.clientY}),a=i.x,s=i.y;r.fakeNode.moveTo(a,s);var u=r.fakeNode.getData();r.lf.setNodeSnapLine(u),r.lf.graphModel.eventCenter.emit(C.NODE_DND_DRAG,{data:u})}return!1},this.onDragLeave=function(){r.fakeNode&&(r.lf.removeNodeSnapLine(),r.lf.graphModel.removeFakeNode(),r.fakeNode=null)},this.onDrop=function(o){!r.lf.graphModel||!o||!r.nodeConfig||(r.lf.addNode(or(or({},r.nodeConfig),r.clientToLocalPoint({x:o.clientX,y:o.clientY})),C.NODE_DND_ADD,o),o.preventDefault(),o.stopPropagation(),r.nodeConfig=null,r.lf.removeNodeSnapLine(),r.lf.graphModel.removeFakeNode(),r.fakeNode=null)};var n=t.lf;this.lf=n}return e.prototype.clientToLocalPoint=function(t){var r=t.x,n=t.y,o=Oa(this.lf.options,["grid","size"]),i=this.lf.graphModel.getPointByClient({x:r,y:n}),a=i.canvasOverlayPosition,s=a.x,u=a.y;return{x:mr(s,o),y:mr(u,o)}},e.prototype.startDrag=function(t){var r=this.lf.graphModel.editConfigModel;r!=null&&r.isSilentMode||(this.nodeConfig=t,window.document.addEventListener("mouseup",this.stopDrag))},e.prototype.eventMap=function(){return{onMouseEnter:this.dragEnter,onMouseOver:this.dragEnter,onMouseMove:this.onDragOver,onMouseLeave:this.onDragLeave,onMouseUp:this.onDrop}},e}();function ME(e,t){e.on("node:mousemove",function(r){var n=r.data;t.setNodeSnapLine(n)}),e.on("node:mouseup",function(){t.clearSnapline()})}var TE=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),fe=function(){return fe=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},fe.apply(this,arguments)},PE=function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},DE=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},NE=function(e){TE(t,e);function t(r){var n=e.call(this,r)||this;return n.ref=ea(),n.__prevText={type:"",text:"",id:""},n.keyupHandler=function(o){var i=n.props.graphModel.textEditElement;o.key==="Enter"&&o.altKey&&(i==null||i.setElementState(V.DEFAULT))},n.inputHandler=function(o){var i=o.target.innerText,a=n.props.graphModel.textEditElement;a&&(n.__prevText={type:a.type,text:i.replace(/(\r\n)+$|(\n)+$/,""),id:a.id})},n.keydownHandler=function(o){o.stopPropagation()},n.state={style:{left:0,top:0}},n}return t.getDerivedStateFromProps=function(r){var n,o=r.textEditElement,i=r.graphModel,a=i.transformModel,s=i.theme,u=s.inputText,l;if(o){if(!(!((n=o.text)===null||n===void 0)&&n.value)&&o.BaseType===at.EDGE){var d=o.text,f=o.textPosition,c=f.x,p=f.y;d.x=c,d.y=p,o.setText(d)}var v={resize:"auto",whiteSpace:"normal",wordBreak:"break-all"};if(o.BaseType===at.EDGE){var h=s.edgeText,g=h.overflowMode,y=h.lineHeight,_=h.wrapPadding,A=h.textWidth;A&&g==="autoWrap"&&(l=fe(fe({},v),{width:A,minWidth:A,lineHeight:y,padding:_}))}else if(o.BaseType===at.NODE){var M=s.nodeText,g=M.overflowMode,y=M.lineHeight,_=M.wrapPadding,A=M.textWidth,S=o.width,O=o.modelType,m=o.textWidth,w=m||A||S;(O!==Y.TEXT_NODE&&g==="autoWrap"||O===Y.TEXT_NODE&&A)&&(l=fe(fe({},v),{width:w,minWidth:w,lineHeight:y,padding:_}))}var P=o.text,T=P.x,X=P.y,B=DE(a.CanvasPointToHtmlPoint([T,X]),2),F=B[0],k=B[1];return{style:fe(fe({left:F,top:k},l),u)}}return null},t.prototype.componentDidUpdate=function(){var r=this.props.graphModel;if(this.ref.current&&(this.ref.current.focus(),this.placeCaretAtEnd(this.ref.current)),this.__prevText.id!==""){var n=this.__prevText,o=n.text,i=n.id;r.updateText(i,o),r.eventCenter.emit(C.TEXT_UPDATE,{data:fe({},this.__prevText)}),this.__prevText.id="",this.__prevText.text="",this.__prevText.type=""}},t.prototype.placeCaretAtEnd=function(r){if(window.getSelection!==void 0&&document.createRange!==void 0){var n=document.createRange();n.selectNodeContents(r),n.collapse(!1);var o=window.getSelection();o==null||o.removeAllRanges(),o==null||o.addRange(n)}},t.prototype.render=function(){var r,n=this.props.graphModel.textEditElement,o=this.state.style;return n?E("div",{contentEditable:!0,className:"lf-text-input",style:o,ref:this.ref,onKeyUp:this.keyupHandler,onKeyDown:this.keydownHandler,onKeyPress:this.keydownHandler,onInput:this.inputHandler,children:(r=n.text)===null||r===void 0?void 0:r.value},n.id):null},t.toolName="text-edit-tool",t=PE([jt],t),t}(z),CE=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),RE=function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},ri=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},jE=function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},LE=function(e){CE(t,e);function t(r){var n=e.call(this,r)||this;n.handleMouseDown=function(s){n.stepDrag.handleMouseDown(s)},n.handleWheelEvent=function(s){var u,l;s.preventDefault();var d=s.deltaX,f=s.deltaY,c=s.clientX,p=s.clientY,v=s.ctrlKey,h=new WheelEvent("wheel",{deltaX:d,deltaY:f,clientX:c,clientY:p,ctrlKey:v});(l=(u=n.props.lf.container)===null||u===void 0?void 0:u.querySelector('.lf-canvas-overlay[name="canvas-overlay"]'))===null||l===void 0||l.dispatchEvent(h)},n.onDragging=function(s){var u=s.deltaX,l=s.deltaY,d=n.props,f=d.graphModel,c=d.lf,p=c.getTransform(),v=p.SCALE_X,h=p.SCALE_Y,g=f.getSelectElements(!0);f.moveNodes(g.nodes.map(function(y){return y.id}),u/v,l/h)},n.handleContextMenu=function(s){s.preventDefault();var u=n.props,l=u.graphModel,d=u.graphModel,f=d.eventCenter,c=d.selectElements,p=l.getPointByClient({x:s.clientX,y:s.clientY}),v={nodes:[],edges:[]},h=jE([],ri(c.values()),!1);h.forEach(function(g){g.BaseType===at.NODE&&v.nodes.push(g.getData()),g.BaseType===at.EDGE&&v.edges.push(g.getData())}),f.emit(C.SELECTION_CONTEXTMENU,{data:v,e:s,position:p})};var o=r.graphModel,i=o.gridSize,a=o.eventCenter;return n.stepDrag=new le({onDragging:n.onDragging,step:i,eventType:"SELECTION",eventCenter:a}),n}return t.prototype.render=function(){var r,n,o=this.props.graphModel,i=o.selectElements,a=o.transformModel,s=this.props.lf.getTransform(),u=s.SCALE_X,l=s.SCALE_Y;if(!(i.size<=1)){var d=Number.MAX_SAFE_INTEGER,f=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;i.forEach(function(h){var g;h.BaseType===at.NODE&&(g=L_(h)),h.BaseType===at.EDGE&&(g=X_(h)),g!==void 0&&(d=Math.min(d,g.x),f=Math.min(f,g.y),c=Math.max(c,g.x1),p=Math.max(p,g.y1))}),r=ri(a.CanvasPointToHtmlPoint([d,f]),2),d=r[0],f=r[1],n=ri(a.CanvasPointToHtmlPoint([c,p]),2),c=n[0],p=n[1];var v={left:"".concat(d-20*u/2,"px"),top:"".concat(f-20*l/2,"px"),width:"".concat(c-d+20*u,"px"),height:"".concat(p-f+20*l,"px"),"border-width":"".concat(2*u,"px")};return E("div",{className:"lf-multiple-select",style:v,onMouseDown:this.handleMouseDown,onContextMenu:this.handleContextMenu,onWheel:this.handleWheelEvent})}},t.toolName="multiple-select-tool",t=RE([jt],t),t}(z),ni=function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},IE=[NE,LE],BE=function(){function e(t){var r=this;this.toolMap=new Map,this.disabledToolMap=new Map,this.instance=t,st(IE,function(i){r.isDisabled(i.toolName)||r.registerTool(i.toolName,i)});var n=t.graphModel,o=n.eventCenter;o.on("".concat(C.GRAPH_TRANSFORM,",").concat(C.NODE_CLICK,",").concat(C.BLANK_CLICK," "),function(){var i,a=n.textEditElement,s=n.editConfigModel,u=s.edgeTextEdit,l=s.nodeTextEdit;(u||l)&&a&&((i=n.textEditElement)===null||i===void 0||i.setElementState(V.DEFAULT))})}return e.prototype.isDisabled=function(t){var r;return((r=this.instance.options.disabledTools)===null||r===void 0?void 0:r.indexOf(t))!==-1},e.prototype.registerTool=function(t,r){this.toolMap.set(t,r)},e.prototype.disableTool=function(t){var r=this.toolMap.get(t);if(r)return this.disabledToolMap.set(t,r),this.toolMap.delete(t),!0;throw new Error("禁用失败，不存在名为 ${tool} 的工具")},e.prototype.enableTool=function(t){var r=this.disabledToolMap.get(t);if(r)return this.toolMap.set(t,r),this.disabledToolMap.delete(t),!0;throw new Error("不存在名为 ${tool} 的工具")},e.prototype.getTools=function(){return Array.from(this.toolMap.values())},e.prototype.getInstance=function(){return this.instance},ni([b],e.prototype,"toolMap",void 0),ni([x],e.prototype,"disableTool",null),ni([x],e.prototype,"enableTool",null),e}();function $E(e){throw new Error("[mobx-utils] "+e)}function yo(e,t){t===void 0&&(t="Illegal state"),e||$E(t)}var kf=function(e){return e&&e!==Object.prototype&&Object.getOwnPropertyNames(e).concat(kf(Object.getPrototypeOf(e))||[])},XE=function(e){var t=kf(e),r=t.filter(function(n,o){return t.indexOf(n)===o});return r},HE=function(e){return XE(e).filter(function(t){return t!=="constructor"&&!~t.indexOf("__")})},Uf="pending",go="fulfilled",Ca="rejected";function YE(e){switch(this.state){case Uf:return e.pending&&e.pending(this.value);case Ca:return e.rejected&&e.rejected(this.value);case go:return e.fulfilled?e.fulfilled(this.value):this.value}}function Fu(e,t){if(yo(arguments.length<=2,"fromPromise expects up to two arguments"),yo(typeof e=="function"||typeof e=="object"&&e&&typeof e.then=="function","Please pass a promise or function to fromPromise"),e.isPromiseBasedObservable===!0)return e;typeof e=="function"&&(e=new Promise(e));var r=e;e.then(x("observableFromPromise-resolve",function(o){r.value=o,r.state=go}),x("observableFromPromise-reject",function(o){r.value=o,r.state=Ca})),r.isPromiseBasedObservable=!0,r.case=YE;var n=t&&t.state===go?t.value:void 0;return gi(r,{value:n,state:Uf},{},{deep:!1}),r}(function(e){e.reject=x("fromPromise.reject",function(r){var n=e(Promise.reject(r));return n.state=Ca,n.value=r,n});function t(r){r===void 0&&(r=void 0);var n=e(Promise.resolve(r));return n.state=go,n.value=r,n}e.resolve=x("fromPromise.resolve",t)})(Fu||(Fu={}));var In=function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i};(function(){function e(t,r){var n=this;Vd(function(){n.current=r,n.subscription=t.subscribe(n)})}return e.prototype.dispose=function(){this.subscription&&this.subscription.unsubscribe()},e.prototype.next=function(t){this.current=t},e.prototype.complete=function(){this.dispose()},e.prototype.error=function(t){this.current=t,this.dispose()},In([b.ref],e.prototype,"current",void 0),In([x.bound],e.prototype,"next",null),In([x.bound],e.prototype,"complete",null),In([x.bound],e.prototype,"error",null),e})();var _o=function(){return _o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},_o.apply(this,arguments)},Nr=function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},FE=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];(function(){function e(t){var r=this;this.model=t,this.localValues=b.map({}),this.localComputedValues=b.map({}),this.isPropertyDirty=function(n){return r.localValues.has(n)},yo(Zt(t),"createViewModel expects an observable object"),HE(t).forEach(function(n){if(!(n===L||n==="__mobxDidRunLazyInitializers")){if(yo(FE.indexOf(n)===-1,"The propertyname "+n+" is reserved and cannot be used with viewModels"),Fa(t,n)){var o=So(t,n).derivation;r.localComputedValues.set(n,et(o.bind(r)))}var i=Object.getOwnPropertyDescriptor(t,n),a=i?{enumerable:i.enumerable}:{};Object.defineProperty(r,n,_o(_o({},a),{configurable:!0,get:function(){return Fa(t,n)?r.localComputedValues.get(n).get():r.isPropertyDirty(n)?r.localValues.get(n):r.model[n]},set:x(function(s){s!==r.model[n]?r.localValues.set(n,s):r.localValues.delete(n)})}))}})}return Object.defineProperty(e.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"changedValues",{get:function(){return this.localValues.toJS()},enumerable:!1,configurable:!0}),e.prototype.submit=function(){var t=this;hr(this.localValues).forEach(function(r){var n=t.localValues.get(r),o=t.model[r];ue(o)?o.replace(n):At(o)?(o.clear(),o.merge(n)):tc(n)||(t.model[r]=n)}),this.localValues.clear()},e.prototype.reset=function(){this.localValues.clear()},e.prototype.resetProperty=function(t){this.localValues.delete(t)},Nr([et],e.prototype,"isDirty",null),Nr([et],e.prototype,"changedValues",null),Nr([x.bound],e.prototype,"submit",null),Nr([x.bound],e.prototype,"reset",null),Nr([x.bound],e.prototype,"resetProperty",null),e})();function oi(e){if(!e)return"ROOT";for(var t=[];e.parent;)t.push(e.path),e=e.parent;return t.reverse().join("/")}function ii(e){return Zt(e)||ue(e)||At(e)}function GE(e,t){var r=new WeakMap;function n(s){var u=r.get(s.object);o(s,u),t(s,oi(u),e)}function o(s,u){switch(s.type){case"add":i(s.newValue,u,s.name);break;case"update":a(s.oldValue),i(s.newValue,u,s.name||""+s.index);break;case"remove":case"delete":a(s.oldValue);break;case"splice":s.removed.map(a),s.added.forEach(function(f,c){return i(f,u,""+(s.index+c))});for(var l=s.index+s.addedCount;l<s.object.length;l++)if(ii(s.object[l])){var d=r.get(s.object[l]);d&&(d.path=""+l)}break}}function i(s,u,l){if(ii(s)){var d=r.get(s);if(d){if(d.parent!==u||d.path!==l)throw new Error("The same observable object cannot appear twice in the same tree,"+(" trying to assign it to '"+oi(u)+"/"+l+"',")+(" but it already exists at '"+oi(d.parent)+"/"+d.path+"'"))}else{var f={parent:u,path:l,dispose:Dl(s,n)};r.set(s,f),nc(s).forEach(function(c){var p=c[0],v=c[1];return i(v,f,p)})}}}function a(s){if(ii(s)){var u=r.get(s);if(!u)return;r.delete(s),u.dispose(),rc(s).forEach(a)}}return i(e,void 0,""),function(){a(e)}}var zE=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(e){zE(t,e);function t(r,n,o){var i=o===void 0?{}:o,a=i.name,s=a===void 0?"ogm"+(Math.random()*1e3|0):a,u=i.keyToName,l=u===void 0?function(c){return""+c}:u,d=e.call(this)||this;d._keyToName=l,d._groupBy=n,d._ogmInfoKey=Symbol("ogmInfo"+s),d._base=r;for(var f=0;f<r.length;f++)d._addItem(r[f]);return d._disposeBaseObserver=Dl(d._base,function(c){if(c.type==="splice")Ht(function(){for(var p=0,v=c.removed;p<v.length;p++){var h=v[p];d._removeItem(h)}for(var g=0,y=c.added;g<y.length;g++){var _=y[g];d._addItem(_)}});else if(c.type==="update")Ht(function(){d._removeItem(c.oldValue),d._addItem(c.newValue)});else throw new Error("illegal state")}),d}return t.prototype.clear=function(){throw new Error("not supported")},t.prototype.delete=function(r){throw new Error("not supported")},t.prototype.set=function(r,n){throw new Error("not supported")},t.prototype.dispose=function(){this._disposeBaseObserver();for(var r=0;r<this._base.length;r++){var n=this._base[r],o=n[this._ogmInfoKey];o.reaction(),delete n[this._ogmInfoKey]}},t.prototype._getGroupArr=function(r){var n=e.prototype.get.call(this,r);return n===void 0&&(n=b([],{name:"GroupArray["+this._keyToName(r)+"]",deep:!1}),e.prototype.set.call(this,r,n)),n},t.prototype._removeFromGroupArr=function(r,n){var o=e.prototype.get.call(this,r);o.length===1?e.prototype.delete.call(this,r):(n===o.length-1||(o[n]=o[o.length-1],o[n][this._ogmInfoKey].groupArrIndex=n),o.length--)},t.prototype._addItem=function(r){var n=this,o=this._groupBy(r),i=this._getGroupArr(o),a={groupByValue:o,groupArrIndex:i.length,reaction:Ol(function(){return n._groupBy(r)},function(s,u){var l=r[n._ogmInfoKey];n._removeFromGroupArr(l.groupByValue,l.groupArrIndex);var d=n._getGroupArr(s),f=d.length;d.push(r),l.groupByValue=s,l.groupArrIndex=f})};Object.defineProperty(r,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:a}),i.push(r)},t.prototype._removeItem=function(r){var n=r[this._ogmInfoKey];this._removeFromGroupArr(n.groupByValue,n.groupArrIndex),n.reaction(),delete r[this._ogmInfoKey]},t})(ca);Promise.resolve(),typeof queueMicrotask<"u"||typeof process<"u"&&process.nextTick;var Ji=function(){return Ji=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ji.apply(this,arguments)},kE=function(){function e(t){this.undos=[],this.redos=[],this.callbacks=[],this.stopWatch=null,this.curData=null,this.maxSize=50,this.waitTime=100,this.eventCenter=t}return e.prototype.add=function(t){Zs(Qg(this.undos),t)||(this.undos.push(t),Zs(this.curData,t)||(this.redos=[]),this.eventCenter.emit(C.HISTORY_CHANGE,{data:{undos:this.undos,redos:this.redos,undoAble:this.undoAble(),redoAble:this.redoAble()}}),this.undos.length>this.maxSize&&this.undos.shift())},e.prototype.undoAble=function(){return this.undos.length>1},e.prototype.undo=function(){if(this.undoAble()){var t=this.undos.pop();this.redos.push(t);var r=this.undos.pop();return this.curData=$(r),r}},e.prototype.redoAble=function(){return this.redos.length>0},e.prototype.redo=function(){if(this.redoAble()){var t=this.redos.pop();return this.curData=$(t),t}},e.prototype.watch=function(t){var r=this;this.stopWatch&&this.stopWatch(),this.undos.push(t.modelToGraphData()),this.stopWatch=GE(t,Sf(function(){var n=t.modelToHistoryData();n&&r.add(Ji({},n))},this.waitTime))},e}(),Vf={exports:{}};(function(e){(function(t,r,n){if(!t)return;for(var o={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},i={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},a={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},s={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},u,l=1;l<20;++l)o[111+l]="f"+l;for(l=0;l<=9;++l)o[l+96]=l.toString();function d(m,w,P){if(m.addEventListener){m.addEventListener(w,P,!1);return}m.attachEvent("on"+w,P)}function f(m){if(m.type=="keypress"){var w=String.fromCharCode(m.which);return m.shiftKey||(w=w.toLowerCase()),w}return o[m.which]?o[m.which]:i[m.which]?i[m.which]:String.fromCharCode(m.which).toLowerCase()}function c(m,w){return m.sort().join(",")===w.sort().join(",")}function p(m){var w=[];return m.shiftKey&&w.push("shift"),m.altKey&&w.push("alt"),m.ctrlKey&&w.push("ctrl"),m.metaKey&&w.push("meta"),w}function v(m){if(m.preventDefault){m.preventDefault();return}m.returnValue=!1}function h(m){if(m.stopPropagation){m.stopPropagation();return}m.cancelBubble=!0}function g(m){return m=="shift"||m=="ctrl"||m=="alt"||m=="meta"}function y(){if(!u){u={};for(var m in o)m>95&&m<112||o.hasOwnProperty(m)&&(u[o[m]]=m)}return u}function _(m,w,P){return P||(P=y()[m]?"keydown":"keypress"),P=="keypress"&&w.length&&(P="keydown"),P}function A(m){return m==="+"?["+"]:(m=m.replace(/\+{2}/g,"+plus"),m.split("+"))}function M(m,w){var P,T,X,B=[];for(P=A(m),X=0;X<P.length;++X)T=P[X],s[T]&&(T=s[T]),w&&w!="keypress"&&a[T]&&(T=a[T],B.push("shift")),g(T)&&B.push(T);return w=_(T,B,w),{key:T,modifiers:B,action:w}}function S(m,w){return m===null||m===r?!1:m===w?!0:S(m.parentNode,w)}function O(m){var w=this;if(m=m||r,!(w instanceof O))return new O(m);w.target=m,w._callbacks={},w._directMap={};var P={},T,X=!1,B=!1,F=!1;function k(I){I=I||{};var U=!1,Q;for(Q in P){if(I[Q]){U=!0;continue}P[Q]=0}U||(F=!1)}function mt(I,U,Q,G,rt,yt){var q,ut,Mt=[],Et=Q.type;if(!w._callbacks[I])return[];for(Et=="keyup"&&g(I)&&(U=[I]),q=0;q<w._callbacks[I].length;++q)if(ut=w._callbacks[I][q],!(!G&&ut.seq&&P[ut.seq]!=ut.level)&&Et==ut.action&&(Et=="keypress"&&!Q.metaKey&&!Q.ctrlKey||c(U,ut.modifiers))){var Yo=!G&&ut.combo==rt,Fo=G&&ut.seq==G&&ut.level==yt;(Yo||Fo)&&w._callbacks[I].splice(q,1),Mt.push(ut)}return Mt}function xt(I,U,Q,G){w.stopCallback(U,U.target||U.srcElement,Q,G)||I(U,Q)===!1&&(v(U),h(U))}w._handleKey=function(I,U,Q){var G=mt(I,U,Q),rt,yt={},q=0,ut=!1;for(rt=0;rt<G.length;++rt)G[rt].seq&&(q=Math.max(q,G[rt].level));for(rt=0;rt<G.length;++rt){if(G[rt].seq){if(G[rt].level!=q)continue;ut=!0,yt[G[rt].seq]=1,xt(G[rt].callback,Q,G[rt].combo,G[rt].seq);continue}ut||xt(G[rt].callback,Q,G[rt].combo)}var Mt=Q.type=="keypress"&&B;Q.type==F&&!g(I)&&!Mt&&k(yt),B=ut&&Q.type=="keydown"};function Lt(I){typeof I.which!="number"&&(I.which=I.keyCode);var U=f(I);if(U){if(I.type=="keyup"&&X===U){X=!1;return}w.handleKey(U,p(I),I)}}function ye(){clearTimeout(T),T=setTimeout(k,1e3)}function vt(I,U,Q,G){P[I]=0;function rt(Et){return function(){F=Et,++P[I],ye()}}function yt(Et){xt(Q,Et,I),G!=="keyup"&&(X=f(Et)),setTimeout(k,10)}for(var q=0;q<U.length;++q){var ut=q+1===U.length,Mt=ut?yt:rt(G||M(U[q+1]).action);Pt(U[q],Mt,G,I,q)}}function Pt(I,U,Q,G,rt){w._directMap[I+":"+Q]=U,I=I.replace(/\s+/g," ");var yt=I.split(" "),q;if(yt.length>1){vt(I,yt,U,Q);return}q=M(I,Q),w._callbacks[q.key]=w._callbacks[q.key]||[],mt(q.key,q.modifiers,{type:q.action},G,I,rt),w._callbacks[q.key][G?"unshift":"push"]({callback:U,modifiers:q.modifiers,action:q.action,seq:G,level:rt,combo:I})}w._bindMultiple=function(I,U,Q){for(var G=0;G<I.length;++G)Pt(I[G],U,Q)},d(m,"keypress",Lt),d(m,"keydown",Lt),d(m,"keyup",Lt)}O.prototype.bind=function(m,w,P){var T=this;return m=m instanceof Array?m:[m],T._bindMultiple.call(T,m,w,P),T},O.prototype.unbind=function(m,w){var P=this;return P.bind.call(P,m,function(){},w)},O.prototype.trigger=function(m,w){var P=this;return P._directMap[m+":"+w]&&P._directMap[m+":"+w]({},m),P},O.prototype.reset=function(){var m=this;return m._callbacks={},m._directMap={},m},O.prototype.stopCallback=function(m,w){var P=this;if((" "+w.className+" ").indexOf(" mousetrap ")>-1||S(w,P.target))return!1;if("composedPath"in m&&typeof m.composedPath=="function"){var T=m.composedPath()[0];T!==m.target&&(w=T)}return w.tagName=="INPUT"||w.tagName=="SELECT"||w.tagName=="TEXTAREA"||w.isContentEditable},O.prototype.handleKey=function(){var m=this;return m._handleKey.apply(m,arguments)},O.addKeycodes=function(m){for(var w in m)m.hasOwnProperty(w)&&(o[w]=m[w]);u=null},O.init=function(){var m=O(r);for(var w in m)w.charAt(0)!=="_"&&(O[w]=function(P){return function(){return m[P].apply(m,arguments)}}(w))},O.init(),t.Mousetrap=O,e.exports&&(e.exports=O)})(typeof window<"u"?window:null,typeof window<"u"?document:null)})(Vf);var UE=Vf.exports;const VE=Ku(UE);var Jt=null;function Gu(e,t){return e.x+=t,e.y+=t,Mf(e.text)||(e.text.x+=t,e.text.y+=t),e}function zu(e,t){return e.startPoint&&(e.startPoint.x+=t,e.startPoint.y+=t),e.endPoint&&(e.endPoint.x+=t,e.endPoint.y+=t),e.pointsList&&e.pointsList.length>0&&e.pointsList.forEach(function(r){r.x+=t,r.y+=t}),Mf(e.text)||(e.text.x+=t,e.text.y+=t),e}var Je=40,Bn=40;function WE(e,t){var r=e.keyboard,n=r.options.keyboard;r.on(["cmd + c","ctrl + c"],function(){if(Bn=Je,!(n!=null&&n.enabled)||t.textEditElement)return!0;var o=e.options.guards,i=t.getSelectElements(!1),a=o&&o.beforeClone?o.beforeClone(i):!0;return!a||i.nodes.length===0&&i.edges.length===0?(Jt=null,!0):(Jt=i,Jt.nodes.forEach(function(s){return Gu(s,Je)}),Jt.edges.forEach(function(s){return zu(s,Je)}),!1)}),r.on(["cmd + v","ctrl + v"],function(){if(!(n!=null&&n.enabled)||t.textEditElement)return!0;if(Jt&&(Jt.nodes||Jt.edges)){e.clearSelectElements();var o=e.addElements(Jt,Bn);if(!o)return!0;o.nodes.forEach(function(i){return e.selectElementById(i.id,!0)}),o.edges.forEach(function(i){return e.selectElementById(i.id,!0)}),Jt.nodes.forEach(function(i){return Gu(i,Je)}),Jt.edges.forEach(function(i){return zu(i,Je)}),Bn=Bn+Je}return!1}),r.on(["cmd + z","ctrl + z"],function(){return!(n!=null&&n.enabled)||t.textEditElement?!0:(e.undo(),!1)}),r.on(["cmd + y","ctrl + y"],function(){return!(n!=null&&n.enabled)||t.textEditElement?!0:(e.redo(),!1)}),r.on(["backspace"],function(){if(!(n!=null&&n.enabled)||t.textEditElement)return!0;var o=t.getSelectElements(!0);return e.clearSelectElements(),o.edges.forEach(function(i){return i.id&&e.deleteEdge(i.id)}),o.nodes.forEach(function(i){return i.id&&e.deleteNode(i.id)}),!1})}var KE=function(){function e(t){t.keyboard||(t.keyboard={enabled:!1}),this.options=t;var r=t.lf;this.target=r.container,this.mousetrap=new VE(this.target),t.keyboard.enabled&&!r.options.isSilentMode&&this.enable(!0)}return e.prototype.initShortcuts=function(){var t=this,r,n=((r=this.options.keyboard)!==null&&r!==void 0?r:{}).shortcuts;if(n)if(ct(n))n.forEach(function(s){var u=s.keys,l=s.callback,d=s.action;return t.on(u,l,d)});else{var o=n.keys,i=n.callback,a=n.action;this.on(o,i,a)}},e.prototype.on=function(t,r,n){this.mousetrap.bind(this.getKeys(t),r,n)},Object.defineProperty(e.prototype,"disabled",{get:function(){var t,r;return((r=(t=this.options)===null||t===void 0?void 0:t.keyboard)===null||r===void 0?void 0:r.enabled)!==!0},enumerable:!1,configurable:!0}),e.prototype.off=function(t,r){this.mousetrap.unbind(this.getKeys(t),r)},e.prototype.enable=function(t){(this.disabled||t)&&(this.options.keyboard&&(this.options.keyboard.enabled=!0),this.target instanceof HTMLElement&&(this.target.setAttribute("tabindex","-1"),this.target.style.outline="none"))},e.prototype.disable=function(){this.disabled||(this.options.keyboard&&(this.options.keyboard.enabled=!1),this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))},e.prototype.getKeys=function(t){var r=this;return(Array.isArray(t)?t:[t]).map(function(n){return r.formatKey(n)})},e.prototype.formatKey=function(t){return t.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command")},e}(),xe=function(){return xe=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},xe.apply(this,arguments)},$n=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},ai=function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},si=Symbol("plugin registered by Logicflow.use"),Qi=function(){function e(t){var r=this,n;this.viewMap=new Map,this.components=[],this.extension={},this.setView=function(l,d){return r.viewMap.set(l,d)},this.getView=function(l){return r.viewMap.get(l)};var o=Qr.get(t),i=o.container,a=o.width,s=o.height;this.options=o,this.container=this.initContainer(i,a,s),this.graphModel=new hx(xe(xe({},o),{container:this.container})),this.plugins=(n=o.plugins)!==null&&n!==void 0?n:[];var u=this.graphModel.eventCenter;this.tool=new BE(this),this.dnd=new AE({lf:this}),this.history=new kE(u),this.keyboard=new KE({lf:this,keyboard:o.keyboard}),o.snapline!==!1&&(this.snaplineModel=new vx(this.graphModel),ME(u,this.snaplineModel)),o.isSilentMode||(WE(this,this.graphModel),this.keyboard.initShortcuts()),this.defaultRegister(),this.installPlugins(o.disabledPlugins)}return e.prototype.initContainer=function(t,r,n){var o=document.createElement("div");return o.style.position="relative",o.style.width=r?"".concat(r,"px"):"100%",o.style.height=n?"".concat(n,"px"):"100%",t.innerHTML="",t.appendChild(o),o},Object.defineProperty(e.prototype,Symbol.toStringTag,{get:function(){return e.toStringTag},enumerable:!1,configurable:!0}),e.prototype.register=function(t,r,n){if(n===void 0&&(n=!0),typeof t!="string"){this.registerElement(t);return}var o={BaseEdge:Ho,BaseEdgeModel:Xo,BaseNode:Ce,BaseNodeModel:Ne,RectNode:Nu,RectNodeModel:Au,CircleNode:Cu,CircleNodeModel:bu,PolygonNode:Ru,PolygonNodeModel:Su,TextNode:Iu,TextNodeModel:Tu,LineEdge:Hu,LineEdgeModel:_u,DiamondNode:ju,DiamondNodeModel:Ou,PolylineEdge:Yu,PolylineEdgeModel:xu,BezierEdge:Xu,BezierEdgeModel:gu,EllipseNode:Lu,EllipseNodeModel:wu,HtmlNode:Bu,HtmlNodeModel:Pu,h:ar,type:t};if(this.viewMap.forEach(function(l){var d=l.extendKey;d&&(o[d]=l)}),this.graphModel.modelMap.forEach(function(l){var d=l.extendKey;d&&(o[d]=l)}),r){var i=r(o),a=i.view,s=i.model,u=a;n&&!u.isObserved&&(u.isObserved=!0,u=jt(u)),this.setView(t,u),this.graphModel.setModel(t,s)}},e.prototype.registerElement=function(t){var r=t.view;t.isObserverView!==!1&&!r.isObserved&&(r.isObserved=!0,r=jt(r)),this.setView(t.type,r),this.graphModel.setModel(t.type,t.model)},e.prototype.batchRegister=function(t){var r=this;t===void 0&&(t=[]),st(t,function(n){r.registerElement(n)})},e.prototype.defaultRegister=function(){var t=[{type:"rect",view:Nu,model:Au},{type:"circle",view:Cu,model:bu},{type:"polygon",view:Ru,model:Su},{type:"text",view:Iu,model:Tu},{type:"ellipse",view:Lu,model:wu},{type:"diamond",view:ju,model:Ou},{type:"html",view:Bu,model:Pu},{type:"line",view:Hu,model:_u},{type:"polyline",view:Yu,model:xu},{type:"bezier",view:Xu,model:gu}];this.batchRegister(t)},e.prototype.addNode=function(t,r,n){return r===void 0&&(r=C.NODE_ADD),this.graphModel.addNode(t,r,n)},e.prototype.deleteNode=function(t){var r=this.graphModel.getNodeModelById(t);if(!r)return!1;var n=r.getData(),o=this.options.guards,i=o!=null&&o.beforeDelete?o.beforeDelete(n):!0;return i&&this.graphModel.deleteNode(t),i},e.prototype.cloneNode=function(t){var r=this.graphModel.getNodeModelById(t),n=r==null?void 0:r.getData();if(n){var o=this.options.guards,i=o!=null&&o.beforeClone?o.beforeClone(n):!0;if(i)return this.graphModel.cloneNode(t)}},e.prototype.changeNodeId=function(t,r){return this.graphModel.changeNodeId(t,r)},e.prototype.changeNodeType=function(t,r){this.graphModel.changeNodeType(t,r)},e.prototype.getNodeModelById=function(t){return this.graphModel.getNodeModelById(t)},e.prototype.getNodeDataById=function(t){var r=this.getNodeModelById(t);return r==null?void 0:r.getData()},e.prototype.getNodeIncomingEdge=function(t){return this.graphModel.getNodeIncomingEdge(t)},e.prototype.getNodeOutgoingEdge=function(t){return this.graphModel.getNodeOutgoingEdge(t)},e.prototype.getNodeIncomingNode=function(t){return this.graphModel.getNodeIncomingNode(t)},e.prototype.getNodeOutgoingNode=function(t){return this.graphModel.getNodeOutgoingNode(t)},e.prototype.createFakeNode=function(t){var r=this.graphModel.modelMap.get(t.type);if(!r)return console.warn("不存在为".concat(t.type,"类型的节点")),null;var n=new r(xe(xe({},t),{virtual:!0}),this.graphModel);return this.graphModel.setFakeNode(n),n},e.prototype.removeFakeNode=function(){this.graphModel.removeFakeNode()},e.prototype.setNodeSnapLine=function(t){var r;(r=this.snaplineModel)===null||r===void 0||r.setNodeSnapLine(t)},e.prototype.removeNodeSnapLine=function(){var t;(t=this.snaplineModel)===null||t===void 0||t.clearSnapline()},e.prototype.setDefaultEdgeType=function(t){this.graphModel.setDefaultEdgeType(t)},e.prototype.addEdge=function(t){return this.graphModel.addEdge(t)},e.prototype.getEdgeDataById=function(t){var r=this.getEdgeModelById(t);return r==null?void 0:r.getData()},e.prototype.getEdgeModelById=function(t){return this.graphModel.getEdgeModelById(t)},e.prototype.getEdgeModels=function(t){var r=t.sourceNodeId,n=t.targetNodeId,o=[],i=this.graphModel.edges;return r&&n?st(i,function(a){a.sourceNodeId===r&&a.targetNodeId===n&&o.push(a)}):r?st(i,function(a){a.sourceNodeId===r&&o.push(a)}):n&&st(i,function(a){a.targetNodeId===n&&o.push(a)}),o},e.prototype.changeEdgeId=function(t,r){return this.graphModel.changeEdgeId(t,r)},e.prototype.changeEdgeType=function(t,r){this.graphModel.changeEdgeType(t,r)},e.prototype.deleteEdge=function(t){var r=this.graphModel.getEdgeModelById(t);if(!r)return!1;var n=r.getData(),o=this.options.guards,i=o!=null&&o.beforeDelete?o.beforeDelete(n):!0;return i&&this.graphModel.deleteEdgeById(t),i},e.prototype.deleteEdgeByNodeId=function(t){var r=t.sourceNodeId,n=t.targetNodeId;r&&n?this.graphModel.deleteEdgeBySourceAndTarget(r,n):r?this.graphModel.deleteEdgeBySource(r):n&&this.graphModel.deleteEdgeByTarget(n)},e.prototype.getNodeEdges=function(t){return this.graphModel.getNodeEdges(t)},e.prototype.addElements=function(t,r){var n=this,o=t.nodes,i=t.edges;r===void 0&&(r=40),console.log("distance",r);var a={},s={nodes:[],edges:[]};return st(o,function(u){var l=u.id,d=n.addNode(u);l&&(a[l]=d.id),s.nodes.push(d)}),st(i,function(u){var l=u.sourceNodeId,d=u.targetNodeId;a[l]&&(l=a[l]),a[d]&&(d=a[d]);var f=n.graphModel.addEdge(xe(xe({},u),{sourceNodeId:l,targetNodeId:d}));s.edges.push(f)}),s},e.prototype.selectElementById=function(t,r,n){r===void 0&&(r=!1),n===void 0&&(n=!0),this.graphModel.selectElementById(t,r),!r&&n&&this.graphModel.toFront(t)},e.prototype.getSelectElements=function(t){return t===void 0&&(t=!0),this.graphModel.getSelectElements(t)},e.prototype.clearSelectElements=function(){this.graphModel.clearSelectElements()},e.prototype.getModelById=function(t){return this.graphModel.getElement(t)},e.prototype.getDataById=function(t){var r;return(r=this.graphModel.getElement(t))===null||r===void 0?void 0:r.getData()},e.prototype.deleteElement=function(t){var r,n,o,i=this.getModelById(t);if(!i)return!1;var a=(r={},r[at.NODE]=this.deleteNode,r[at.EDGE]=this.deleteEdge,r);return(o=(n=a[i.BaseType])===null||n===void 0?void 0:n.call(this,t))!==null&&o!==void 0?o:!1},e.prototype.setElementZIndex=function(t,r){return this.graphModel.setElementZIndex(t,r)},e.prototype.getAreaElement=function(t,r,n,o,i){return n===void 0&&(n=!0),o===void 0&&(o=!0),i===void 0&&(i=!1),this.graphModel.getAreaElement(t,r,n,o,i).map(function(a){return a.getData()})},e.prototype.setProperties=function(t,r){var n;(n=this.graphModel.getElement(t))===null||n===void 0||n.setProperties(_t(r))},e.prototype.getProperties=function(t){var r;return(r=this.graphModel.getElement(t))===null||r===void 0?void 0:r.getProperties()},e.prototype.deleteProperty=function(t,r){var n;(n=this.graphModel.getElement(t))===null||n===void 0||n.deleteProperty(r)},e.prototype.updateAttributes=function(t,r){this.graphModel.updateAttributes(t,r)},e.prototype.editText=function(t){this.graphModel.editText(t)},e.prototype.updateText=function(t,r){this.graphModel.updateText(t,r)},e.prototype.updateEditConfig=function(t){var r=this.graphModel,n=r.editConfigModel,o=r.transformModel;n.updateEditConfig(t),(t==null?void 0:t.stopMoveGraph)!==void 0&&o.updateTranslateLimits(t.stopMoveGraph),t!=null&&t.isSilentMode?this.keyboard.disable():this.keyboard.enable(!0)},e.prototype.getEditConfig=function(){return this.graphModel.editConfigModel.getConfig()},e.prototype.setTheme=function(t){this.graphModel.setTheme(t)},e.prototype.focusByElement=function(t){var r=void 0,n=this.getNodeModelById(t);if(n){var o=n.getData(),i=o.x,a=o.y;r={x:i,y:a}}var s=this.getEdgeModelById(t);if(s){var u=s.textPosition,i=u.x,a=u.y;r={x:i,y:a}}r&&this.focusByCoordinate(r)},e.prototype.focusByCoordinate=function(t){var r=this.graphModel,n=r.transformModel,o=r.width,i=r.height,a=t.x,s=t.y;n.focusOn(a,s,o,i)},e.prototype.focusOn=function(t){if(typeof t=="string")this.focusByElement(t);else if("x"in t&&"y"in t)this.focusByCoordinate(t);else{var r=t.id,n=t.coordinate;r&&this.focusByElement(r),n&&this.focusByCoordinate(n)}},e.prototype.resize=function(t,r){this.graphModel.resize(t,r),this.options.width=this.graphModel.width,this.options.height=this.graphModel.height},e.prototype.toFront=function(t){this.graphModel.toFront(t)},e.prototype.getPointByClient=function(t,r){if(typeof t=="object")return this.graphModel.getPointByClient(t);if(typeof r=="number")return this.graphModel.getPointByClient({x:t,y:r})},e.prototype.getGraphData=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=this.getGraphRawData();return this.adapterOut?this.adapterOut.apply(this,ai([n],$n(t),!1)):n},e.prototype.getGraphRawData=function(){return this.graphModel.modelToGraphData()},e.prototype.clearData=function(){this.graphModel.clearData()},e.prototype.renderRawData=function(t){this.graphModel.graphDataToModel(_t(t)),this.options.history!==!1&&this.history.watch(this.graphModel),Xc(E(Ux,{getView:this.getView,tool:this.tool,options:this.options,dnd:this.dnd,snaplineModel:this.snaplineModel,graphModel:this.graphModel}),this.container),this.emit(C.GRAPH_RENDERED,{data:this.graphModel.modelToGraphData(),graphModel:this.graphModel})},e.prototype.render=function(t){var r=$(t);this.adapterIn&&(r=this.adapterIn(r)),this.renderRawData(r)},e.prototype.undo=function(){if(this.history.undoAble()){var t=_t(this.history.undo());this.clearSelectElements(),this.graphModel.graphDataToModel(t)}},e.prototype.redo=function(){if(this.history.redoAble()){var t=_t(this.history.redo());this.clearSelectElements(),this.graphModel.graphDataToModel(t)}},e.prototype.zoom=function(t,r){var n=this.graphModel.transformModel;return n.zoom(t,r)},e.prototype.resetZoom=function(){var t=this.graphModel.transformModel;t.resetZoom()},e.prototype.setZoomMiniSize=function(t){var r=this.graphModel.transformModel;r.setZoomMiniSize(t)},e.prototype.setZoomMaxSize=function(t){var r=this.graphModel.transformModel;r.setZoomMaxSize(t)},e.prototype.getTransform=function(){var t=this.graphModel.transformModel,r=t.SCALE_X,n=t.SCALE_Y,o=t.TRANSLATE_X,i=t.TRANSLATE_Y;return{SCALE_X:r,SCALE_Y:n,TRANSLATE_X:o,TRANSLATE_Y:i}},e.prototype.translate=function(t,r){var n=this.graphModel.transformModel;n.translate(t,r)},e.prototype.resetTranslate=function(){var t=this.graphModel.transformModel,r=t.TRANSLATE_X,n=t.TRANSLATE_Y;this.translate(-r,-n)},e.prototype.translateCenter=function(){this.graphModel.translateCenter()},e.prototype.fitView=function(t,r){r===void 0&&(r=t),this.graphModel.fitView(t,r)},e.prototype.openEdgeAnimation=function(t){this.graphModel.openEdgeAnimation(t)},e.prototype.closeEdgeAnimation=function(t){this.graphModel.closeEdgeAnimation(t)},e.prototype.on=function(t,r){this.graphModel.eventCenter.on(t,r)},e.prototype.off=function(t,r){this.graphModel.eventCenter.off(t,r)},e.prototype.once=function(t,r){this.graphModel.eventCenter.once(t,r)},e.prototype.emit=function(t,r){this.graphModel.eventCenter.emit(t,r)},e.use=function(t,r){var n,o=t.pluginName;if(!o)throw new Error("请给插件指定 pluginName!");this.extensions.set(o,(n={},n[si]=si,n.extension=t,n.props=r,n))},e.prototype.installPlugins=function(t){var r=this;t===void 0&&(t=[]);var n=Array.from(e.extensions,function(i){var a=$n(i,2),s=a[1];return s}),o=ai(ai([],$n(this.plugins),!1),$n(n),!1);st(o,function(i){var a,s;si in i?(a=i.extension,s=i.props):a=i;var u=a==null?void 0:a.pluginName;p_(t,u)===-1&&r.installPlugin(a,s)})},e.prototype.installPlugin=function(t,r){var n,o;if("pluginName"in t&&"install"in t){var i=t.pluginName,a=t.install,s=t.render;i&&(a&&a.call(t,this,e),s&&this.components.push(s.bind(t)),this.extension[i]=t);return}var u=t,l=u.pluginName,d=new u({lf:this,LogicFlow:e,props:r,options:(o=(n=this.options.pluginsOptions)===null||n===void 0?void 0:n[l])!==null&&o!==void 0?o:{}});d.render&&this.components.push(d.render.bind(d)),this.extension[l]=d},e.extensions=new Map,e}();(function(e){e.toStringTag="LF.".concat(e.name)})(Qi||(Qi={}));const ZE=Qi;function jt(e){return va(e)}const qE={nodes:[{id:"20",type:"rect",x:100,y:100,text:"Rect Node"},{id:"50",type:"circle",x:250,y:250,text:"Circle Node"}],edges:[{type:"polyline",sourceNodeId:"50",targetNodeId:"20"}]},Wf=Kf({__name:"Page",setup(e){const t=Zf();return qf(()=>{new ZE({container:t.value,width:800,height:400}).render(qE)}),(r,n)=>(Jf(),Qf(td,null,[n[0]||(n[0]=Ra("h1",null,"Vue TS + Storybook",-1)),Ra("div",{id:"container",ref_key:"container",ref:t},null,512)],64))}}),JE=(e,t)=>{const r=e.__vccOpts||e;for(const[n,o]of t)r[n]=o;return r},ku=JE(Wf,[["__scopeId","data-v-59c81c59"]]);Wf.__docgenInfo={exportName:"default",displayName:"Page",description:"",tags:{},sourceFiles:["/home/neo/Documents/Dev/BitBucket/vue-ts-storybook/src/Page.vue"]};const r0={title:"Page",component:ku,render:()=>({components:{Page:ku},template:"<Page />"}),parameters:{layout:"fullscreen"}},Xn={};var Uu,Vu,Wu;Xn.parameters={...Xn.parameters,docs:{...(Uu=Xn.parameters)==null?void 0:Uu.docs,source:{originalSource:"{}",...(Wu=(Vu=Xn.parameters)==null?void 0:Vu.docs)==null?void 0:Wu.source}}};const n0=["LogicFlow"];export{Xn as LogicFlow,n0 as __namedExportsOrder,r0 as default};
